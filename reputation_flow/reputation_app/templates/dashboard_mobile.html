<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Centralize customer feedback, reviews, and FAQs from all your social channels. Showcase real customer stories to build trust and drive business growth." />
    <meta name="author" content="Hezron Bii">
    <meta name="keywords"
        content="customer feedback, social proof, reviews aggregator, customer engagement, business reviews, social media reviews, FAQ management, reputation management, SaaS for businesses, reviews display" />
    <!-- OG Meta Tags to improve the way the post looks when you share the page on Facebook, Twitter, LinkedIn -->
    <meta property="og:site_name" content="" /> <!-- website name -->
    <meta property="og:site" content="" /> <!-- website link -->
    <meta property="og:title" content="Showcase Social Proof and Boost Your Business" />
    <!-- title shown in the actual shared post -->
    <meta property="og:description"
        content="Easily collect and display reviews and FAQs from social media. Let your customers' voices amplify your business success." />
    <meta name="csrf-token" content="{{ csrf_token }}">

    <!-- Webpage Title -->
    <title>Turn Reviews Into Revenue</title>
    <!-- Styles -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/fontawesome-all.min.css' %}" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
    </script>


    <link href="{% static 'css/swiper.css' %}" rel="stylesheet">
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">

    <!-- Favicon  -->
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/fav_icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/faviconn.png' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="{% static  'css/main.css' %}">
    <link rel="stylesheet" href="{% static  'css/upload.css' %}">
    <link rel="stylesheet" href="{% static  'css/multiselect.css' %}">
    <link rel="stylesheet" href="{% static  'css/feature-request-style.css' %}">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--    GOOGLE ANALYTICS TRACKING-->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R3C8P55552"></script>

    <!-- Include ApexCharts from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <!-- Include Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Include Flatpickr JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>

        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-R3C8P55552');
    </script>

    <style>
        .loader {
            width: 48px;
            height: 48px;
            display: inline-block;
            position: relative;
            display: block;
            margin-left: 45%;
            margin-top: 200px;
        }

        .loader::after,
        .loader::before {
            content: '';
            box-sizing: border-box;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid grey;
            position: absolute;
            left: 0;
            top: 0;
            animation: animloader 2s linear infinite;
        }

        .loader::after {
            animation-delay: 1s;
        }

        @keyframes animloader {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            100% {
                transform: scale(1);
                opacity: 0;
            }
        }


        /* Container for the grid */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            /* 2 items per row */
            gap: 15px;
            /* Gap between grid items */
            padding: 10px;
            margin: 20px;
            height: 80%;
            /* Adjust height as needed */
            overflow-y: scroll;
            /* Vertical scrolling */
            overflow-x: hidden;
            /* Hide horizontal scroll */
        }

        /* Individual grid items */
        .grid-item {
            background: rgba(0, 0, 0, 0.15);
            padding: 20px;
            width: 200px;
            height: 200px;
            text-align: center;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .fade-in {
            animation: fadeIn ease 1s;
            -webkit-animation: fadeIn ease 1s;
            -moz-animation: fadeIn ease 1s;
            -o-animation: fadeIn ease 1s;
            -ms-animation: fadeIn ease 1s;
        }

        .pm-box:hover {
            border: #1dcd52 solid 1px;

        }

        .pm-chat-item:hover {
            background: #f9f9f9;
        }

        .pm-chat-active {
            background: #f9f9f9;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @-moz-keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @-webkit-keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @-o-keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @-ms-keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        .slide-right {
            animation: 1s slide-right;
        }

        @keyframes slide-right {
            from {
                margin-left: -100%;
            }

            to {
                margin-left: 0%;
            }
        }

        .res-cont-dec {
            color: #808080;
        }

        .content-analysis {
            margin-left: 10%;
            margin-right: 20%;
            margin-top: 20px;
            text-align: center;
        }

        .inactive-socials {
            color: rgb(198, 197, 197);
            padding: 5px;
        }

        .platform {
            cursor: pointer;
        }

        .slider {
            width: 100%;
            height: 300px;
            overflow: hidden;
            position: relative;
        }

        .slider img {
            width: 100%;
            height: 100%;
            position: absolute;
            animation: slide 10s infinite;
        }

        @keyframes slide {
            0% {
                left: 0%;
            }

            20% {
                left: 0%;
            }

            25% {
                left: -100%;
            }

            45% {
                left: -100%;
            }

            50% {
                left: -200%;
            }

            70% {
                left: -200%;
            }

            75% {
                left: -300%;
            }

            95% {
                left: -300%;
            }
        }

        /* START TOOLTIP STYLES */
        [tooltip] {
            position: relative;
            /* opinion 1 */
        }

        /* Applies to all tooltips */
        [tooltip]::before,
        [tooltip]::after {
            text-transform: none;
            /* opinion 2 */
            font-size: 12px;
            user-select: none;
            pointer-events: none;
            position: absolute;
            display: none;
            opacity: 0;
            z-index: 2000;
        }

        [tooltip]::before {
            content: '';
            border: 5px solid transparent;
            /* opinion 4 */
            z-index: 1001;
            /* absurdity 1 */
        }

        [tooltip]::after {
            content: attr(tooltip);
            /* magic! */

            /* most of the rest of this is opinion */
            font-family: Helvetica, sans-serif;
            text-align: center;

            /* 
    Let the content set the size of the tooltips 
    but this will also keep them from being obnoxious
    */
            width: 150px;
            padding: 1ch 1.5ch;
            position: absolute;
            border-radius: 5px;
            box-shadow: 0 1em 2em -.5em rgba(0, 0, 0, 0.35);
            background: #333;
            color: #fff;
            z-index: 2000;
            /* absurdity 2 */
        }

        /* Make the tooltips respond to hover */
        [tooltip]:hover::before,
        [tooltip]:hover::after {
            display: block;
        }

        /* don't show empty tooltips */
        [tooltip='']::before,
        [tooltip='']::after {
            display: none !important;
        }

        /* FLOW: UP */
        [tooltip]:not([flow])::before,
        [tooltip][flow^="up"]::before {
            bottom: 100%;
            border-bottom-width: 0;
            border-top-color: #333;
        }

        [tooltip]:not([flow])::after,
        [tooltip][flow^="up"]::after {
            bottom: calc(100% + 5px);
        }

        [tooltip]:not([flow])::before,
        [tooltip]:not([flow])::after,
        [tooltip][flow^="up"]::before,
        [tooltip][flow^="up"]::after {
            left: 50%;
            transform: translate(-50%, -.5em);
        }

        /* FLOW: DOWN */
        [tooltip][flow^="down"]::before {
            top: 100%;
            border-top-width: 0;
            border-bottom-color: #333;
        }

        [tooltip][flow^="down"]::after {
            top: calc(100% + 5px);
        }

        [tooltip][flow^="down"]::before,
        [tooltip][flow^="down"]::after {
            left: 50%;
            transform: translate(-50%, .5em);
        }


        /* KEYFRAMES */
        @keyframes tooltips-vert {
            to {
                opacity: .9;
                transform: translate(-50%, 0);
            }
        }

        @keyframes tooltips-horz {
            to {
                opacity: .9;
                transform: translate(0, -50%);
            }
        }

        /* FX All The Things */
        [tooltip]:not([flow]):hover::before,
        [tooltip]:not([flow]):hover::after,
        [tooltip][flow^="up"]:hover::before,
        [tooltip][flow^="up"]:hover::after,
        [tooltip][flow^="down"]:hover::before,
        [tooltip][flow^="down"]:hover::after {
            animation: tooltips-vert 300ms ease-out forwards;
        }

        /* chatbot */
        .chat_button {
            position: absolute;
            bottom: 0;
            right: 0;
            margin: 30px 40px;
            height: 80px;
            width: 80px;
            text-align: center;
            background-color: #eff;
            border-radius: 100px;
            border: none;
            font-size: 1.6rem;
            color: #77e;
            cursor: pointer;
            transition: 0.5s ease-in-out;
        }

        .chat_button:hover {
            border: 2px solid #eff;
            background-color: #77e;
            color: #eff;
        }

        .chat_button:focus,
        .chat_button:active {
            outline: none;
        }

        .chat_box {
            max-height: 100%;
            max-width: 100%;
            height: 500px;
            width: 350px;
            background-color: #fff;
            position: absolute;
            bottom: 100px;
            right: 100px;
            display: none;
            z-index: 300;
            border-radius: 15px;
            background-color: rgb(232, 232, 232);
            /* background-image: url(https://i.pinimg.com/originals/40/39/e0/4039e0f1ef08b7b965bacb4641a7af49.jpg); */
            box-shadow: 0 0 50px rgba(0, 0, 0, .45);
        }

        .chat_box_header {
            padding: 20px;
            background: #e1e3e8;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            text-align: center;
            color: #77e;
            font-weight: 600;
            letter-spacing: 0.25rem;
        }

        .chat_box_body {
            padding: 16px;
            height: 100%;
            overflow-y: scroll;
            height: 380px;
            scroll-behavior: smooth;
        }

        .chat_box_body_self {
            padding: 16px 15px;
            float: right;
            border-radius: 25px;
            margin-right: 10px;
            background: #5a5eb9;
            color: white;
            margin: 10px 0;
            clear: both;
            max-width: 75%;
        }

        .chat_box_body_other {
            background: whitesmoke;
            padding: 16px 15px;
            color: #666;
            max-width: 75%;
            float: left;
            margin-left: 10px;
            margin: 10px 0;
            position: relative;
            margin-bottom: 20px;
            border-radius: 25px;
            clear: both;
        }

        .chat_box_body::-webkit-scrollbar {
            width: 5px;
            background-color: #f5f5f5;
        }

        .chat_box_body::-webkit-scrollbar-thumb {
            background-color: #77e;
        }

        .chat_box_footer {
            max-width: 100%;
            height: 80px;
            position: absolute;
            bottom: -31px;
        }

        .chat_box_footer input {
            max-width: 100%;
            width: 270px;
            padding: 15px;
            border-bottom-left-radius: 15px;
            border: none;
            position: fixed;
            background-color: #eee;
        }

        .chat_box_footer input:focus {
            outline: none;
        }



        #send-btn button {
            position: absolute;
            bottom: 30px;
            font-size: 1.4rem;
            background: white;
            box-shadow: none;
            border: none;
            border-bottom-right-radius: 16px;
            color: #5a5eb9;
            padding: 12px 15px;
            left: 300px;
        }

        .chat_box_footer button:focus {
            outline: none;
        }

        .toggle {
            display: block;
        }

        .animated {
            -webkit-animation-duration: 1s;
            animation-duration: 1s;
            -webkit-animation-fill-mode: both;
            animation-fill-mode: both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                -webkit-transform: translate3d(0, 10%, 0);
                transform: translate3d(0, 10%, 0);
            }

            to {
                opacity: 1;
                -webkit-transform: translate3d(0, 0, 0);
                transform: translate3d(0, 0, 0);
            }
        }

        .fadeInUp {
            -webkit-animation-name: fadeInUp;
            animation-name: fadeInUp;
        }

        .brand {
            text-align: center !important;
            margin-top: 25px;
        }

        .brand a {
            color: white;
            text-decoration: none;
        }

        @media only screen and (max-width: 420px) {
            #chatbar {
                width: 100%;
                position: absolute;
                left: 0;
                bottom: 8rem;
            }

            #chatbar .chat_box_footer input {
                width: 100%;
            }

            #send-btn button {
                width: 30%;
                right: 0;
            }
        }

        /* linked accounts socials */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            /* 2 columns */
            grid-template-rows: repeat(2, 1fr);
            /* 3 rows */
            gap: 10px;
            /* Space between items */
        }

        .grid-item {
            color: white;
            text-align: center;
            padding: 10px;
            width: 250px;
            font-size: 18px;
            border-radius: 5px;
            height: 160px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1), 0px 2px 4px rgba(0, 0, 0, 0.06);
            background-color: white;
        }

        .bx-shadow {
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1), 0px 2px 4px rgba(0, 0, 0, 0.06);
        }

        .br-10 {
            border-radius: 10px;
        }

        .hover-active:hover {
            cursor: pointer;
            color: rgb(78, 78, 244);
        }

        .hover-active-div:hover {
            cursor: pointer;
            background-color: rgba(222, 222, 222, 0.381);
            border-radius: 5px;
        }

        .active-div {
            background-color: rgba(222, 222, 222, 0.381);
            border-radius: 5px;
        }

        .zero-padding-margin {
            margin: 0;
            padding: 0;
        }

        .font-12 {
            font-size: 12px;
        }

        .pointer {
            cursor: pointer;
        }

        .flex-space-between {
            display: flex;
            justify-content: space-between;
        }

        .scroll-y {
            height: 100%;
            overflow-y: scroll;
        }

        .warning-flair {
            background-color: rgb(251, 216, 216);
            color: rgb(164, 21, 21);
            border-radius: 5px;
            padding-left: 5px;
            padding-right: 5px;
        }

        .team-details .title {
            color: #4ab7ed
        }


        .success-flair {
            background-color: rgb(224, 251, 216);
            color: rgb(16, 197, 0);
            border-radius: 5px;
            padding-left: 5px;
            padding-right: 5px;
        }

        .pending-flair {
            background-color: rgb(216, 232, 251);
            color: rgb(21, 35, 164);
            border-radius: 5px;
            padding-left: 5px;
            padding-right: 5px;
        }

        .not-sent-flair {
            background-color: rgb(232, 232, 232);
            color: rgb(0, 0, 0);
            border-radius: 5px;
            padding-left: 5px;
            padding-right: 5px;
        }

        .center-div {
            display: flex;
            justify-content: center;
            height: 100%;
            top: 25;
            left: 25;
            transform: translate(0, 50%);
        }

        .t-c {
            height: 100%;
        }




        .chat .chat-history {
            padding: 20px;
            width: 80%;
            border-bottom: 2px solid #fff
        }

        .chat .chat-history ul {
            padding: 0
        }

        .chat .chat-history ul li {
            list-style: none;
            margin-bottom: 30px
        }

        .chat .chat-history ul li:last-child {
            margin-bottom: 0px
        }

        .chat .chat-history .message-data {
            margin-bottom: 15px
        }

        .chat .chat-history .message-data img {
            border-radius: 40px;
            width: 40px
        }

        .chat .chat-history .message-data-time {
            color: #434651;
            padding-left: 6px
        }

        .chat .chat-history .message {
            color: #444;
            padding: 18px 20px;
            line-height: 26px;
            font-size: 16px;
            border-radius: 7px;
            display: inline-block;
            position: relative
        }

        .chat .chat-history .message:after {
            bottom: 100%;
            left: 7%;
            border: solid transparent;
            content: " ";
            height: 0;
            width: 0;
            position: absolute;
            pointer-events: none;
            border-bottom-color: #fff;
            border-width: 10px;
            margin-left: -10px
        }

        .chat .chat-history .my-message {
            background: #efefef
        }

        .chat .chat-history .my-message:after {
            bottom: 100%;
            left: 30px;
            border: solid transparent;
            content: " ";
            height: 0;
            width: 0;
            position: absolute;
            pointer-events: none;
            border-bottom-color: #efefef;
            border-width: 10px;
            margin-left: -10px
        }

        .chat .chat-history .other-message {
            background: #e8f1f3;
            text-align: right
        }

        .chat .chat-history .other-message:after {
            border-bottom-color: #e8f1f3;
            left: 93%
        }

        .chat .chat-message {
            padding: 20px
        }

        .online,
        .offline,
        .me {
            margin-right: 2px;
            font-size: 8px;
            vertical-align: middle
        }

        .online {
            color: #86c541
        }

        .offline {
            color: #e47297
        }

        .me {
            color: #1d8ecd
        }

        .float-right {
            float: right
        }

        .clearfix:after {
            visibility: hidden;
            display: block;
            font-size: 0;
            content: " ";
            clear: both;
            height: 0
        }

        @media only screen and (max-width: 767px) {
            .chat-app .people-list {
                height: 465px;
                width: 100%;
                overflow-x: auto;
                background: #fff;
                left: -400px;
                display: none
            }

            .chat-app .people-list.open {
                left: 0
            }

            .chat-app .chat {
                margin: 0
            }

            .chat-app .chat .chat-header {
                border-radius: 0.55rem 0.55rem 0 0
            }

            .chat-app .chat-history {
                height: 300px;
                overflow-x: auto
            }
        }

        @media only screen and (min-width: 768px) and (max-width: 992px) {
            .chat-app .chat-list {
                height: 650px;
                overflow-x: auto
            }

            .chat-app .chat-history {
                height: 600px;
                overflow-x: auto
            }
        }

        @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 1) {
            .chat-app .chat-list {
                height: 480px;
                overflow-x: auto
            }

            .chat-app .chat-history {
                height: calc(100vh - 350px);
                overflow-x: auto
            }
        }

        /* pop up for profile */
        .chat-header {
            position: relative;
        }

        .popup {
            display: none;
            /* Hidden by default */
            position: absolute;
            top: 100%;
            /* Position it below the button */
            right: 0;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            padding: 10px;
            width: 200px;
            z-index: 1;
            /* Ensure the pop-up appears on top */
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        #pm-back-platforms:hover {
            color: #f70d0d;
        }

        .chat-header.active .popup {
            display: block;
            /* Show the pop-up when container has 'active' class */
        }

        .user-details {
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin: 10px;
            background-color: rgb(41, 41, 41);

        }

        .inactive-gen-link {
            color: rgb(178, 178, 178);
        }

        .mild-title {
            color: #4ab7ed;
        }

        .mild-desc {
            color: #5e5002;
        }

        .input-decor {
            border: 1px solid #ced4da;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
            background-color: white;
            font-size: 15px;
            padding-left: 15px
        }

        .bg-dark-left {
            background-color: #06041c;
        }

        .container-right {
            margin-left: 20px;
            margin-right: 20px;
        }

        /* General Container */
        .step-container {
            display: flex;
            flex-direction: row;
            gap: 1rem;
            margin: 20px auto;
            font-family: Arial, sans-serif;
        }

        /* Individual Steps */
        .step {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Step Number Circle */
        .step-number {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-weight: bold;
            color: #fff;
        }

        /* Step Text */
        .step-text {
            font-size: 16px;
            margin: 0;
        }

        /* Step States */
        .completed .step-number {
            background-color: green;
            /* Completed steps */
        }

        .current .step-number {
            background-color: grey;
            /* Current step */
        }

        .upcoming .step-number {
            background-color: lightgrey;
            /* Upcoming steps */
        }

        .post-btn-proceed-disabled {
            background-color: grey;
            cursor: default;
            color: white;
            border: none;
        }

        .post-btn-proceed-disabled:hover {
            background-color: grey;
            cursor: default;
            color: white;
            border: none;
        }

        .unselectedPlatform {
            display: none;
        }

        .custom-modal {
            width: 70vw;
            /* Set the desired width */
            max-width: none;
            /* Prevent Bootstrap's default max-width from overriding */
        }

        .custom-modal .modal-content {
            /* Set the desired height */
            display: flex;
            flex-direction: column;
        }

        .custom-modal .modal-body {
            flex: 1;
            /* Allow the body to expand and take available space */
            overflow-y: auto;
            /* Enable scrolling for content overflow */
        }
    </style>

</head>

<body>
    <!-- Modal -->
    <div class="modal fade" id="confirmModalCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalTitle">Link account?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="confirmModalBody"></p>
                    <!-- You have not linked an Instagram account -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_create_team_add_member %}
                    <button type="button" id="confirmModalAction" class="btn btn-primary">Change Account</button>
                    {% else %}
                    <button type="button" id="forbiddenModalAction" class="btn btn-primary"
                        tooltip="Forbidden. Contact admin" flow="down" style="cursor: not-allowed;">Change
                        Account</button>
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- Delete Post-Comment Modal -->
    <div class="modal fade" id="confirmModalPostDeleteCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle">
        <div class="modal-dialog modal-dialog-centered " role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalPostDelete">Delete?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="">Confirm delete of posts from all channels.</p>
                    <!-- You have not linked an Instagram account -->
                </div>
                <div class="modal-footer">
                    <span style="color: rgb(255, 1, 1);" class="font-12"> This action cannot be undone</span>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_create_team_add_member %}
                    <button type="button" id="confirmModalDeletePostAction" class="btn btn-danger">Delete</button>
                    {% else %}
                    <button type="button" id="forbiddenModalDeletePostAction" class="btn btn-primary"
                        tooltip="Forbidden. Contact admin" flow="down" style="cursor: not-allowed;">Delete</button>
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- Delete uploaded team file Modal -->
    <div class="modal fade" id="confirmModalTeamFileDeleteCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle">
        <div class="modal-dialog modal-dialog-centered " role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalTeamFileDelete">Delete?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="">Confirm permanent delete of this file .</p>
                    <!-- You have not linked an Instagram account -->
                </div>
                <div class="modal-footer">
                    <span style="color: rgb(255, 1, 1);" class="font-12"> This action cannot be undone</span>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="confirmModalDeleteTeamFileAction" class="btn btn-danger">Delete</button>
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- upload business doc Modal -->
    <div class="modal fade" id="confirmModalUploadDocCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle">
        <div class="modal-dialog modal-dialog-centered " role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalPostDelete">Confirm Upload</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="">The content of the file will be used to train
                        and update the chatbot model </p>
                    <!-- You have not linked an Instagram account -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_modify_ai_assistant %}
                    <button type="button" id="confirmModalUploadDocAction" class="btn btn-danger">Upload</button>
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- Post Modal -->
    <div class="modal fade" id="confirmModalPostCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered " role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalPostTitle">Link account?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="confirmModalPostBody"></p>
                    <!-- You have not linked an Instagram account -->
                </div>
                <div class="modal-footer">
                    <span style="color: gray;" class="font-12">Ensure your content adheres to the rules of the platform
                        and/or the respective community </span>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_create_team_add_member %}
                    <button type="button" id="confirmModalPostAction" class="btn btn-primary">Change Account</button>
                    {% else %}
                    <button type="button" id="forbiddenModalPostAction" class="btn btn-primary"
                        tooltip="Forbidden. Contact admin" flow="down" style="cursor: not-allowed;">Change
                        Account</button>
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- reddit flair modal -->
    <div class="modal fade" id="confirmModalFlairCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalFlairTitle">Edit Flairs</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- <p id="confirmModalFlairBody"> -->
                    {% for fr in flair_results %}
                    <div style="display: flex;gap: 20px;width: 100%;margin-bottom: 10px;">
                        <div>
                            <strong>r/{{ fr.sub_r }}</strong>
                            <p style="font-size: 11px;">
                                {% if fr.optional %}Optional{% else %} Required {% endif %}
                            </p>
                        </div>
                        <select class="form-select subreddit-flairs" aria-label="Default select example"
                            id="{{ fr.sub_r }}">

                            <option selected value="none" data-id="{{ fr.optional }}">Select flair</option>
                            {% for fl in fr.flairs_r %}
                            <option value="{{ fl.id }}" {% if fl.selected %} selected {% endif %}>{{ fl.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    {% endfor %}
                    <!-- You have not linked an Instagram account -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="confirmModalFlairAction" class="btn btn-primary">Set Flair(s)</button>
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- subreddit info modal -->
    <div class="modal fade" id="confirmModalSubInfoCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <!-- modal-dialog modal-dialog-centered -->
        <div class="modal-dialog modal-dialog-centered custom-modal " role="document">
            <div class="modal-content" style="width: 100%;">
                <div class="modal-body">
                    <!-- <p id="confirmModalFlairBody"> -->
                    {% for si in sub_info %}
                    <div style="display: flex;gap: 20px;width: 100%;margin-bottom: 10px;">
                        <div style="width: 20%;">
                            <h4>r/{{ si.name }}</h4>
                            <p><span class="font-12">Subscribers:</span> <strong>{{ si.subscribers }}</strong></p>
                            {% if si.isBanned %}<p>You are banned </p>{% endif %}
                        </div>
                        <div style="width: 80%;">
                            <p>Rules</p>
                            <ol style="max-height: 300px;overflow-y: auto;overflow-x: hidden;list-style-type: none;">
                                {% for rl in si.rules %}
                                <li><strong>{{ rl.rule }}.</strong> {{ rl.description }}</li>
                                {% endfor %}
                            </ol>

                        </div>
                    </div>
                    <hr>
                    {% endfor %}
                    <!-- You have not linked an Instagram account -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- instagram modal -->
    <div class="modal fade" id="instagramModalCenter" tabindex="-1" role="dialog" aria-labelledby="instagramModalCenter"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    {% if instagram.linked %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Change Instagram account?</h5>
                    {% else %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Link Instagram account?</h5>
                    {% endif %}
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% if instagram.linked %}
                <div class="modal-body">
                    <div style="display: flex;gap: 20px;">
                        <div
                            style="width: 100px;height: 100px;border-radius: 100px;background-color: #3f1572;display: flex;justify-content: center;align-items: center;">
                            <img src="{{ instagram.profile }}" alt="Instagram profile picture"
                                style="max-width: 100%;height: 100%;padding: 10px;border-radius: 100px;">
                        </div>
                        <div>
                            <p>Username: {{ instagram.username }}</p>
                            <p> Linked on: {{ instagram.date_linked }}</p>
                            <div style="display: flex;justify-content: space-between;">
                                {% if instagram.active %}
                                <p>
                                    <span
                                        style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-check"></i> Active
                                    </span>
                                </p>
                                {% else %}
                                <p>
                                    <span
                                        style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-cancel"></i> Inactive
                                    </span>
                                </p>
                                {% endif %}
                                <div class="form-check form-switch" style="margin-left: 20px;">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="flexSwitchCheckChecked" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked">Activate</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% else %}
                <div class="modal-body">
                    <p>No linked Instagram account. Clink Link Account below to connect to the business
                        Instagram account </p>
                    <p style="font-size: 12px;">Important: Instagram account must be business/creator and be linked to a
                        facebook page <a href="#">Learn more </a></p>

                    <!-- You have not linked an Instagram account -->
                </div>
                {% endif %}
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_link_unlink_account %}

                    {% if instagram.linked %}
                    <a href="{{ instagram.link_url }}"><button type="button" class="btn btn-primary">Change
                            Account</button></a>
                    {% else %}
                    <a href="{{ instagram.link_url }}"><button type="button" class="btn btn-primary">Link
                            Account</button></a>
                    {% endif %}

                    {% else %}
                    {% if instagram.linked %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Link Account</button>
                    {% endif %}
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->
                </div>
            </div>
        </div>
    </div>
    <!-- Facebook modal -->
    <div class="modal fade" id="facebookModalCenter" tabindex="-1" role="dialog" aria-labelledby="facebookModalCenter"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    {% if facebook.linked %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Change Facebook account?</h5>
                    {% else %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Link Facebook account?</h5>
                    {% endif %}
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% if facebook.linked %}
                <div class="modal-body">
                    <div style="display: flex;gap: 20px;">
                        <div
                            style="width: 100px;height: 100px;border-radius: 100px;background-color: #3f1572;display: flex;justify-content: center;align-items: center;">
                            <img src="{{ facebook.profile }}" alt="Facebook profile picture"
                                style="max-width: 100%;height: 100%;padding: 10px;border-radius: 100px;">
                        </div>
                        <div>
                            <p>Username: {{ facebook.username }}</p>
                            <p> Linked on: {{ facebook.date_linked }}</p>
                            <div style="display: flex;justify-content: space-between;">
                                {% if facebook.active %}
                                <p>
                                    <span
                                        style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-check"></i> Active
                                    </span>
                                </p>
                                {% else %}
                                <p>
                                    <span
                                        style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-cancel"></i> Inactive
                                    </span>
                                </p>
                                {% endif %}
                                <div class="form-check form-switch" style="margin-left: 20px;">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="flexSwitchCheckChecked" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked">Activate</label>
                                </div>

                            </div>

                        </div>

                    </div>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% else %}
                <div class="modal-body">
                    <p>No linked Facebook account. Clink Link Account below to connect to the business
                        Facebook account </p>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% endif %}
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_link_unlink_account %}
                    {% if facebook.linked %}
                    <button type="button" class="btn btn-primary">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary">Link Account</button>
                    {% endif %}

                    {% else %}
                    {% if facebook.linked %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Link Account</button>
                    {% endif %}
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- Twitter modal -->
    <div class="modal fade" id="twitterModalCenter" tabindex="-1" role="dialog" aria-labelledby="twitterModalCenter"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    {% if twitter.linked %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Change X (Twitter) account?</h5>
                    {% else %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Link X (Twitter) account?</h5>
                    {% endif %}
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% if twitter.linked %}
                <div class="modal-body">
                    <div style="display: flex;gap: 20px;">
                        <div
                            style="width: 100px;height: 100px;border-radius: 100px;background-color: #3f1572;display: flex;justify-content: center;align-items: center;">
                            <img src="{{ twitter.profile }}" alt="Twitter profile picture"
                                style="max-width: 100%;height: 100%;padding: 10px;border-radius: 100px;">
                        </div>
                        <div>
                            <p>Username: {{ twitter.username }}</p>
                            <p> Linked on: {{ twitter.date_linked }}</p>
                            <div style="display: flex;justify-content: space-between;">
                                {% if twitter.active %}
                                <p>
                                    <span
                                        style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-check"></i> Active
                                    </span>
                                </p>
                                {% else %}
                                <p>
                                    <span
                                        style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-cancel"></i> Inactive
                                    </span>
                                </p>
                                {% endif %}
                                <div class="form-check form-switch" style="margin-left: 20px;">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="flexSwitchCheckChecked" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked">Activate</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% else %}
                <div class="modal-body">
                    <p>No linked X (Twitter) account. Clink Link Account below to connect to the business
                        X (Twitter) account </p>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% endif %}
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_link_unlink_account %}
                    {% if twitter.linked %}
                    <button type="button" class="btn btn-primary">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary">Link Account</button>
                    {% endif %}

                    {% else %}
                    {% if twitter.linked %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Link Account</button>
                    {% endif %}
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- Youtube modal -->
    <div class="modal fade" id="youtubeModalCenter" tabindex="-1" role="dialog" aria-labelledby="youtubeModalCenter"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    {% if twitter.linked %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Change Youtube account?</h5>
                    {% else %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Link Youtube account?</h5>
                    {% endif %}
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% if youtube.linked %}
                <div class="modal-body">
                    <div style="display: flex;gap: 20px;">
                        <div
                            style="width: 100px;height: 100px;border-radius: 100px;background-color: #3f1572;display: flex;justify-content: center;align-items: center;">
                            <img src="{{ youtube.profile }}" alt="Youtube profile picture"
                                style="max-width: 100%;height: 100%;padding: 10px;border-radius: 100px;">
                        </div>
                        <div>
                            <p>Username: {{ youtube.username }}</p>
                            <p> Linked on: {{ youtube.date_linked }}</p>
                            <div style="display: flex;justify-content: space-between;">
                                {% if youtube.active %}
                                <p>
                                    <span
                                        style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-check"></i> Active
                                    </span>
                                </p>
                                {% else %}
                                <p>
                                    <span
                                        style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-cancel"></i> Inactive
                                    </span>
                                </p>
                                {% endif %}
                                <div class="form-check form-switch" style="margin-left: 20px;">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="flexSwitchCheckChecked" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked">Activate</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% else %}
                <div class="modal-body">
                    <p>No linked Youtube account. Clink Link Account below to connect to the business
                        Youtube account </p>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% endif %}
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_link_unlink_account %}
                    {% if youtube.linked %}
                    <button type="button" class="btn btn-primary">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary">Link Account</button>
                    {% endif %}

                    {% else %}
                    {% if youtube.linked %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Link Account</button>
                    {% endif %}
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- tiktok modal -->
    <div class="modal fade" id="tiktokModalCenter" tabindex="-1" role="dialog" aria-labelledby="tiktokModalCenter"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    {% if tiktok.linked %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Change TikTok account?</h5>
                    {% else %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Link TikTok account?</h5>
                    {% endif %}
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% if tiktok.linked %}
                <div class="modal-body">
                    <div style="display: flex;gap: 20px;">
                        <div
                            style="width: 100px;height: 100px;border-radius: 100px;background-color: #3f1572;display: flex;justify-content: center;align-items: center;">
                            <img src="{{ tiktok.profile }}" alt="tiktok profile picture"
                                style="max-width: 100%;height: 100%;padding: 10px;border-radius: 100px;">
                        </div>
                        <div>
                            <p>Username: {{ tiktok.username }}</p>
                            <p> Linked on: {{ tiktok.date_linked }}</p>
                            <div style="display: flex;justify-content: space-between;">
                                {% if tiktok.active %}
                                <p>
                                    <span
                                        style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-check"></i> Active
                                    </span>
                                </p>
                                {% else %}
                                <p>
                                    <span
                                        style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-cancel"></i> Inactive
                                    </span>
                                </p>
                                {% endif %}
                                <div class="form-check form-switch" style="margin-left: 20px;">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="flexSwitchCheckChecked" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked">Activate</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% else %}
                <div class="modal-body">
                    <p>No linked TikTok account. Clink Link Account below to connect to the business
                        TikTok account </p>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% endif %}
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_link_unlink_account %}
                    {% if tiktok.linked %}
                    <button type="button" class="btn btn-primary">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary">Link Account</button>
                    {% endif %}

                    {% else %}
                    {% if tiktok.linked %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Link Account</button>
                    {% endif %}
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>
    <!-- Google Business Profile modal -->
    <div class="modal fade" id="googleModalCenter" tabindex="-1" role="dialog" aria-labelledby="googleModalCenter"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    {% if google.linked %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Change account?</h5>
                    {% else %}
                    <h5 class="modal-title" id="exampleModalLongTitle">Link account?</h5>
                    {% endif %}
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% if google.linked %}
                <div class="modal-body">
                    <div style="display: flex;gap: 20px;">
                        <div
                            style="width: 100px;height: 100px;border-radius: 100px;background-color: #3f1572;display: flex;justify-content: center;align-items: center;">
                            <img src="{{ google.profile }}" alt="Reddit profile picture"
                                style="max-width: 100%;height: 100%;padding: 10px;border-radius: 100px;">
                        </div>
                        <div>
                            <p>Username: {{ google.username }}</p>
                            <p> Linked on: {{ google.date_linked }}</p>
                            <div style="display: flex;justify-content: space-between;">
                                {% if google.active %}
                                <p>
                                    <span
                                        style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-check"></i> Active
                                    </span>
                                </p>
                                {% else %}
                                <p>
                                    <span
                                        style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                        <i class="fa fa-cancel"></i> Inactive
                                    </span>
                                </p>
                                {% endif %}
                                <div class="form-check form-switch" style="margin-left: 20px;">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="flexSwitchCheckChecked" checked>
                                    <label class="form-check-label" for="flexSwitchCheckChecked">Activate</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% else %}
                <div class="modal-body">
                    <p>No linked account. Clink Link Account below to connect to the business
                        account </p>
                    <!-- You have not linked an Instagram account -->
                </div>
                {% endif %}
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% if user_permissions.can_link_unlink_account %}
                    {% if google.linked %}
                    <button type="button" class="btn btn-primary">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary">Link Account</button>
                    {% endif %}

                    {% else %}
                    {% if google.linked %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Change Account</button>
                    {% else %}
                    <button type="button" class="btn btn-primary" style="cursor: not-allowed;">Link Account</button>
                    {% endif %}
                    {% endif %}
                    <!-- <button type="button" class="btn btn-danger">Temporary Disable</button> -->

                </div>
            </div>
        </div>
    </div>

    <p style="color:white" id="firebase-user" hidden>{{firebase_user}}</p>

    <div style="display:flex;justify-content:space-between;width:100%;height:100%">
        <div class="sidebar bg-dark-left " style="height:100%;position: relative;z-index:2;display:none">
            <div class="sidebar-content"
                style="justify-content:space-between;display:flex;flex-direction: column;height:100%;padding-bottom:20px">
                <div class="bg-dark-left" style="width:100%;">
                    <div class="conversation bx-shadow bg-dark-left"
                        style="position:fixed;top:0;padding:10px;z-index:5;width:100%;margin:0;display: flex;gap: 5px;">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#ff9900">
                            <path
                                d="M120-120v-80l80-80v160h-80Zm160 0v-240l80-80v320h-80Zm160 0v-320l80 81v239h-80Zm160 0v-239l80-80v319h-80Zm160 0v-400l80-80v480h-80ZM120-327v-113l280-280 160 160 280-280v113L560-447 400-607 120-327Z" />
                        </svg>
                        <p class="conversation-text">
                            <span style="font-size:18px;text-align:center;color: #ffffff;">Insightlyze</span>
                        </p>
                    </div>
                </div>

                <div class="conversation-list">
                    <div class="conversation">
                        <ul id="quick-links" style="list-style-type: none;cursor:pointer;margin-top:50px;top:20"
                            class="quick_links">
                            <li id="business-prof" class="active" data-target="#business-page"><i class="fa fa-home"
                                    style="font-size:15px;width:30px"></i> Dashboard
                            </li>
                            <!-- <li id="scan-web" data-target="#analytics-content"><i class="fa fa-bar-chart"
                                    style="font-size:15px;width:30px"></i> Analytics</li> -->
                            <li id="reviews" data-target="#reviews-content"><i class="fa fa-comments-o"
                                    style="font-size:15px;width:30px"></i> Reviews</li>
                            <li id="drafts" data-target="#drafts-content"><i class="fa fa-inbox"
                                    style="font-size:15px;width:30px"></i> PM</li>
                            <li id="post-btn" data-target="#post-content"><i class="fa fa-share"
                                    style="font-size:15px;width:30px"></i> Posts</li>
                            <li id="teams-btn" data-target="#teams-content"><i class="fa fa-group"
                                    style="font-size:15px;width:30px"></i> Teams</li>

                            <li id="help" data-target="#help-content"><i class="fa fa-question"
                                    style="font-size:15px;width:30px"></i> Help</li>

                            <li id="integration" data-target="#integration-content"><i class="fa fa-book"
                                    style="font-size:15px;width:30px"></i> Integration Guide</li>
                            <li id="requests" data-target="#feature-request"><i class="fa fa-bug"
                                    style="font-size:15px;width:30px"></i> Issues & Requests</li>
                        </ul>
                    </div>
                </div>
                <button class="new-conversation-btn-left" data-target="#create-post-content" id="create-post">
                    Create Post
                </button>
                <div style="padding:10px">
                    <hr>
                    <div style="display:flex;">
                        <div style="width:80px;">
                            <p>Role</p>
                        </div>
                        <p id="request-count">{{ member_profile.role }}</p>
                    </div>
                    {% if member_profile.has_admin_priviledges %}
                    <div style="display:flex;">
                        <div style="width:80px;">
                            <p>Plan</p>
                        </div>
                        {% if company_subs.subscription_active %}
                        <p style="color:rgb(53, 248, 95)">Active </p>
                        {% elif not company_subs.free_trial_expired %}
                        <p style="color:rgb(53, 248, 95)">Free trial </p>
                        {% else %}
                        <p style="color:rgba(246, 22, 22, 1)">Expired </p>
                        {% endif %}

                    </div>

                    <div style="width:100%;display:flex;justify-content:center;align-items:center">
                        <div style="width:100%;display:flex;justify-content:center;align-items:center">

                            <a class="btn-solid-sm" href="{% url 'landing' %}#pricing">UPGRADE</a>
                        </div>

                    </div>

                    <div>
                        {% if company_subs.free_trial_expired %}
                        <p style="font-size:12px">Your free trial has ended. Upgrade now to continue using Insightlyze.
                        </p>

                        {% else %}
                        <p style="font-size:12px">Free trial <strong>ends in {{ company_subs.free_trial_expiry }}
                                days</strong>
                        </p>
                        {% endif %}
                    </div>
                    {% endif %}
                    <hr>
                    <div>
                        <a href="{% url 'logout' %} ">Log out<i class="fas fa-sign-out"
                                style="margin-left:10px"></i></a>

                    </div>
                </div>
            </div>
        </div>
        <div class=" light-mode" id="" style="z-index:3;">
            <!-- request feature/bug fix -->
            <div class="chat-content" id="feature-request" style="display:none;width: 100%;">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>Request new feature/ Report a problem
                        </h4>
                    </div>
                    <div class="user-details" tooltip="Me" flow="down">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>

                </div>
                <div style="display:block;">

                    <div class="company-account-info container-right" id="feature-reqs">
                        <div id="feature-request-placeholder">
                            <div style="display:flex;justify-content:space-between;">
                                <div class="section-fun-fact">
                                    <p>Help Us Improve  Suggest a Feature or Report an Issue!</p>
                                </div>

                                <div style="height:20px">
                                    <a class="btn-solid-sm" id="request-btn" href="#" style="padding:8px">Create New
                                        <i class="fa fa-plus"></i></a>
                                    <a class="btn-solid-sm" id="cancel-request-btn" href="#"
                                        style="padding:8px;display:none">Discard
                                        & Close <i class="fa fa-close"></i></a>
                                </div>
                            </div>
                        </div>
                        <section id="requests-section" class="games" style="overflow-y:scroll;height:90%;display:block">
                            {% if freqs|length > 0 %}
                            <div class="container" id="all-feature-requests">
                                <ul class="game-list">
                                    {% for f in freqs %}
                                    <li class="game" style="font-size:15px">
                                        {% if f.feature_introduced %}
                                        <div class="game-likes" data-id="{{ f.id }}">
                                            <p class="req-id" hidden>{{ f.id }}</p>
                                            <span class="game-like-icon"><i class="fa fa-check" aria-hidden="true"
                                                    style="color:lime"></i></span>
                                            <span class="game-like-count">F</span>
                                        </div>
                                        {% else %}
                                        <div class="game-likes" data-id="{{ f.id }}">
                                            <p class="req-id" hidden>{{ f.id }}</p>
                                            <!-- <span class="game-like-icon"><span
                                                    class="material-symbols-outlined">arrow_drop_up</span></span> -->
                                            <span class="game-like-count">B</span>
                                        </div>

                                        {% endif %}
                                        <div class="game-content">
                                            <h6 class="game-title">
                                                <a>{{ f.title }}</a>
                                            </h6>
                                            <span class="game-tagline" style="font-size:12px">{{ f.details }}</span>
                                            <!--                            <span class="game-time-ago" data-bind="text: created">6 mins</span>-->
                                        </div>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% else %}
                            <div style="display:flex;justify-content:center;margin-top:20%">
                                <p>There are no feature requests at the moment. Create one now</p>
                            </div>
                            {% endif %}
                        </section>
                        <div id="request-form"
                            style="display:none;justify-content:center;width:100%;height:100%;margin-top:5%">
                            <form style="width:70%" id="request-input-form">
                                <div class="form-group">
                                    <input type="text" class="form-control-input" id="request-title"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                        placeholder="Title" required>
                                </div>
                                <div class="form-group">
                                    <textarea class="form-control-textarea" placeholder="Tell us more"
                                        id="request-details"
                                        style="border: 1px solid #ced4da;border-radius:4px;width:100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                        required></textarea>
                                </div>
                                <div style="text-align:center;font-size:12px;align-items:center">
                                    <p id="error-mess-request" style="color:red"></p>
                                    <p id="suc-mess-request" style="color:lime"></p>
                                </div>
                                <div class="form-group" style="text-align:center;font-size:20px;align-items:center">
                                    <a class=" btn-solid-sm" style="cursor:pointer" id="submit-request-form"
                                        href="#">Submit</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- business page -->
            <div class="chat-content" id="business-page" style="display:block;width:100%">
                <div class="chat-header " style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>

                        </h4>
                    </div>
                    <div class="user-details" tooltip="Me" flow="down">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>

                </div>

                <div id="intro-placeholder" style="display:block;background-color: white;padding: 15px;">
                    <div class="">
                        <div class="business-analytics">
                            <div style="display: flex;justify-content: center;overflow-y: scroll;">
                                <div>
                                    <div class="business-pfp"
                                        style="background-color: rgb(250, 250, 250);display: flex;justify-content: center;">
                                        <img class="business-pfp" src="{{ company_profile }}" alt="business profile"
                                            style="height: 150px;width: 150px;;padding: 10px;border-radius: 150px;">
                                    </div>
                                    <div style="display: flex;justify-content: space-between;margin-right: 10px;">
                                        <span style="width: 5px;"></span>
                                        {% if user_permissions.can_update_profile %}
                                        <p style="font-size: 12px;color: black;cursor: pointer;padding: 0;margin: 0;"
                                            id="edit-profile">
                                            Edit <i class="fa fa-edit"></i></p>
                                        {% else %}
                                        <p
                                            style="font-size: 12px;color: black;cursor: not-allowed;padding: 0;margin: 0;">
                                            Edit <i class="fa fa-edit"></i></p>
                                        {% endif %}
                                    </div>
                                    <div class="contact-info">
                                        <div class="business-name" style="text-align: center;">
                                            <!-- Button trigger modal -->
                                            <h4>{{ company_name }} </h4>
                                            <p>{{ company_category }}</p>
                                            <p>{{ company_address.address}}, {{company_address.city}}
                                                {{company_address.state}} {{company_address.country }}</p>
                                            {% if company_socials.website %}<p style="cursor: pointer;">
                                                <i class="fa fa-globe" aria-hidden="true"></i>
                                                <a href="{{company_socials.website}}" target="_blank"> visit website
                                                    <i class="fa fa-external-link"></i>
                                                </a>
                                            </p>{% else %}<p class="inactive-socials " style="font-size: 12px;"><i
                                                    class="fa fa-globe inactive-socials"></i>Add Website</p>{% endif %}
                                            <div style="display: flex;justify-content: space-around;width: 90%;">

                                                {% if company_socials.instagram %}<p><a
                                                        href="{{ company_socials.instagram }}" target="_blank"><i
                                                            class="fa fa-instagram "></i></a></p>
                                                {% else %}<i class="fa fa-instagram inactive-socials"></i>
                                                {% endif %}

                                                {% if company_socials.twitter %}<p><a
                                                        href="{{ company_socials.twitter }}" target="_blank"><i
                                                            class="fa fa-twitter" aria-hidden="true"></i></a></p>
                                                {% else %}<i class="fa fa-twitter inactive-socials"></i>
                                                {% endif %}

                                                {% if company_socials.facebook %}<p><a
                                                        href="{{ company_socials.facebook }}" target="_blank"><i
                                                            class="fa fa-facebook-f"></i></a></p>
                                                {% else %}<i class="fa fa-facebook-f inactive-socials"></i>
                                                {% endif %}

                                                {% if company_socials.email %}<p><a
                                                        href="mailto:{{ company_socials.email }}" target="_blank"><i
                                                            class="fa fa-envelope" aria-hidden="true"></i></a></p>
                                                {% else %}<i class="fa fa-envelope inactive-socials"
                                                    aria-hidden="true"></i>
                                                {% endif %}

                                                {% if company_socials.linkedin %}<p><a
                                                        href="{{ company_socials.linkedin }}" target="_blank"><i
                                                            class="fa fa-linkedin" aria-hidden="true"></i></a></p>
                                                {% else %}<i class="fa fa-linkedin inactive-socials"></i>
                                                {% endif %}

                                                {% if company_socials.phone_number %}<p><a
                                                        href="tel:{{ company_socials.phone_number }}" target="_blank"><i
                                                            class="fa fa-phone" aria-hidden="true"></i></a></p>
                                                {% else %}<i class="fa fa-phone inactive-socials"></i>
                                                {% endif %}

                                                {% if company_socials.tiktok %}<p><a href="{{ company_socials.tiktok }}"
                                                        target="_blank"><i class="fa fa-tiktok"
                                                            aria-hidden="true"></i></a></p>
                                                {% else %}<i class="fa fa-tiktok inactive-socials"
                                                    aria-hidden="true"></i>
                                                {% endif %}

                                                {% if company_socials.youtube %}<p><a
                                                        href="{{ company_socials.youtube }}" target="_blank"><i
                                                            class="fa fa-youtube-play" aria-hidden="true"></i></a></p>
                                                {% else %}<i class="fa fa-youtube-play inactive-socials"></i>
                                                {% endif %}

                                                {% if company_socials.whatsapp %}<p><a
                                                        href="{{ company_socials.whatsapp }}" target="_blank"><i
                                                            class="fa fa-whatsapp" aria-hidden="true"></i></a></p>
                                                {% else %}<i class="fa fa-whatsapp inactive-socials"></i>
                                                {% endif %}

                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div style="padding: 10px;overflow-y: scroll;">
                                <div class="specific-account" style="display: none;">
                                    <div class="instagram-accounts">
                                        <div style="display: flex; justify-content: space-between;">
                                            <img src="{% static 'images/instagram_logo.png' %}"
                                                style="height: 30px;width: 30px;border-radius: 10px;" alt="">

                                            <div style="display: flex;gap: 15px;">
                                                <p class="hover-active"> <i class="fa fa-plus"> </i> Add</p>
                                                <p class="hover-active"><i class="fa fa-caret-left"></i> Back</p>
                                            </div>
                                        </div>
                                        <hr class="zero-padding-margin">
                                        <p>Instagram Accounts</p>
                                    </div>
                                </div>
                                <div class="business-info" style="display: block;">
                                    <div class="">
                                        <h6>Social Channels</h6>
                                        <div class="">
                                            <!-- INSTAGRAM -->
                                            <div class="">
                                                <div style="height:30px;display: flex;gap: 10px;">
                                                    <img src="{% static 'images/instagram_logo.png' %}"
                                                        style="height: 20px;width: 20px;border-radius: 10px;" alt="">
                                                    <p style="font-size: 12px;">Instagram</p>
                                                </div>
                                                <div>
                                                    {% if instagram.linked %}

                                                    <div style="display: flex;gap: 30px;">
                                                        <div style="width: 30%;">
                                                            <p class="zero-padding-margin font-12 ">
                                                                {{ facebook.display_name }}</p>

                                                            <img src="{{ instagram.profile }}"
                                                                style="height: 40px;width: 40px;border-radius: 10px;"
                                                                alt="">
                                                            <p class="zero-padding-margin font-12">
                                                                {{ instagram.username }}</p>
                                                        </div>
                                                        <div>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">
                                                                Followers: {{ instagram.follower_count }}</p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">Growth:
                                                                {% if growth > 0 %}
                                                                <span class="success-flair">{{ instagram.growth
                                                                    }}</span>
                                                                {% elif growth < 0 %} <span class="warning-flair">
                                                                    {{ facebook.growth }}</span>
                                                                    {% else %}
                                                                    <span class="not-sent-flair">
                                                                        {{ facebook.growth}}</span>
                                                                    {% endif %}
                                                            </p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">Likes:
                                                                {{ instagram.like_count }}</span> </p>
                                                        </div>
                                                    </div>
                                                    {% else %}
                                                    <p
                                                        style="display: flex;justify-content: center;align-items: center;">
                                                        No
                                                        linked account</p>
                                                    <p class="font-12 zero-padding-margin">Account must be linked to a
                                                        Facebook page <a href="#">Learn more</a> </p>
                                                    {% endif %}

                                                </div>
                                                <div style="height:40px;display: flex;justify-content: space-between;">

                                                    {% if instagram.linked %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;"
                                                        href="{{ instagram.link_url }}"><button type="button"
                                                            class="btn btn-primary"
                                                            style="font-size: 12px;">Change</button></a>

                                                    {% else %}
                                                    <a style="margin-right: 10px;"><button type="button"
                                                            class="btn btn-primary" tooltip="Forbidden. Contact admin"
                                                            flow="down"
                                                            style="cursor: not-allowed;font-size: 12px;">Change</button></a>

                                                    {% endif %}
                                                    {% else %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Not Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;"
                                                        href="{{ instagram.link_url }}"><button type="button"
                                                            class="btn btn-primary"
                                                            style="font-size: 12px;">Link</button></a>
                                                    {% else %}
                                                    <button type="button" class="btn btn-primary"
                                                        tooltip="Forbidden. Contact admin" flow="down"
                                                        style="cursor: not-allowed;font-size: 12px;">Link</button>
                                                    {% endif %}
                                                    {% endif %}
                                                </div>

                                            </div>
                                            <hr>

                                            <!-- FACEBOOK -->
                                            <div class="">
                                                <div style="height:30px;display: flex;gap: 10px;">
                                                    <img src="{% static 'images/facebook_logo.png' %}"
                                                        style="height: 20px;width: 20px;border-radius: 10px;" alt="">
                                                    <p style="font-size: 12px;">Facebook</p>
                                                </div>
                                                <div>
                                                    {% if facebook.linked %}
                                                    <div style="display: flex;gap: 30px;">
                                                        <div style="width: 30%;">
                                                            <p class="zero-padding-margin font-12 ">
                                                                {{ facebook.display_name }}</p>

                                                            <img src="{{ facebook.profile }}"
                                                                style="height: 40px;width: 40px;border-radius: 10px;"
                                                                alt="">
                                                            <p class="zero-padding-margin font-12">
                                                                {{ facebook.username }}</p>
                                                        </div>
                                                        <div>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">
                                                                Followers: {{ facebook.follower_count }}</p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">Growth:
                                                                {% if growth > 0 %}
                                                                <span class="success-flair">{{ facebook.growth }}</span>
                                                                {% elif growth < 0 %} <span class="warning-flair">
                                                                    {{ facebook.growth }}</span>
                                                                    {% else %}
                                                                    <span class="not-sent-flair">
                                                                        {{ facebook.growth}}</span>
                                                                    {% endif %}
                                                            </p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">Likes:
                                                                {{ facebook.like_count }}</span> </p>
                                                        </div>
                                                    </div>

                                                    {% else %}
                                                    <p
                                                        style="display: flex;justify-content: center;align-items: center;">
                                                        No
                                                        linked account</p>
                                                    <p class="font-12">Link to a Facebook page. <a href="#">Learn
                                                            More</a> </p>
                                                    {% endif %}

                                                </div>
                                                <div style="height:30px;display: flex;justify-content: space-between;">

                                                    {% if facebook.linked %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;"
                                                        href="{{ facebook.link_url }}"><button type="button"
                                                            class="btn btn-primary"
                                                            style="font-size: 12px;">Change</button></a>
                                                    {% else %}
                                                    <button type="button" class="btn btn-primary"
                                                        tooltip="Forbidden. Contact admin" flow="down"
                                                        style="cursor: not-allowed;font-size: 12px;">Change</button>
                                                    {% endif %}

                                                    {% else %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Not Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;"
                                                        href="{{ facebook.link_url }}"><button type="button"
                                                            class="btn btn-primary"
                                                            style="font-size: 12px;">Link</button></a>
                                                    {% else %}
                                                    <button type="button" class="btn btn-primary"
                                                        tooltip="Forbidden. Contact admin" flow="down"
                                                        style="cursor: not-allowed;font-size: 12px;">Link</button>
                                                    {% endif %}
                                                    {% endif %}
                                                </div>

                                            </div>
                                            <hr>

                                            <!-- TIKTOK -->
                                            <div class="">
                                                <div style="height:30px;display: flex;gap: 10px;">
                                                    <img src="{% static 'images/tiktok_logo.png' %}"
                                                        style="height: 20px;width: 20px;border-radius: 10px;" alt="">
                                                    <p style="font-size: 12px;">TikTok</p>
                                                </div>
                                                <div>
                                                    {% if tiktok.linked %}
                                                    <div style="display: flex;gap: 30px;">
                                                        <div style="width: 30%;">
                                                            <img src="{{ tiktok.profile }}"
                                                                style="height: 40px;width: 40px;border-radius: 10px;"
                                                                alt="">
                                                            <p class="zero-padding-margin font-12">
                                                                {{ tiktok.display_name }}
                                                            </p>
                                                        </div>
                                                        <div>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">
                                                                Followers: {{ tiktok.follower_count }}</p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">Growth:
                                                                {% if growth > 0 %}
                                                                <span class="success-flair">{{ tiktok.growth }}</span>
                                                                {% elif growth < 0 %} <span class="warning-flair">
                                                                    {{ tiktok.growth }}</span>
                                                                    {% else %}
                                                                    <span class="not-sent-flair">
                                                                        {{ tiktok.growth }}</span>
                                                                    {% endif %}
                                                            </p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">
                                                                Likes: {{ tiktok.like_count }}</span> </p>
                                                        </div>
                                                    </div>
                                                    {% else %}
                                                    <p
                                                        style="display: flex;justify-content: center;align-items: center;">
                                                        No
                                                        linked account</p>
                                                    <p class="font-12 zero-padding-margin">Link to your TikTok Business
                                                        Account. <a href="#">Learn More</a> </p>

                                                    {% endif %}

                                                </div>
                                                <div style="height:30px;display: flex;justify-content: space-between;">

                                                    {% if tiktok.linked %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;" href="{{ tiktok.link_url }}"><button
                                                            type="button" class="btn btn-primary"
                                                            style="font-size: 12px;">Change</button></a>
                                                    {% else %}
                                                    <button type="button" class="btn btn-primary"
                                                        tooltip="Forbidden. Contact admin" flow="down"
                                                        style="cursor: not-allowed;font-size: 12px;">Change</button>
                                                    {% endif %}

                                                    {% else %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Not Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;" href="{{ tiktok.link_url }}"><button
                                                            type="button" class="btn btn-primary"
                                                            style="font-size: 12px;">Link</button></a>
                                                    {% else %}
                                                    <button type="button" class="btn btn-primary"
                                                        tooltip="Forbidden. Contact admin" flow="down"
                                                        style="cursor: not-allowed;font-size: 12px;">Link</button>
                                                    {% endif %}
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <hr>

                                            <!-- REDDIT  -->
                                            <div class="">
                                                <div style="height:30px;display: flex;gap: 10px;">
                                                    <img src="{% static 'images/reddit_logo.png' %}"
                                                        style="height: 20px;width: 20px;border-radius: 10px;" alt="">
                                                    <p style="font-size: 12px;">Reddit </p>
                                                </div>
                                                <div>
                                                    {% if reddit.linked %}
                                                    <div style="display: flex;gap: 30px;">
                                                        <div style="width: 30%;">
                                                            <p class="zero-padding-margin font-12 ">
                                                                {{ facebook.display_name }}</p>

                                                            <img src="{{ reddit.profile }}"
                                                                style="height: 40px;width: 40px;border-radius: 10px;"
                                                                alt="">
                                                            <p class="zero-padding-margin font-12">
                                                                {{ reddit.username }}</p>
                                                        </div>
                                                        <div>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">
                                                                Comment Karma: {{ reddit.comment_karma }}</p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">Growth:
                                                                {% if growth > 0 %}
                                                                <span class="success-flair">
                                                                    {{ instagram.growth }}</span>
                                                                {% elif growth < 0 %} <span class="warning-flair">
                                                                    {{ facebook.growth }}</span>
                                                                    {% else %}
                                                                    <span class="not-sent-flair">
                                                                        {{ facebook.growth}}</span>
                                                                    {% endif %}
                                                            </p>
                                                            <p class="font-12 zero-padding-margin"
                                                                style="text-align: start;">Links Karma:
                                                                {{ reddit.link_karma }}</span> </p>
                                                        </div>
                                                    </div>
                                                    {% else %}
                                                    <p
                                                        style="display: flex;justify-content: center;align-items: center;">
                                                        No
                                                        linked account</p>
                                                    <p class="font-12 ">Link to a Reddit account. <a href="#">Learn
                                                            More</a> </p>

                                                    {% endif %}

                                                </div>
                                                <div style="height:30px;display: flex;justify-content: space-between;">

                                                    {% if reddit.linked %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;" href="{{ reddit.link_url }}"><button
                                                            type="button" class="btn btn-primary"
                                                            style="font-size: 12px;">Change</button></a>

                                                    {% else %}
                                                    <button type="button" class="btn btn-primary"
                                                        tooltip="Forbidden. Contact admin" flow="up"
                                                        style="cursor: not-allowed;font-size: 12px;">Change</button>
                                                    {% endif %}

                                                    {% else %}
                                                    <div>
                                                        <span
                                                            style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size:10px;margin-left:5px;margin-right: 15px;">
                                                            Not Linked
                                                        </span>
                                                    </div>
                                                    {% if user_permissions.can_link_unlink_account %}
                                                    <a style="margin-right: 10px;" href="{{ reddit.link_url }}"><button
                                                            type="button" class="btn btn-primary"
                                                            style="font-size: 12px;">Link</button></a>
                                                    {% else %}
                                                    <button type="button" class="btn btn-primary"
                                                        tooltip="Forbidden. Contact admin" flow="up"
                                                        style="cursor: not-allowed;font-size: 12px;">Link</button>
                                                    {% endif %}
                                                    {% endif %}
                                                </div>

                                            </div>
                                            <hr>

                                        </div>


                                        <div style="display: none;">
                                            <span id="instagram_profile"></span>
                                            <span id="instagram_username"></span>
                                            <span id="instagram_"></span>


                                        </div>
                                    </div>
                                    <hr>
                                    <div class="business-about">
                                        <h6>About </h6>
                                        {% if company_about %}
                                        <p id="company_about" style="padding: 10px; white-space: pre-wrap;">
                                            {{ company_about|safe }}
                                        </p>
                                        {% else %}
                                        <p style="cursor: default;align-items: center;padding: 10px;">Click the edit
                                            icon to
                                            edit
                                            about </p>
                                        {% endif %}

                                    </div>
                                    <hr>
                                    <div class="business-about">
                                        <h6>Review wall <i class="fa fa-cog " style="margin-left: 20px;"></i></h6>
                                        <ul style="list-style-type: none;">
                                            <li>
                                                <div class="form-check form-switch" style="margin-left: 20px;">
                                                    <input class="form-check-input" {% if company_show_page %} checked
                                                        {% endif %} data-set_up="show_page" id="review_page_btn"
                                                        type="checkbox" role="switch">
                                                    <label class="form-check-label" for="review_page_btn">
                                                        Show review page
                                                    </label>
                                                </div>
                                            </li>
                                            <!-- <li>
                                                <div class="form-check form-switch" style="margin-left: 20px;">
                                                    <input class="form-check-input" type="checkbox" role="switch"
                                                        id="flexSwitchCheckChecked">
                                                    <label class="form-check-label" for="flexSwitchCheckChecked"
                                                        tooltip="Respond to comments using your AI Knowledgebase"
                                                        flow="down">Auto respond to queries</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check form-switch" style="margin-left: 20px;">
                                                    <input class="form-check-input" type="checkbox" role="switch"
                                                        id="flexSwitchCheckChecked">
                                                    <label class="form-check-label" for="flexSwitchCheckChecked"
                                                        tooltip="Show your customers that you appreciate their comments"
                                                        flow="down">Auto like positive comments</label>
                                                </div>
                                            </li> -->

                                            <li style="margin-top: 10px;">
                                                <p tooltip="Click to  copy your page link" flow="down">Link: <span
                                                        id="review_link" style="margin-right: 10px;cursor: pointer;">
                                                        {{ review_wall_link }}</span><a href="{{ review_wall_link }}"
                                                        target="_blank"><i class="fa fa-external-link"></i></a></p>
                                            </li>
                                        </ul>


                                    </div>
                                    <hr>
                                    <div class="business-about ">
                                        <!-- can modify the AI Assistant -->
                                        {% if user_permissions.can_modify_ai_assistant %}
                                        <h6>AI Assistant </h6>
                                        <div style="margin-left: 15px;">
                                            <div style="display: flex;justify-content: space-between;">
                                                <div class="form-check form-switch" style="margin-left: 20px;">
                                                    <input class="form-check-input" {% if company_enable_ai %} checked
                                                        {% endif %} type="checkbox" role="switch" id="ai_enable_btn"
                                                        data-set_up="enable_ai">
                                                    <label class="form-check-label" for="ai_enable_btn">Enabled</label>
                                                </div>
                                                <div class="form-group" onclick="openChatBox()"
                                                    style="text-align:center;font-size:20px;align-items:center;margin-top:10px;margin-bottom:20px">
                                                    <a class=" btn-solid-sm" style="cursor:pointer" id="test-chatbot"
                                                        href="#">Test

                                                    </a>
                                                </div>


                                            </div>
                                            <div style="padding-left: 10px;">
                                                <p style="font-size: 12px;padding: 0;margin: 0;"> Upload your business
                                                    documents below (Knowledge base) to
                                                    train the AI Assistant, enabling it to understand and respond
                                                    effectively to
                                                    inquiries related to your business.</p>
                                                <a style="font-size: 12px;color: blue;" href="">Learn more</a>
                                                <!-- <div class="input-group mb-3">
                                                    <div class="custom-file" style="padding: 0;">
                                                        <input type="file" class="custom-file-input"
                                                            id="train-doc-file" multiple>
                                                        <label class="custom-file-label" for="train-doc-file">Choose
                                                            files</label>
                                                    </div>
                                                </div> -->
                                                <div style="width: 90%;margin: auto;">

                                                    <div class="mb-3">
                                                        <label for="train-doc-file" class="form-label">Upload
                                                            Document</label>
                                                        <input class="form-control" type="file" id="train-doc-file"
                                                            accept=".pdf" onchange="validateFile();">
                                                        <div class="form-check form-switch"
                                                            style="margin-left: 20px;margin-top: 15px;">
                                                            <input class="form-check-input" type="checkbox"
                                                                role="switch" id="replace_info">
                                                            <label class="form-check-label" for="replace_info">Replace
                                                                existing knowledge base</label>
                                                        </div>
                                                        <small class="font-12">This will permanently erase your
                                                            previously created knowledge base </small>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group"
                                                style="text-align:center;font-size:20px;align-items:center;margin-top:30px;margin-bottom:20px">
                                                <a class=" btn-solid-sm" style="cursor:pointer" id="upload-train"
                                                    href="#">Upload
                                                    &
                                                    Train
                                                </a>
                                            </div>
                                        </div>
                                        <!-- cannot modify the AI Assistant -->
                                        {% else %}
                                        <h6 style="color: rgba(128, 128, 128, 0.712);">AI Assistant </h6>
                                        <div style="margin-left: 15px;">
                                            <div style="display: flex;justify-content: space-between;">
                                                <div class="form-check form-switch" style="margin-left: 20px;">
                                                    <input class="form-check-input" type="checkbox" role="switch"
                                                        id="flexSwitchCheckChecked" checked disabled>
                                                    <label class="form-check-label"
                                                        for="flexSwitchCheckChecked">Enabled</label>
                                                </div>
                                                <div class="form-group" onclick="openChatBox()"
                                                    style="text-align:center;font-size:20px;align-items:center;margin-top:10px;margin-bottom:20px">
                                                    <a class=" btn-solid-sm" style="cursor:pointer" id="test-chatbot"
                                                        href="#">Test

                                                    </a>
                                                </div>
                                            </div>
                                            <p style="color:  rgba(128, 128, 128, 0.712);"> last Updated :12-oct-2024
                                            </p>
                                            <div style="padding-left: 10px;">
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;color: rgba(128, 128, 128, 0.712);;">
                                                    Please upload your business
                                                    documents below (Knowledge base) to
                                                    train the AI Assistant, enabling it to understand and respond
                                                    effectively to
                                                    inquiries related to your business.</p>
                                                <a style="font-size: 12px;color: rgba(0, 0, 255, 0.308);">Learn
                                                    more</a>
                                                <div class="input-group mb-3">

                                                    <div class="custom-file" style="padding: 0;">
                                                        <input type="file" class="custom-file-input"
                                                            id="inputGroupFile01" multiple disabled>
                                                        <label class="custom-file-label" for="inputGroupFile01"
                                                            style="color: rgba(128, 128, 128, 0.712);">Choose
                                                            files</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group"
                                                style="text-align:center;font-size:20px;align-items:center;margin-top:30px;margin-bottom:20px;">
                                                <a class=" btn-solid-sm"
                                                    style="cursor:not-allowed;background-color:  rgba(128, 128, 128, 0.712);border: none;">Upload
                                                    &
                                                    Train
                                                </a>
                                            </div>
                                            <p style="font-size: 12px;color: rgb(252, 100, 100);align-items: center;">
                                                Note:
                                                You do not have permission to modify the AI Assistant. Contact your
                                                administrator for help</p>
                                        </div>
                                        {% endif %}


                                        <!-- chat container -->
                                        <div id="chatPage" class="chat_page" style="background-color: black;">
                                            <!-- <button onclick="openChatBox()" class="chat_button">
                                                <i id="chatOpen" class="fas fa-comments"></i>
                                            </button> -->


                                            <div id="chatbar" class="chat_box animated fadeInUp">
                                                <div class="chat_box_header"
                                                    style="display: flex;justify-content: space-between;padding: 10;">
                                                    <p style="padding: 0;margin: 0;">Test the AI Assistant</p>
                                                    <i class="fa fa-times " onclick="openChatBox()"></i>
                                                </div>
                                                <div id="chatBody" class="chat_box_body">

                                                </div>
                                                <div style="align-items: center;background-color: rgb(201, 201, 201);">

                                                    <div style="display: flex;margin: 0;padding: 0;">

                                                        <input type="text" id="MsgInput" placeholder="Enter Message">
                                                        <button class="btn btn-primary" onclick="send()"
                                                            id="send-btn"><i class="fab fa-telegram-plane"></i></button>
                                                    </div>
                                                    <hr style="padding: 0;margin: 0;">
                                                    <p
                                                        style="font-size: 12px;margin: 0;display: flex;justify-content: center;">
                                                        Powered by Insightlyze</p>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- editing the business page  -->
            <div class="chat-content" id="edit-business-page" style="display:none;width: 100%;">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>

                        </h4>
                    </div>
                    <div class="user-details">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>

                </div>

                <div style="display:block">
                    <div class="company-account-info">
                        <div id="report-form"
                            style="display:flex;justify-content:center;width:100%;height:100%;margin-top:20px;overflow-y: scroll;">
                            <div style="width:60%">
                                <div style="display:flex;justify-content:space-between;">
                                    <div class="section-fun-fact">
                                        <p>Edit Profile </p>
                                        <hr>
                                    </div>
                                    <div style="height:20px;">
                                        <a class="btn-solid-sm" id="cancel-edit" href="#"
                                            style="cursor:pointer;display:block;padding:8px">Discard
                                            & Close
                                            <i class="fa fa-close"></i></a>
                                    </div>
                                </div>

                                <form style="width:100%;overflow-y:scroll;height:80%" id="report-input-form"
                                    method="post" enctype="multipart/form-data">
                                    <!-- profile -->
                                    <div class="form-group">

                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="">
                                                    <div class="business-pfp"
                                                        style="border-radius: 200px;display: flex;justify-content: center;align-items: center;">
                                                        <img class="business-pfp" src="{{ company_profile }}"
                                                            alt="business profile"
                                                            style="padding: 10px;width: 200px;height: 200px;border-radius: 200px;"
                                                            id="image-container">
                                                    </div>
                                                </span>
                                            </div>
                                            <div class="custom-file">
                                                <input type="file" class="custom-file-input" id="image-input"
                                                    accept="image/*">
                                                <label class="custom-file-label" for="image-input">Choose
                                                    file</label>
                                            </div>
                                        </div>
                                    </div>
                                    <!--  email link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-envelope" style="padding-right: 5px;"></i>
                                                    Email</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small" id="update-email"
                                                placeholder="Ex. example@company.com"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.email }}">
                                        </div>
                                    </div>
                                    <!--  phone number link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-phone " style="padding-right: 5px;"></i>
                                                    Phone Number</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small" id="update-phone"
                                                placeholder="Ex +1 xxx" aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.phone_number }}">
                                        </div>
                                    </div>
                                    <!--  website link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-globe" style="padding-right: 5px;"></i>
                                                    Website</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                id="update-website" placeholder="Ex. https://www.example.com"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.website }}">
                                        </div>
                                    </div>
                                    <div class="form-group" style="font-size: 15px;">
                                        <textarea class="form-control-textarea"
                                            placeholder="Business full description. Include your services and other relevent details. feel free to use HTML tags"
                                            id="update-about"
                                            style="border: 1px solid #ced4da;border-radius:4px;width:100%;box-sizing: border-box;background-color: white;"
                                            id="report-details">{{ company_about|safe }}</textarea>
                                    </div>
                                    <p>Optional but recommended social links</p>
                                    <!--  Linkedin link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-linkedin " style="padding-right: 5px;"></i>
                                                    LinkedIn</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                aria-describedby="inputGroup-sizing-sm" id="update-linkedin"
                                                placeholder="enter your LinkedIn business profile link"
                                                value="{{ company_socials.linkedin }}">
                                        </div>
                                    </div>
                                    <!--  Whatsapp link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-whatsapp " style="padding-right: 5px;"></i>
                                                    Whatsapp</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                id="update-whatsapp" placeholder="enter your WhatsApp business number"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.whatsapp }}">
                                        </div>
                                    </div>
                                    <!-- Instagram profile link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-instagram " style="padding-right: 5px;"></i>
                                                    Instagram</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                id="update-instagram"
                                                placeholder="enter your Instagram business profile link"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.instagram }}">
                                        </div>
                                    </div>
                                    <!--  facebook link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-facebook-f " style="padding-right: 5px;"></i>
                                                    Facebook</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                placeholder="enter your Facebook page link" id="update-facebook"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.facebook }}">
                                        </div>
                                    </div>
                                    <!--  twitter link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-twitter " style="padding-right: 5px;"></i>
                                                    X(Twitter)</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                placeholder="enter your X business profile link" id="update-twitter"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.twitter }}">
                                        </div>
                                    </div>
                                    <!--  youtube link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-youtube-play " style="padding-right: 5px;"></i>
                                                    Youtube</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                id="update-youtube" placeholder="enter your Youtube channel link"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.youtube }}">
                                        </div>
                                    </div>

                                    <!--  tiktok link -->
                                    <div class="form-group">
                                        <div class="input-group input-group-sm mb-3 form-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="inputGroup-sizing-sm"><i
                                                        class="fa fa-tiktok " style="padding-right: 5px;"></i>
                                                    TikTok</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Small"
                                                id="update-tiktok" placeholder="enter your Tiktok profile link"
                                                aria-describedby="inputGroup-sizing-sm"
                                                value="{{ company_socials.tiktok }}">
                                        </div>
                                    </div>


                                    <div style="text-align:center;font-size:12px;align-items:center">
                                        <p id="error-mess-report" style="color:red"></p>
                                        <p id="suc-mess-report" style="color:lime"></p>
                                    </div>
                                    <div style="width:60%;display:flex;justify-content: space-between;">

                                        <div class="form-group"
                                            style="text-align:center;font-size:20px;align-items:center;margin-top:10px;margin-bottom:20px">
                                            <a class=" btn-solid-sm" style="cursor:pointer" id="update-profile"
                                                href="#">Update
                                                Profile</a>
                                        </div>

                                    </div>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <!-- Analytics -->
            <div class="chat-content" id="analytics-content" style="display:none;width: 100%;">
                <div class="chat-header">
                    <div class="logo-container">
                        <h4>Analytics
                        </h4>
                    </div>
                    <div class="user-details">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>

                </div>
                <div style="display:block">
                    <div class=""
                        style="width:70%;align-items:center;margin-left:10%;margin-right:20%;margin-top:20px;text-align:center">
                    </div>
                    <div class="company-account-info">

                    </div>
                </div>

            </div>
            <!-- reviews -->
            <div class="chat-content" id="reviews-content" style="display:none;width: 100%;">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>
                            Reviews
                        </h4>
                    </div>

                    <div style="display: flex;justify-content: space-between;align-items: center;gap: 10px">
                        <div style="width: 300px;height: 50px;">
                            <select id="filters" name="filters" data-name="filters" data-placeholder="Filter" multiple
                                data-multi-select>
                                <!-- <option value="reviews">Reviews</option>
                                <option value="mentions">Tags/Mentions</option> -->
                                <option value="positive">Positive</option>
                                <option value="negative">Negative</option>
                                <option value="neutral">Neutral</option>
                                <option value="published">Published</option>
                                <option value="not-published">Not Published</option>
                                <option value="ig">Instagram</option>
                                <option value="fb">Facebook</option>
                                <!-- <option value="x">X</option>
                                <option value="youtube">Youtube</option> -->
                                <option value="tiktok">TikTok</option>
                                <option value="reddit">Reddit</option>
                                <!-- <option value="google">Google Business </option> -->

                            </select>
                        </div>
                        <div style="margin-top: 10px;margin-right:20px">
                            <div style="cursor: pointer;border-radius: 10px;" class="bx-shadow" id="apply-filters">
                                <p style="padding: 5px;">Apply</p>
                            </div>
                            <div id="apply-loading" style="border-radius: 10px;padding: 10px;display: none;"
                                class="bx-shadow">
                                <i class="fa fa-spinner fa-spin"></i>

                            </div>
                        </div>
                        <!-- <div style="margin-right: 10px;">

                            <a class="btn-solid-sm" href="#">AI Responses </a>
                        </div> -->
                    </div>


                </div>
                <div class="company-account-info container-right" id="company-reviews">
                    <div class="container-right" style="padding:10px;overflow-y: scroll;height: 95%;width: 90%;">
                        <div class="review-list">
                            {% if not reviews %}
                            <div style="display: flex;justify-content: center;margin-top: 25%;">
                                <p>No Reviews Yet.</p>
                            </div>
                            {% else %}
                            {% for r in reviews %}
                            <div class="post-comment-box" style="padding: 10px; ">
                                <div
                                    style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(219, 219, 219);padding: 10px;margin-bottom: 10px;">
                                    <div class="d-flex flex-start align-items-center">
                                        <img class="rounded-circle shadow-1-strong me-3"
                                            src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp"
                                            alt="avatar" width="60" height="60" />
                                        <div>
                                            <h6 class="fw-bold text-primary mb-1">{{ r.commentor }}</h6>
                                            <p class="text-muted small mb-0">
                                                {{ r.date_commented }}
                                            </p>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-4 pb-2">
                                        {{ r.content }}
                                    </p>
                                    <div class="thisparent"
                                        style="display: flex;justify-content: space-between;font-size: 12px;width: 80%;gap: 10px">
                                        {% if r.positive %}
                                        <p style="font-size: 12px;padding: 0;margin: 0;color: rgb(21, 164, 116);"><i
                                                class="fa fa-check" aria-hidden="true"></i> Positive</p>
                                        {% elif r.negative %}
                                        <p style="font-size: 12px;padding: 0;margin: 0;color: rgb(164, 21, 21);"><i
                                                class="fa fa-cancel" aria-hidden="true"></i> Negative</p>
                                        {% elif r.neutral %}
                                        <p style="font-size: 12px;padding: 0;margin: 0;color: rgb(21, 133, 164);"><i
                                                class="fa fa-circle-notch" aria-hidden="true"></i> Neutral</p>
                                        {% endif %}
                                        <div>
                                            {% if r.platform == 'instagram' %}
                                            <p
                                                style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(251, 216, 251);color: rgb(158, 15, 105);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                <i class="fa fa-instagram"></i> Instagram
                                            </p>
                                            {% elif r.platform == 'tiktok' %}
                                            <p
                                                style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(251, 250, 216);color: rgb(0, 0, 0);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                <i class="fa fa-tiktok"></i> TikTok
                                            </p>
                                            {% elif r.platform == 'reddit' %}
                                            <p
                                                style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(251, 216, 216);color: rgb(255, 2, 2);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                <i class="fa fa-reddit"></i> Reddit
                                            </p>
                                            {% elif r.platform == 'facebook' %}
                                            <p
                                                style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(216, 222, 251);color: rgb(5, 63, 255);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                <i class="fa fa-facebook"></i> Facebook
                                            </p>
                                            {% endif %}



                                        </div>
                                        <!-- <p class="comments-reply-container" style="cursor: pointer;font-size: 12px;">
                                            Reply</span>
                                        </p> -->
                                        <!-- <div>
                                            <p
                                                style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size: 12px;padding: 0;margin: 0;padding-left: 5px;padding-right: 5px;">
                                                Review</p>
                                        </div> -->
                                        <a href="{{ r.link }}" target="_blank"
                                            style="cursor: pointer;font-size: 12px;"><i class="fa fa-external-link"
                                                aria-hidden="true"></i>
                                            Link</a>
                                        {% if r.published %}
                                        <p style="cursor: pointer;font-size: 12px;color: red;" data-pub_id="{{ r.id }}"
                                            class="pub-unpub"><i class="fa fa-trash "></i>
                                            Unpublish
                                        </p>

                                        {% else %}
                                        <p style="cursor: pointer;font-size: 12px;" class="pub-unpub"
                                            data-pub_id="{{ r.id }}"><i class="fa fa-mail-forward "></i>
                                            Publish
                                        </p>
                                        {% endif %}
                                    </div>
                                    <div class="comment-reply-container-box" style="display: none;">
                                        <div class="comment-post-box">
                                            <div data-mdb-input-init class="form-outline" style="width: 90%;">
                                                <textarea class="form-control" id="comment-text-" rows="4"
                                                    style="background: #fff;"
                                                    placeholder="Type your response"></textarea>
                                                <button type="button" data-mdb-button-init data-mdb-ripple-init
                                                    class="btn btn-primary btn-sm "
                                                    style="margin: 10px;">comment</button>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                            {% endif %}
                            <!-- <div class="post-comment-box" style="padding: 10px; ">
                                <div
                                    style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(219, 219, 219);padding: 10px;margin-bottom: 10px;">
                                    <div class="d-flex flex-start align-items-center">
                                        <img class="rounded-circle shadow-1-strong me-3"
                                            src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp"
                                            alt="avatar" width="60" height="60" />
                                        <div>
                                            <h6 class="fw-bold text-primary mb-1">Lily
                                                Coleman</h6>
                                            <p class="text-muted small mb-0">
                                                Shared publicly - Jan 2020
                                            </p>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-4 pb-2">
                                        Lorem ipsum dolor sit amet, consectetur
                                        adipiscing elit, sed do eiusmod
                                        tempor incididunt ut labore et dolore magna
                                        aliqua. Ut enim ad minim veniam,
                                        quis nostrud exercitation ullamco laboris nisi
                                        ut aliquip consequat.
                                    </p>
                                    <div class="thisparent"
                                        style="display: flex;justify-content: space-between;font-size: 12px;width: 80%;gap: 10px">
                                        <p style="font-size: 12px;padding: 0;margin: 0;color: rgb(164, 21, 21);"><i
                                                class="fa fa-cancel" aria-hidden="true"></i> Negative</p>

                                        <div>
                                            <p
                                                style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(251, 216, 243);color: rgb(164, 21, 154);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                Instagram
                                            </p>
                                        </div>
                                        <p class="comments-reply-container" style="cursor: pointer;font-size: 12px;">
                                            Reply</span>
                                        </p>
                                        <div>
                                            <p
                                                style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size: 12px;padding: 0;margin: 0;padding-left: 5px;padding-right: 5px;">
                                                Review</p>
                                        </div>
                                        <p style="cursor: pointer;font-size: 12px;"><i class="fa fa-external-link"
                                                aria-hidden="true"></i>
                                            Link</p>
                                        <p style="cursor: pointer;font-size: 12px;color: red;"><i
                                                class="fa fa-trash"></i>
                                            unpublish
                                        </p>
                                    </div>
                                    <div class="comment-repl-container-box" style="display: none;">
                                        <div class="comment-post-box">
                                            <div data-mdb-input-init class="form-outline" style="width: 90%;">
                                                <textarea class="form-control" id="textAreaExample" rows="4"
                                                    style="background: #fff;"
                                                    placeholder="Type your response"></textarea>
                                                <button type="button" data-mdb-button-init data-mdb-ripple-init
                                                    class="btn btn-primary btn-sm" style="margin: 10px;">Post
                                                    comment</button>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>

                            <div class="post-comment-box" style="padding: 10px; ">
                                <div
                                    style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(219, 219, 219);padding: 10px;margin-bottom: 10px;">
                                    <div class="d-flex flex-start align-items-center">
                                        <img class="rounded-circle shadow-1-strong me-3"
                                            src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp"
                                            alt="avatar" width="60" height="60" />
                                        <div>
                                            <h6 class="fw-bold text-primary mb-1">Lily
                                                Coleman</h6>
                                            <p class="text-muted small mb-0">
                                                Shared publicly - Jan 2020
                                            </p>
                                        </div>
                                    </div>
                                    <p class="mt-3 mb-4 pb-2">
                                        Lorem ipsum dolor sit amet, consectetur
                                        adipiscing elit, sed do eiusmod
                                        tempor incididunt ut labore et dolore magna
                                        aliqua. Ut enim ad minim veniam,
                                        quis nostrud exercitation ullamco laboris nisi
                                        ut aliquip consequat.
                                    </p>
                                    <div class="thisparent"
                                        style="display: flex;justify-content: space-between;font-size: 12px;width: 80%;gap: 10px">
                                        <p style="font-size: 12px;padding: 0;margin: 0;color: rgb(21, 133, 164);"><i
                                                class="fa fa-circle-notch" aria-hidden="true"></i> Neutral</p>

                                        <div>
                                            <p
                                                style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(251, 216, 243);color: rgb(164, 21, 154);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                Instagram
                                            </p>
                                        </div>
                                        <p class="comments-reply-container" style="cursor: pointer;font-size: 12px;">
                                            Reply</span>
                                        </p>
                                        <div>
                                            <p
                                                style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 5px;border-radius:5px ;font-size: 12px;padding: 0;margin: 0;padding-left: 5px;padding-right: 5px;">
                                                Review</p>
                                        </div>
                                        <p style="cursor: pointer;font-size: 12px;"><i class="fa fa-external-link"
                                                aria-hidden="true"></i>
                                            Link</p>
                                        <p style="cursor: pointer;font-size: 12px;"><i class="fa fa-mail-forward"></i>
                                            Publish
                                        </p>
                                    </div>
                                    <div id="comment-reply-container-bo" style="display: none;">
                                        <div class="comment-post-box">
                                            <div data-mdb-input-init class="form-outline" style="width: 90%;">
                                                <textarea class="form-control" id="textAreaExample" rows="4"
                                                    style="background: #fff;"
                                                    placeholder="Type your response"></textarea>
                                                <button type="button" data-mdb-button-init data-mdb-ripple-init
                                                    class="btn btn-primary btn-sm" style="margin: 10px;">Post
                                                    comment</button>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
 -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- teams -->
            <div class="chat-content" id="teams-content" style="display:none">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>
                            Teams
                        </h4>
                    </div>
                    <div
                        style="margin-left:10px;margin-right: 10px;background-color:rgb(248, 247, 247);border-radius: 10px;display: flex;justify-content: space-between;padding:3px;align-items: center;">
                        <span style="width:30px"></span>
                        {% if user_permissions.can_create_team_add_member %}
                        <div>
                            <a class="btn-solid-sm" href="#" id="create-team-btn">Create Team</a>
                        </div>
                        <div>
                            <a class="btn-solid-sm" href="#" id="back-to-teams" style="display: none;">Back to Teams</a>
                        </div>

                        {% else %}

                        <div tooltip="Forbidden. Contact Admin" flow="down">
                            <a class="btn-solid-sm"
                                style="background-color: grey;color: white;border: none;cursor: not-allowed;"
                                href="#">Create Team</a>
                        </div>

                        {% endif %}

                    </div>


                </div>
                <div style="display:block;">

                    <div class="company-account-info container-right">
                        <!-- instructions -->
                        <div style="display: flex;justify-content: center;height: 100%;overflow-y: scroll;"
                            id="available-teams">
                            {% if not all_teams %}
                            <div style="display: block;margin-top: 50px;">
                                <p>You do not have any teams at the moment. To create a team:</p>
                                <ol style="color: grey;">
                                    <p style="font-size: 12px;"><strong>Ensure you are the admin/ have admin privileges
                                            to continue</strong></p>
                                    <li>
                                        <p>Click the <strong>Create Team</strong> button at the top-right of this
                                            container</p>
                                    </li>
                                    <li>
                                        <p>Choose a name for the team and description of teams responsibility</p>
                                    </li>
                                    <li>
                                        <p>Click <strong>finish</strong>. A new team will be created </p>
                                    </li>
                                    <li>
                                        <p>At the left panel within the selected team, click <strong>Generate &
                                                Copy</strong> </p>
                                    </li>
                                    <li>
                                        <p>Fill in the <strong>number of members</strong> you want to join the team as
                                            well as the <strong>privileges</strong> they will have</p>
                                    </li>
                                    <li>
                                        <p>Click <strong>Generate</strong>.</p>
                                    </li>
                                    <li>
                                        <p>Share the invite link with your members.</p>
                                    </li>
                                    <li>
                                        <p> The members will be required to create an account after which they will be
                                            added to the team
                                        </p>
                                    </li>
                                </ol>
                            </div>
                            {% else %}
                            <div style="height: 90%;overflow-y: scroll;display: block;width: 100%;">

                                {% for t in all_teams %}
                                <div class="bx-shadow br-10"
                                    style="display: flex;gap: 10px;border: 1px rgb(211, 211, 211) solid;margin: 20px;margin-left: 30px;margin-right: 30px;">
                                    <div class="team-details" style="width: 30%;padding: 10px;">
                                        <p class="title" style="font-size: 20px;"><strong>{{ t.team_name }}</strong>
                                        </p>
                                        <p>Created {{ t.date_created }}</p>
                                        <p>{{ t.members.count }} members</p>
                                        <hr>
                                        <div class="flex-space-between" style="height: 30px;">

                                            <p class="pointer"
                                                tooltip="Permanently delete this team. All files will be lost"
                                                flow="up"><i class="fa fa-trash"></i><span class="font-12 d-team"
                                                    id="{{t.id}}" data-placeholder="{{t.team_name}}">
                                                    Delete team</span></p>
                                            <button type="button" data-mdb-button-init data-mdb-ripple-init
                                                data-placeholder="{{t.id}}"
                                                class="btn btn-primary btn-sm view-team-btn">View</button>

                                        </div>
                                    </div>
                                    <div style="width: 70%;height: 75px;padding: 10px;">
                                        <p class="font-12 zero-padding-margin">About</p>
                                        <p style="height: 120px;overflow-y: scroll;">
                                            {{ t.team_about }}
                                        </p>
                                    </div>

                                </div>
                                {% endfor %}
                            </div>
                            {% endif %}

                        </div>
                        <!-- create team -->

                        <div id="create-team-form"
                            style="display:none;justify-content:center;width:100%;height:100%;margin-top:5%;">

                            <form style="width:70%;overflow-y:scroll;height:85%;" id="request-input-form"
                                enctype="multipart/form-data">
                                <div class="form-group">
                                    <input type="text" class="form-control-input" id="team-name"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left: 15px;"
                                        placeholder="Team Name" required>
                                </div>
                                <div class="form-group">
                                    <textarea class="form-control-textarea" placeholder="Describe what the team does"
                                        id="team-description"
                                        style="border: 1px solid #ced4da;border-radius:4px;width:100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left: 15px;"
                                        required></textarea>
                                </div>
                                <div style="text-align:center;font-size:12px;align-items:center">
                                    <p id="error-mess-request" style="color:red"></p>
                                    <p id="suc-mess-request" style="color:lime"></p>
                                </div>
                                <div class="form-group" style="text-align:center;font-size:20px;align-items:center">
                                    <a class=" btn-solid-sm" style="cursor:pointer" id="finish-create-form"
                                        href="#">Finish</a>
                                </div>
                            </form>
                        </div>

                        <!-- team workspace -->
                        <div id="team-workspace" style="display: none;gap: 10px;height: 100%;">
                            <div style="height: 100%;width: 30%;">
                                <p style="display: none;" id="team-id">{{ team.id }}</p>
                                <p
                                    style="align-items: center;color: rgb(7, 113, 90);font-weight: bold;font-size: 20px;">
                                    {{ team.team_name}}
                                </p>

                                <div>
                                    <p style="padding: 0;margin: 0;"><span
                                            style="font-size: 12px;padding-right: 5px;">About
                                        </span></p>
                                    <p
                                        style="padding: 0;margin-top:0 ;margin-bottom: 10px;margin-left: 10px;max-height: 100px;overflow-y: scroll;">
                                        {{ team.team_about }}
                                    </p>
                                </div>
                                <div style="display: flex;justify-content: space-between;margin-right: 10px;">
                                    <p><span style="font-size: 12px;padding-right: 5px;">Created </span></p>
                                    <p>{{ team.date_created }}</p>
                                </div>
                                <div class="hover-active-div teams-container"
                                    style="display: flex;justify-content: space-between;margin-right: 10px;"
                                    id="team-members-btn">
                                    <p><span style="font-size: 12px;padding-right: 5px;">Members </span></p>
                                    <p><i class="fa fa-caret-right"></i></p>
                                </div>

                                <p><span style="font-size: 12px;padding-right: 5px;">Invite link </span><span
                                        class="hover-active" id="generate-link-btn">Generate and copy</span></p>
                                <hr>
                                <div style="min-height: 170px;overflow-y: scroll;">
                                    <div class="hover-active-div teams-container active-div" data-target="#teams-chats"
                                        style="display: flex;justify-content: space-between;margin: 5px;padding: 5px;">
                                        <p><i class="fa fa-comments-o"></i> Chat</p>
                                        <p><i class="fa fa-caret-right"></i></p>
                                    </div>
                                    <div class="hover-active-div teams-container" data-target="#teams-files"
                                        style="display: flex;justify-content: space-between;margin: 5px;padding: 5px;">
                                        <p><i class="fa fa-files-o"></i> Files</p>
                                        <p><i class="fa fa-caret-right"></i></p>
                                    </div>
                                    <div class="hover-active-div teams-container" data-target="#teams-announcements"
                                        style="display: flex;justify-content: space-between;margin: 5px;padding: 5px;">
                                        <p><i class="fa fa-bell-o"></i> Announcements</p>
                                        <p><i class="fa fa-caret-right"></i></p>
                                    </div>
                                    <div class="hover-active-div teams-container" data-target="#teams-activity"
                                        style="display: flex;justify-content: space-between;margin: 5px;padding: 5px;">
                                        <p><i class="fa fa-tasks"></i> Activity</p>
                                        <p><i class="fa fa-caret-right"></i></p>
                                    </div>
                                </div>
                            </div>
                            <div style="height: 100%;width: 70%;background-color: #f0f0f06d;" class="bx-shadow">

                                <!-- chat -->
                                {% if team.members.count == 1 %}

                                <div id="teams-chats" class="t-c">
                                    <div class="center-div">
                                        <p>You are the only one here. Add members to start a conversation</p>
                                    </div>
                                </div>
                                {% else %}
                                <div id="teams-chats" class="t-c" style="height: 100%;width: 100%;">
                                    <div class="row clearfix" style="background-color: white;">
                                        <div class="col-lg-12">
                                            <div class=" chat-app">
                                                <div class="chat" id="chat-box">
                                                    {% if not chat_messages %}
                                                    <div class="chat-history "
                                                        style="height: 66vh;background-color: #f0f0f06d;">
                                                        <p class="center-div">No chats. Be the first to send a message
                                                        </p>
                                                    </div>
                                                    {% else %}
                                                    <div class="chat-history">
                                                        <ul id="chat-elem"
                                                            style="height: 66vh;overflow-y: scroll;overflow-x: hidden; ">
                                                            {% for chat_message in chat_messages %}
                                                            {% if not chat_message.me %}
                                                            <li class="clearfix">
                                                                <div class="message-data text-right">
                                                                    <span class="message-data-time">
                                                                        <strong>
                                                                            {{ chat_message.sender.user.username}}
                                                                        </strong>,
                                                                        <!-- <span style="font-size: 12px;"
                                                                        class="success-flair">Supervisor</span> -->
                                                                    </span>
                                                                    {% if not chat_message.dp %}
                                                                    <img src="{% static 'images/default-avatar.avif' %}"
                                                                        alt="avatar">
                                                                    {% else %}
                                                                    <img src="{{ chat_message.dp }}" alt="avatar">
                                                                    {% endif %}

                                                                </div>
                                                                <div class="message other-message float-right"
                                                                    style="padding-bottom: 10px;">
                                                                    {{chat_message.message }}
                                                                    <p class="zero-padding-margin font-12">
                                                                        {{ chat_message.date_sent }}
                                                                    </p>
                                                                </div>
                                                            </li>
                                                            {% else %}
                                                            <li class="clearfix">
                                                                <div class="message-data">
                                                                    <span class="message-data-time"></span>
                                                                </div>
                                                                <div class="message my-message"
                                                                    style="padding-bottom: 10px;">
                                                                    {{ chat_message.message }}
                                                                    <p class="zero-padding-margin font-12">
                                                                        {{ chat_message.date_sent }}
                                                                    </p>

                                                                </div>
                                                            </li>
                                                            {% endif %}
                                                            {% endfor %}
                                                            <div id="lastElement" style="display: none;">Last Item</div>
                                                        </ul>
                                                    </div>
                                                    {% endif %}
                                                    <div class="chat-message zero-padding-margin"
                                                        style="padding: 1px;width: 95%;">
                                                        <div class="input-group mb-0">
                                                            <div class="input-group-prepend" id="send-chat">
                                                                <span class="input-group-text"><i
                                                                        class="fa fa-send"></i></span>
                                                            </div>
                                                            <input type="text" class="form-control" id="input-message"
                                                                style="background-color: #d6d6d688;"
                                                                placeholder="Enter text here...">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                <!-- files -->
                                <div id="teams-files" style="margin: 20px;height: 100%;" class="t-c">
                                    <div class="flex-space-between">
                                        <p style="font-weight: bold;"><i class="fa fa-files-o"></i> Files</p>
                                        <p class="hover-active" id="add-files-btn" style="display: block;"><i
                                                class="fa fa-plus"></i> Add files</p>
                                        <p class="hover-active" id="back-files-btn" style="display:none ;"><i
                                                class="fa fa-caret-left"></i> Back</p>
                                    </div>
                                    <div id="view-team-files" style="display: block;height: 95%;overflow-y: scrol;">
                                        {% if not team_files %}
                                        <div class="center-div">
                                            <p>No files</p>
                                        </div>
                                        {% else %}
                                        <div style="height:90%;overflow-y: scroll;display: block; ">
                                            {% for tf in team_files %}
                                            <div
                                                style="border: 1px rgba(128, 128, 128, 0.491) solid;border-radius: 10px;padding:10px;margin-bottom: 15px;background-color: white;">
                                                <div class="flex-space-between">
                                                    <div style="width: 50%;">
                                                        <!-- <span style="font-size: 12px;">File Name</span><br> -->
                                                        <p class="mild-title"
                                                            style="margin-left: 20px;font-weight: bold;padding: 0;">
                                                            {{ tf.file_name }}
                                                        </p>
                                                    </div>
                                                    <div>
                                                        <!-- <span style="font-size: 12px;">By</span> -->
                                                        <p class="mild-desc"
                                                            style="margin-left: 20px;font-size: 12px;font-weight: bold;">
                                                            {{ tf.creator_id }}
                                                        </p>
                                                    </div>
                                                </div>
                                                <hr class="zero-padding-margin" style="height: 1px;">
                                                <div>
                                                    <p>
                                                        {{ tf.description }}
                                                    </p>
                                                </div>
                                                <div
                                                    style="display: flex;justify-content: space-between;margin-left: 20px;margin-right: 20px;margin-bottom: 5px;width: 80%;">
                                                    <p class="mild-desc"
                                                        style="margin-left: 20px;font-size: 12px;font-weight: bold;">
                                                        {{ tf.date_created }}</p>
                                                    <p class="zero-padding-margin pointer delete-team-file-btn"
                                                        tooltip="Permanently remove" flow="up"
                                                        data-file_id="{{ tf.id }}"><i class="fa fa-trash"></i></p>
                                                    <p class="zero-padding-margin pointer"
                                                        tooltip="Save to local storage" flow="up"><i
                                                            class="fa fa-download"></i></p>
                                                    {% if tf.not_sent or tf.sent_back %}
                                                    <p class="zero-padding-margin pointer"
                                                        tooltip="Send to Queue for review" flow="up"><i
                                                            class="fa fa-share"></i></p>
                                                    <p class="zero-padding-margin pointer" tooltip="Replace file"
                                                        flow="up">
                                                        <i class="fa fa-exchange"></i>
                                                    </p>

                                                    {% endif %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                        </div>

                                        {% endif %}
                                    </div>
                                    <!-- create files -->

                                    <div id="add-files" style="height:100%;width: 100%;">
                                        <form style="overflow-y:scroll;height:90%;margin-left: 5%;margin-right: 5%;"
                                            method="post" enctype="multipart/form-data">
                                            <div class="form-group">
                                                <input type="text" class="form-control-input"
                                                    placeholder="File Name/ Title" id="team-file-title"
                                                    style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                                    required>
                                            </div>
                                            <div class="form-group">
                                                <textarea class="form-control-textarea" placeholder="Attachment notes"
                                                    style="border: 1px solid #ced4da;border-radius:4px;width:100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                                    id="file-attachment-notes" required></textarea>
                                            </div>

                                            <div class="form-group" style="width: 95%;">
                                                <label for="formFile" class="form-label">Upload file</label>
                                                <input class="form-control" type="file" id="team-upload-file">
                                            </div>

                                            <div>
                                                <div class="form-group"
                                                    style="text-align:center;font-size:20px;align-items:center;margin-top:10px;margin-bottom:20px">
                                                    <a href="#" class=" btn-solid-sm" style="cursor:pointer"
                                                        id="file-upload-btn" data-team_id="{{ team_id }}">Done</a>
                                                </div>

                                            </div>
                                        </form>

                                    </div>

                                </div>

                                <!-- show announcements -->
                                <div id="teams-announcements" class="t-c" style="margin: 20px;height: 100%;">
                                    <div class="flex-space-between">
                                        <p style="font-weight: bold;"><i class="fa fa-bell-o"></i> Announcements</p>
                                        <p class="hover-active" id="new-announce-btn" style="display: block;"><i
                                                class="fa fa-plus"></i> Create</p>
                                        <p class="hover-active" id="back-announce-btn" style="display: none;"><i
                                                class="fa fa-caret-left"></i> Back</p>
                                    </div>

                                    <div id="announce-list" style="display: flex;height: 80%;">
                                        {% if not announcements %}
                                        <div class="center-div" style="width: 100%;">
                                            <p style="display: flex;justify-content: center;">There are no
                                                announcements.
                                                Create new</p>
                                        </div>
                                        {% else %}

                                        <div
                                            style="background-color: white;width: 100%;padding: 10px;overflow-y: scroll;height: 100%;">
                                            {% for an in announcemnets %}
                                            <div>
                                                <p><strong class="mild-title">{{ an.title }}</strong></p>
                                                <p>{{ an.content }}</p>
                                                <div style="display: flex;gap: 20px;">
                                                    <p class="font-12">{{ an.date_created }}</p>
                                                    <p class="font-12 mild-desc">{{ an.creator.user.username }}</p>
                                                </div>
                                                <hr class="zero-padding-margin">

                                            </div>
                                            {% endfor %}

                                        </div>
                                        {% endif %}
                                    </div>
                                    <!-- create announcement -->

                                    <div id="announce-create" style="display: none;">
                                        <form
                                            style="overflow-y:scroll;height:100%;margin-left: 5%;margin-right: 5%;margin-top: 20px;"
                                            method="post" enctype="multipart/form-data">
                                            <div class="form-group">
                                                <input type="text" class="form-control-input" placeholder="Title"
                                                    id="announce-title"
                                                    style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                                    required>
                                            </div>
                                            <div class="form-group">
                                                <textarea class="form-control-textarea" placeholder="Content"
                                                    style="border: 1px solid #ced4da;border-radius:4px;width:100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                                    id="announce-content" required></textarea>
                                            </div>

                                            <div>
                                                <div class="form-group"
                                                    style="text-align:center;font-size:20px;align-items:center;margin-top:10px;margin-bottom:20px">
                                                    <a href="#" class=" btn-solid-sm" style="cursor:pointer"
                                                        id="announce-create-btn">Create</a>
                                                </div>

                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <!-- activity -->
                                <div id="teams-activity" class="t-c" style="margin: 20px;height: 100%;">
                                    {% if not activities %}
                                    <div class="center-div">
                                        <p>There are no recent activities</p>
                                    </div>
                                    {% else %}
                                    <div style="background-color: white;height: 90%;overflow-y: scroll;padding: 10px;">
                                        {% for ac in activities %}

                                        <div style="margin-bottom: 15px;">
                                            <div style="display: flex;gap:10px;">
                                                <div style="width: 30%;">
                                                    <p class="font-12 zero-padding-margin mild-title">{{ ac.time_from }}
                                                    </p>

                                                </div>
                                                <p>{{ ac.title|safe }}</p>
                                            </div>
                                            <hr class="zero-padding-margin">
                                        </div>
                                        {% endfor %}

                                    </div>
                                    {% endif %}
                                </div>
                                <!-- members -->
                                <div id="team-members" class="t-c">
                                    <p style="padding: 10px;">Members ({{ team_members|length }})</p>
                                    <div style="height: 80%;overflow-y: scroll;background-color: white;">
                                        {% for tm in team_members %}
                                        <div>
                                            <div style="margin:10px;display: flex;justify-content: space-between;">
                                                <div style="display: flex;">
                                                    {% if tm.profile_pic %}
                                                    {% else %}
                                                    <!-- <div
                                                                style="width: 40px;height: 40px;background-color: #1d8ecd;border-radius: 40px;margin-right: 10px;">
                                                            </div> -->
                                                    <img src="{% static 'images/default-avatar.avif' %}" alt=""
                                                        style="width: 40px;height: 40px;border-radius: 40px;margin-right: 10px;">
                                                    {% endif %}
                                                    <p>{{tm.name}}</p>
                                                </div>

                                                <p style="font-size: 14x;margin-right: 15px;"><i
                                                        class="fa fa-caret-right"></i>
                                                </p>
                                            </div>
                                            <hr style="margin-left: 5%;margin-right: 5%;">
                                        </div>
                                        {% endfor %}


                                    </div>
                                </div>
                                <!-- generate invite link -->
                                <div id="generate-link" class="t-c">
                                    <div style="margin-left: 10%;margin-right: 10%;height: 80%;">
                                        <div style="display:flex;justify-content:space-between;margin: 20px;">
                                            <div class="section-fun-fact">
                                                <p id="link-action-title">Create a new link</p>
                                                <hr>
                                            </div>
                                            <div class="section-fun-fact " style="display: flex;gap: 30px;">
                                                <p class="pointer hover-active " id="new-link" style="display: none;"><i
                                                        class="fa fa-plus"></i>
                                                    New
                                                </p>
                                                <p class="pointer hover-active" style="display: block;" id="all-links">
                                                    <i class="fa fa-link"></i>
                                                    All
                                                </p>

                                            </div>

                                        </div>
                                        <div id="inv-form" style="display: block;height: 100%;">
                                            <form style="width:100%;overflow-y:scroll;height:100%;" method="post"
                                                enctype="multipart/form-data">
                                                <div class="form-group"
                                                    tooltip="Number of members that can join using this link"
                                                    flow="down">
                                                    <input type="number" class="form-control-input"
                                                        placeholder="Number of members" id="link-member-number"
                                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                                        required>
                                                </div>
                                                <div class="form-group">
                                                    <select data-name="link-permissions" name="link-permissions"
                                                        data-placeholder="Select permissions" multiple multiple
                                                        data-multi-select>
                                                        <option value="can_modify_ai_assistant">Can modify the AI
                                                            Assistant
                                                        </option>
                                                        <option value="can_update_profile">Can update business profile
                                                        </option>
                                                        <option value="can_link_unlink_account">Can link and unlink
                                                            social
                                                            channels</option>
                                                        <option value="can_reply_to_reviews">Can reply to reviews
                                                        </option>
                                                        <option value="can_post">Can post content</option>
                                                        <option value="can_create_team_add_member">Can create team and
                                                            add
                                                            members </option>

                                                    </select>
                                                </div>

                                                <div>
                                                    <div class="form-group"
                                                        style="text-align:center;font-size:20px;align-items:center;margin-top:10px;margin-bottom:20px">
                                                        <a href="#" class=" btn-solid-sm" style="cursor:pointer"
                                                            id="generate-link-btn2">Generate
                                                            Link</a>
                                                    </div>

                                                </div>
                                                <div style="display: none;gap: 10px;justify-content: center;"
                                                    id="generated-link">
                                                    <p class="font-12 pointer" style="color: blue;" id="gen-link">
                                                        htpps://www.gdfhdfsdf.cdscds/ygsfer-fdgfdg-dfgfdgfdgf</p>
                                                    <p class="pointer" tooltip="copy link" flow="down"><i
                                                            class="fa fa-copy"></i></p>
                                                </div>
                                                <div style="display: none;justify-content: center;margin-top: 10px;margin-bottom: 10px;"
                                                    id="wait-link-spinner">
                                                    <i class="fa fa-spinner fa-spin"></i>
                                                </div>
                                                <p class="font-12 zero-padding-margin"> Enter the number of members you
                                                    want
                                                    to join your team and select the permissions they will have
                                                </p>
                                                <p class="font-12 zero-padding-margin">Note: The link only accepts the
                                                    given
                                                    number of members,
                                                    you can revoke or generate a new link</p>
                                                <p class="font-12 zero-padding-margin">Share the link to the members</p>
                                            </form>
                                        </div>
                                        <div id="all-inv-links" style="display: none;height: 100%;overflow-y: scroll;">
                                            {% if invite_links %}
                                            {% for l in invite_links %}
                                            <div>
                                                <div style="display: flex;justify-content: space-between;">
                                                    <p
                                                        style="width: 60%;text-overflow: ellipsis;flex-wrap: nowrap;color: rgb(86, 86, 249);">
                                                        {{ l.link }}
                                                    </p>
                                                    <p class="font-12">Created {{ l.date_created }}</p>
                                                </div>
                                                <div style="display: flex;gap: 30px;">
                                                    {% if l.active %}
                                                    <p class="success-flair font-12">Active</p>
                                                    <p class="pointer" tooltip="Copy" flow="up"><i
                                                            class="fa fa-copy"></i>
                                                    </p>
                                                    <p class="pointer" tooltip="Revoke" flow="down"><i
                                                            class="fa fa-cancel"></i></p>
                                                    {% else %}
                                                    <p class="warning-flair font-12">Revoked</p>
                                                    <p style="color: grey;"><i class="fa fa-copy"></i>
                                                    </p>
                                                    <p style="color: grey;"><i class="fa fa-cancel"></i></p>
                                                    {% endif %}
                                                    <p class="pointer" tooltip="members" flow="down">4/5</p>
                                                </div>

                                                <hr class="zero-padding-margin" style="size: 10px;">
                                            </div>
                                            {% endfor %}
                                            {% else %}
                                            <div style="display: flex;justify-content: center;">
                                                <p>You have no active invite links. </p>
                                            </div>

                                            {% endif %}

                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>


                    </div>
                </div>
            </div>

            <!-- drafts -->
            <div class="chat-content" id="drafts-content" style="display:none">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>
                            Private Messages
                        </h4>
                    </div>
                    <div class="user-details">

                    </div>

                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="company-account-info container-right" style="height: 80%;">
                    <div style="margin-left:5px;margin-right:5px;height:100%;padding:10px;">
                        <div class="review-list" style="display: flex;justify-content: center;overflow-y: scroll;"
                            id="pm-container">
                            <div style="width: 90%;">
                                <p class="font-12" style="display: flex;justify-content: center;">Select platform. Note:
                                    TikTok PMs is not supported</p>
                                {% if instagram.linked %}
                                <div style="width: 100%;display: flex;justify-content: space-between;padding: 10px;border-radius: 10px;margin: 10px;"
                                    class="bx-shadow pm-box" data-platform="instagram">
                                    <div style="display: flex;gap: 15px;">
                                        <img src="{{ instagram.profile }}"
                                            style="height: 60px;width: 60px;border-radius: 10px;" alt="">
                                        <div>
                                            <p>{{ instagram.username }}</p>
                                            <div style="display: flex;gap: 10px;">
                                                <img src="{% static 'images/instagram_logo.png' %}"
                                                    style="height: 15px;width: 15px;border-radius: 2px;" alt="">
                                                <p
                                                    style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 0px;border-radius:5px ;font-size:10px;padding-left:5px;padding-right: 5px;height: 25px;">
                                                    Linked
                                                </p>

                                            </div>
                                        </div>

                                    </div>
                                    <p
                                        style="color: #013653;padding: 5px;font-size: 15px;font-weight: bold;align-items: center;height: 100%;">
                                        <i class="fa fa-caret-right"></i>
                                    </p>


                                </div>
                                {% else %}
                                <div style="width: 100%;display: flex;justify-content: space-between;padding: 10px;border-radius: 10px;cursor: not-allowed;margin: 10px;"
                                    class="bx-shadow">
                                    <div style="display: flex;gap: 15px;">
                                        <img src="{% static 'images/instagram_logo.png' %}"
                                            style="height: 60px;width: 60px;border-radius: 10px;" alt="">
                                        <p>No Linked account</p>
                                    </div>

                                </div>
                                {% endif %}
                                {% if facebook.linked %}
                                <div style="width: 100%;display: flex;justify-content: space-between;padding: 10px;border-radius: 10px;margin: 10px;"
                                    class="bx-shadow pm-box" data-platform="facebook">
                                    <div style="display: flex;gap: 15px;">
                                        <img src="{{ facebook.profile }}"
                                            style="height: 60px;width: 60px;border-radius: 10px;" alt="">
                                        <div>
                                            <p>{{ facebook.username }}</p>
                                            <div style="display: flex;gap: 10px;">
                                                <img src="{% static 'images/facebook_logo.png' %}"
                                                    style="height: 15px;width: 15px;border-radius: 2px;" alt="">
                                                <p
                                                    style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 0px;border-radius:5px ;font-size:10px;padding-left:5px;padding-right: 5px;height: 25px;">
                                                    Linked
                                                </p>

                                            </div>
                                        </div>

                                    </div>
                                    <p
                                        style="color: #013653;padding: 5px;font-size: 15px;font-weight: bold;align-items: center;height: 100%;">
                                        <i class="fa fa-caret-right"></i>
                                    </p>


                                </div>
                                {% else %}
                                <div style="width: 100%;display: flex;justify-content: space-between;padding: 10px;border-radius: 10px;cursor: not-allowed;margin: 10px;"
                                    class="bx-shadow">
                                    <div style="display: flex;gap: 15px;">
                                        <img src="{% static 'images/facebook_logo.png' %}"
                                            style="height: 60px;width: 60px;border-radius: 10px;" alt="">
                                        <p>No Linked account</p>
                                    </div>

                                </div>
                                {% endif %}
                                {% if reddit.linked %}
                                <div style="width: 100%;display: flex;justify-content: space-between;padding: 10px;border-radius: 10px;margin: 10px;align-content: center;"
                                    class="bx-shadow pm-box" data-platform="reddit">
                                    <div style="display: flex;gap: 15px;">
                                        <img src="{{ reddit.profile }}"
                                            style="height: 60px;width: 60px;border-radius: 10px;" alt="">
                                        <div>
                                            <p>{{ reddit.username }}</p>
                                            <div style="display: flex;gap: 10px;">
                                                <img src="{% static 'images/reddit_logo.png' %}"
                                                    style="height: 15px;width: 15px;border-radius: 2px;" alt="">
                                                <p
                                                    style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 0px;border-radius:5px ;font-size:10px;padding-left:5px;padding-right: 5px;height: 25px;">
                                                    Linked
                                                </p>

                                            </div>
                                        </div>

                                    </div>
                                    <p
                                        style="color: #013653;padding: 5px;font-size: 15px;font-weight: bold;align-items: center;height: 100%;">
                                        <i class="fa fa-caret-right"></i>
                                    </p>

                                </div>
                                {% else %}
                                <div style="width: 100%;display: flex;justify-content: space-between;padding: 10px;border-radius: 10px;cursor: not-allowed;margin: 10px;"
                                    class="bx-shadow">
                                    <div style="display: flex;gap: 15px;">
                                        <img src="{% static 'images/reddit_logo.png' %}"
                                            style="height: 60px;width: 60px;border-radius: 10px;" alt="">
                                        <p>No Linked account</p>
                                    </div>

                                </div>
                                {% endif %}
                                <div style="width: 100%;display: flex;justify-content: space-between;padding: 10px;border-radius: 10px;margin: 10px;"
                                    class="bx-shadow pm-box" data-platform="chatbot">
                                    <div style="display: flex;gap: 15px;">
                                        <img src="{% static 'images/chat-bot.jpg' %}"
                                            style="height: 60px;width: 60px;border-radius: 10px;" alt="">
                                        <div>
                                            <p>Chatbot</p>
                                            <div style="display: flex;gap: 10px;">
                                                {% if company_enable_ai %}
                                                <p
                                                    style="background-color: rgb(216, 251, 239);color: rgb(8, 192, 131);padding: 0px;border-radius:5px ;font-size:10px;padding-left:5px;padding-right: 5px;height: 25px;">
                                                    Enabled
                                                </p>
                                                {% else %}
                                                <p
                                                    style="background-color: rgb(251, 216, 216);color: rgb(192, 8, 8);padding: 0px;border-radius:5px ;font-size:10px;padding-left:5px;padding-right: 5px;height: 25px;">
                                                    Disabled
                                                </p>
                                                {% endif %}

                                            </div>
                                        </div>

                                    </div>
                                    <p
                                        style="color: #013653;padding: 5px;font-size: 15px;font-weight: bold;align-items: center;height: 100%;">
                                        <i class="fa fa-caret-right"></i>
                                    </p>


                                </div>

                            </div>
                        </div>
                        <div id="pm-inbox"
                            style="display: none;width: 100%;justify-content: space-between;height: 100%;border-radius: 15px;">
                            <div
                                style="width: 30%;background-color: rgb(242, 240, 240);height: 100%;  border-top-left-radius: 10px; border-bottom-left-radius: 10px;">
                                <div style="display: flex; justify-content: space-between;padding: 10px;">
                                    <p style="cursor: pointer;" id="pm-back-platforms"><i class="fa fa-caret-left"></i>
                                        Back</p>
                                    <p><i class="fa fa-facebook" id="pm-icon"></i></p>
                                </div>
                                <div style="overflow-y: scroll;height: 85%;background-color: rgb(225, 236, 231);">
                                    {% if senders|length == 0 %}
                                    {% else %}
                                    {% for s in senders %}
                                    <div class="pm-chat-item" data-conv_id="{{ s.conv_id }}"
                                        data-sender_id="{{ s.sender_id }}" data-platform=" {{ s.platform }}"
                                        style="display: flex; justify-content: space-between;padding: 10px;">
                                        <div style="display: flex; gap: 5px;">
                                            <div
                                                style="width: 20px;height: 20px;border-radius: 100%;background-color: #012a37;">
                                            </div>
                                            <p class="zero-padding-margin"
                                                style="text-overflow: ellipsis;white-space: nowrap;width:120px;overflow: hidden;cursor: default; ">
                                                {{ s.sender }}
                                            </p>

                                        </div>
                                        <div style="display: flex;gap: 5px;align-items: center;">
                                            <p class="zero-padding-margin" style="font-size: 10px;cursor: default;">
                                                {{ s.updated_time }}</p>
                                            <i class="fa fa-caret-right"></i>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    <div style="display: flex;justify-content: center;">
                                        <p style="font-size: 10px;">End.</p>
                                    </div>

                                    {% endif %}

                                </div>
                            </div>
                            <div id="pm-messages" class="t-c"
                                style="height: 100%;width: 70%;border: rgb(242, 240, 240) solid 1px;overflow-y: scroll;overflow-x: hidden">
                                <div class="row clearfix" style="width: 100%;height: 100%;">
                                    <div class="col-lg-12" style="width:100% ;">
                                        <div class=" chat-app" style="width:100% ;">
                                            <div class="chat" id="chat-box" style="width:100% ;">
                                                {% if not pm_messages %}
                                                <div class="chat-history " style="height: 30vh;">
                                                    <p class="center-div" id="pm-chat-info">No chat selected
                                                    </p>
                                                </div>
                                                {% else %}
                                                <div class="chat-history" style="width: 90%;">
                                                    <ul id="pm-chat-elem"
                                                        style="height: 66vh;overflow-y: scroll;overflow-x: hidden;width: 100%; ">
                                                        {% for chat_message in pm_messages %}
                                                        {% if not chat_message.me %}
                                                        <li class="clearfix">
                                                            <div class="message-data text-right">
                                                                <span class="message-data-time">
                                                                    <strong>
                                                                        {{ chat_message.from }}
                                                                    </strong>
                                                                    <!-- <span style="font-size: 12px;"
                                                                    class="success-flair">Supervisor</span> -->
                                                                </span>

                                                            </div>
                                                            <div class="message other-message float-right"
                                                                style="padding: 10px;">
                                                                {{chat_message.message }}
                                                                <p class="zero-padding-margin font-12">
                                                                    {{ chat_message.date_sent }}
                                                                </p>
                                                            </div>
                                                        </li>
                                                        {% else %}
                                                        <li class="clearfix">
                                                            <div class="message-data">
                                                                <span class="message-data-time"></span>
                                                            </div>
                                                            <div class="message my-message"
                                                                style="padding-bottom: 10px;">
                                                                {{ chat_message.message }}
                                                                <p class="zero-padding-margin font-12">
                                                                    {{ chat_message.date_sent }}
                                                                </p>

                                                            </div>
                                                        </li>
                                                        {% endif %}
                                                        {% endfor %}
                                                        <div id="lastElement" style="display: none;">Last Item</div>
                                                    </ul>
                                                </div>
                                                <div class="chat-message zero-padding-margin"
                                                    style="padding: 1px;position: fixed;bottom: 15px;margin-right:10px;margin-left:10px;display: flex;justify-content: center;width: 50vw;">
                                                    <div class="input-group mb-0">
                                                        {% if pm_reply_supported %}
                                                        <textarea class="form-control" id="reply-pm-message"
                                                            style="background-color: #d6d6d688;width: 80%;border-top-left-radius: 10px;border-bottom-left-radius: 10px;"
                                                            rows="1" placeholder="Type your reply..."></textarea>
                                                        {% else %}
                                                        <textarea class="form-control" id="reply-pm-message"
                                                            style="background-color: #d6d6d688;width: 80%;border-top-left-radius: 10px;border-bottom-left-radius: 10px;"
                                                            rows="1"
                                                            placeholder="Reply not allowed. Use the official site/app."
                                                            disabled></textarea>
                                                        {% endif %}
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text"
                                                                style="border-top-right-radius: 10px;border-bottom-right-radius: 10px;background-color: #013639;"><i
                                                                    id="pm-reply-button"
                                                                    data-conv_id="{{ conversation_id }}"
                                                                    data-recipient_id="{{ pm_recipient_id }}"
                                                                    data-platform="{{ pm_platform }}" class="fa fa-send"
                                                                    style="color: white;"></i></span>
                                                        </div>

                                                    </div>

                                                </div>
                                                {% endif %}

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div id="pm-inbox-wait"
                            style="display: none;width: 100%;justify-content: space-between;height: 100%;border-radius: 15px;">
                            <div
                                style="width: 30%;background-color: rgb(242, 240, 240);height: 100%;  border-top-left-radius: 10px; border-bottom-left-radius: 10px;">
                                <div style="display: flex; justify-content: space-between;padding: 10px;">
                                    <p style="cursor: pointer;" id="pm-back-platforms"><i class="fa fa-caret-left"></i>
                                        Back</p>
                                    <p><i class="fa fa-facebook" id="pm-icon-wait"></i></p>
                                </div>
                                <div style="overflow-y: scroll;height: 85%;background-color: rgb(225, 236, 231);">
                                    <div style="display: flex;justify-content: center;margin-top: 15%;">
                                        <i class="fa fa-spinner fa-spin"></i>
                                    </div>

                                </div>
                            </div>
                            <div id="pm-messages" class="t-c"
                                style="height: 100%;width: 70%;border: rgb(242, 240, 240) solid 1px;overflow-y: scroll;overflow-x: hidden">
                                <div class="row clearfix" style="width: 100%;height: 100%;">
                                    <div class="col-lg-12">
                                        <div class=" chat-app">
                                            <div class="chat" id="chat-box">
                                                <div class="chat-history " style="height: 30vh;">
                                                    <p class="center-div">No chat selected
                                                    </p>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <!-- help -->
            <div class="chat-content" id="help-content" style="display:none;width: 100%;">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>
                            How to
                        </h4>
                    </div>
                    <div class="user-details" tooltip="Me" flow="down">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="company-account-info container-right">

                </div>

            </div>
            <!-- integration -->
            <div class="chat-content" id="integration-content" style="display:none;width: 100%;">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>
                            Integration
                        </h4>
                    </div>
                    <div class="user-details" tooltip="Me" flow="down">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="company-account-info container-right">

                </div>

            </div>
            <!-- create post -->
            <div class="chat-content" id="create-post-content" style="display:none;width: 100%;">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <div class="step-container">
                            <div id="step1" class="step current">
                                <span class="step-number">1</span>
                                <p class="step-text">Add platforms</p>
                            </div>

                            <div id="step2" class="step upcoming">
                                <span class="step-number">2</span>
                                <p class="step-text">
                                    Upload Content</p>
                            </div>

                            <div id="step3" class="step upcoming">
                                <span class="step-number">3</span>
                                <p class="step-text">Set Up</p>
                                <p style="display: none;" id="max-tiktok-duration"></p>

                            </div>

                            <!-- <div id="step4" class="step upcoming">
                                <span class="step-number">4</span>
                                <p class="step-text">Review and submit</p>
                            </div> -->
                        </div>
                    </div>
                    <div class="user-details" tooltip="Me" flow="down">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile</li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>

                </div>
                <div class="company-account-info container-right"
                    style="display: flex; justify-content: center;height: 100%;">
                    <!-- SELECT PLATFORM -->
                    <div id="platform_select" class="bx-shadow"
                        style="margin-top: 20px;width: 500px;padding: 20px;display: block;height: 100%;">

                        <p>Select the platforms to upload to </p>
                        <div class="form-check" style="margin-left: 10px;">
                            <input class="form-check-input platforms_select" type="checkbox" value="instagram"
                                id="instagram_platform" {% if not instagram.linked %}disabled{% endif %}>
                            <label class="form-check-label" for="instagram_platform">
                                <p><img src="{% static 'images/instagram_logo.png' %}" style="width: 20px;height: 20px;"
                                        alt="instagram"> Instagram {% if not instagram.linked %}(not linked){% endif %}
                                </p>
                            </label>
                        </div>
                        <div class="form-check" style="margin-left: 10px;">
                            <input class="form-check-input platforms_select" type="checkbox" value="facebook"
                                id="facebook_platform" {% if not facebook.linked %}disabled{% endif %}>
                            <label class="form-check-label" for="facebook_platform">
                                <p><img src="{% static 'images/facebook_logo.png' %}" style="width: 20px;height: 20px;"
                                        alt="facebook"> Facebook {% if not facebook.linked %}(not linked){% endif %}</p>
                            </label>
                        </div>
                        <div class="form-check" style="margin-left: 10px;">
                            <input class="form-check-input platforms_select" type="checkbox" value="tiktok"
                                id="tiktok_platform" {% if not tiktok.linked %} disabled{% endif %}>
                            <label class="form-check-label" for="tiktok_platform">
                                <p><img src="{% static 'images/tiktok_logo.png' %}" style="width: 20px;height: 20px;"
                                        alt="tiktok"> TikTok {% if not tiktok.linked %}(not linked){% endif %}</p>
                            </label>
                        </div>
                        <div class="form-check" style="margin-left: 10px;">
                            <input type="checkbox" value="reddit" id="reddit_platform" {% if not reddit.linked %}
                                disabled {% elif reddit.subs|length < 1 %} disabled {% endif %}
                                class="form-check-input platforms_select">
                            <label class="form-check-label" for="reddit_platform">
                                <p><img src="{% static 'images/reddit_logo.png' %}" style="width: 20px;height: 20px;"
                                        alt="reddit"> Reddit
                                    {% if not reddit.linked %}(not linked)
                                    {% elif reddit.subs|length == 0 %}( No subs) {% endif %}</p>
                            </label>
                        </div>
                        <div style="margin-top: 20px;">
                            <a id="to_upload_content" class="btn-solid-sm post-btn-proceed-disabled" href="#">NEXT
                                (Upload content) <i class="fa fa-caret-right"></i></a>

                        </div>
                        <div style="display: none;justify-content: center;margin-top: 10px;margin-bottom: 10px;"
                            id="wait-upload-spinner">
                            <i class="fa fa-spinner fa-spin"></i>
                        </div>

                    </div>

                    <!-- UPLOAD CONTENT -->
                    <div id="upload_content_view"
                        style="display: none;width: 100%;justify-content: center;height: 100%;">
                        <form style="width:100%;overflow-y:scroll;height:80%" id="report-input-form" method="post"
                            enctype="multipart/form-data">
                            <div id="preview"
                                style="margin:10px;align-items: center;display: flex;width:95%;border: dashed;overflow-x: scroll;white-space: nowrap;border-radius: 15px;">
                            </div>
                            <div style="display: flex; justify-content: center;">
                                <div>
                                    <p style="font-size:12px;display:none" id="image-delete-instruction">Tap on media to
                                        remove</p>
                                    <div>
                                        <input class="file-upload-input" type="file" id="multiPostFiles"
                                            name="submitted" multiple onchange="FileVerification(event)">
                                    </div>
                                    <div style="display: flex;gap:20px;margin-top: 20px;">
                                        <div>
                                            <a id="back_to_platforms" class="btn-solid-sm" href="#"><i
                                                    class="fa fa-caret-left"></i> Back
                                                (Platforms) </a>
                                        </div>
                                        <div>
                                            <a id="to_set_up_content" class="btn-solid-sm post-btn-proceed-disabled"
                                                href="#">NEXT
                                                (set up) <i class="fa fa-caret-right"></i></a>
                                        </div>
                                    </div>
                                    <div style="display:flex;justify-content: center;margin-top: 20px;cursor: pointer;"
                                        id="non_media_post">
                                        <p style="color: #1d8ecd;">Proceed without media
                                            <i class="fa fa-caret-right"></i>
                                        </p>
                                    </div>
                                </div>
                            </div>

                        </form>
                    </div>

                    <!-- SET UP CONTENT -->
                    <div id="set_up_content"
                        style="display: none;width: 100%;justify-content: center;padding-left: 10%;overflow-y: scroll;height: 80vh;margin-right: 10%;">
                        <div class="form-group" id="title-set-up" style="display:none">
                            <label for="post-textarea">
                                <div style="display: flex;gap: 10px;height: 25px;">
                                    <strong>Title</strong>
                                    <img src="{% static 'images/reddit_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_reddit unselectedPlatform">
                                    <span style="font-size: 12px;"> *Required</span>

                                </div>
                            </label>
                            <input type="text" class="form-control-input" placeholder="Title" id="content_title"
                                style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px">
                        </div>
                        <div class="form-group">
                            <label for="post-textarea">
                                <div style="display: flex;gap: 10px;">
                                    <strong>Content</strong>
                                    <img src="{% static 'images/facebook_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_facebook unselectedPlatform">
                                    <img src="{% static 'images/instagram_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_instagram unselectedPlatform">
                                    <img src="{% static 'images/tiktok_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_tiktok unselectedPlatform">
                                    <img src="{% static 'images/reddit_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_reddit unselectedPlatform">
                                    <span style="font-size: 12px;"> *Required</span>
                                </div>
                            </label>
                            <textarea class="form-control-textarea" placeholder="Content"
                                style="border: 1px solid #ced4da;border-radius:4px;width:100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                id="content_description"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="post-textarea">
                                <div style="display: flex;gap: 10px;height: 25px;">
                                    <strong>(#) Tags</strong>
                                    <img src="{% static 'images/facebook_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_facebook unselectedPlatform">
                                    <img src="{% static 'images/instagram_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_instagram unselectedPlatform">
                                    <img src="{% static 'images/tiktok_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;"
                                        class="target_tiktok unselectedPlatform">
                                </div>
                            </label>
                            <input type="text" class="form-control-input" placeholder="Tags " id="content_tags"
                                style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px"
                                required>
                        </div>
                        <div class="form-group">
                            <strong>When to post</strong>
                            <div style="display: flex;gap: 10px;margin-top: 20px;">
                                <p style="cursor: pointer;color: black;" id="now-post">Now</p>
                                <div class="form-check form-switch" style="margin-left: 20px;">
                                    <input class="form-check-input" type="checkbox" role="switch" id="schedule_switch">
                                </div>
                                <p style="cursor: pointer;" id="schedule-post">Schedule</p>

                            </div>
                            <input class=" input-decor" placeholder="Pick time and date"
                                style="border: 1px solid #ced4da;border-radius:4px;width:100%;box-sizing: border-box;background-color: white;display: none;"
                                id="datePicker" required>
                            <p class="font-12" style="display: none;" id="sch-desc">(Schedule at least 15 minutes from
                                now)</p>
                        </div>
                        <div class="form-group target_tiktok unselectedPlatform">
                            <hr>
                            <strong>TIKTOK
                                <img src="{% static 'images/tiktok_logo.png' %}" alt=""
                                    style="width: 15px;height: 15px;margin: auto;">
                            </strong>
                            <div style="margin-left: 20px;margin-top: 15px;">
                                <strong>Allow Users to</strong>
                                <div style="display: flex;gap: 20px;">
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_comment">
                                            <label for="to_comment">Comment</label>
                                        </div>

                                    </div>
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_duet">
                                            <label for="to_duet">Duet</label>
                                        </div>

                                    </div>
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_stitch">
                                            <label for="to_stitch">Stitch</label>
                                        </div>

                                    </div>
                                </div>
                                <div style="display: flex;gap: 10px;margin-top: 15px;">
                                    <label for="ai_gen">AI generated content</label>

                                    <div class="form-check form-switch" style="margin-left: 20px;">
                                        <input class="form-check-input" type="checkbox" id="ai_gen">
                                    </div>

                                </div>
                                <div style="margin-top: 15px;">
                                    <strong>Who can watch this video</strong>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="flexRadioDefault"
                                            id="to_everyone" checked>
                                        <label class="form-check-label" for="to_everyone">
                                            Everyone
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="flexRadioDefault"
                                            id="to_friends">
                                        <label class="form-check-label" for="to_friends">
                                            Friends
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="flexRadioDefault"
                                            id="to_only_me">
                                        <label class="form-check-label" for="to_only_me">
                                            Only me
                                        </label>
                                    </div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <strong>(@) Mentions</strong>
                                    <input type="text" class="form-control-input" placeholder="Mentions "
                                        id="tiktok_mentions"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px;margin-top: 10px;"
                                        required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group target_instagram unselectedPlatform">
                            <hr>
                            <strong>INSTAGRAM
                                <img src="{% static 'images/instagram_logo.png' %}" alt=""
                                    style="width: 15px;height: 15px;margin: auto;">
                            </strong>
                            <div style="margin-left: 20px;margin-top: 15px;">
                                <strong>Upload to</strong>
                                <div style="display: flex;gap: 20px;">
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_ig_stories">
                                            <label for="to_ig_stories">Stories</label>
                                        </div>

                                    </div>
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_ig_posts" checked>
                                            <label for="to_ig_posts">Posts</label>
                                        </div>

                                    </div>
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_ig_reels">
                                            <label for="to_ig_reels">Reels</label>
                                        </div>

                                    </div>
                                </div>
                                <div style="display: flex;gap: 10px;margin-top: 15px;">
                                    <label for="ig_copyright">Run copyright check before publishing</label>

                                    <div class="form-check form-switch" style="margin-left: 20px;">
                                        <input class="form-check-input" type="checkbox" id="ig_copyright" checked
                                            disabled>
                                    </div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <strong>(@) User Tags</strong>
                                    <input type="text" class="form-control-input" placeholder="Mentions "
                                        id="ig_mentions"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px;margin-top: 10px;"
                                        required>
                                </div>
                                <!-- <div style="margin-top: 15px;">
                                    <strong>Product Tags</strong>
                                    <input type="text" class="form-control-input" placeholder="Product tags "
                                        id="ig_product_tags"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px;margin-top: 10px;"
                                        required>
                                </div> -->
                                <div style="margin-top: 15px;">
                                    <strong>Location Tags</strong>
                                    <input type="text" class="form-control-input" placeholder="Location tags "
                                        id="ig_location_tags"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px;margin-top: 10px;"
                                        required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group target_facebook unselectedPlatform">
                            <hr>
                            <strong>FACEBOOK
                                <img src="{% static 'images/facebook_logo.png' %}" alt=""
                                    style="width: 15px;height: 15px;margin: auto;">
                            </strong>
                            <div style="margin-left: 20px;margin-top: 15px;">
                                <strong>Upload to</strong>
                                <div style="display: flex;gap: 20px;">
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_fb_stories">
                                            <label for="to_fb_stories">Stories</label>
                                        </div>

                                    </div>
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_fb_posts" checked>
                                            <label for="to_fb_posts">Posts</label>
                                        </div>

                                    </div>
                                    <div style="display: flex;gap: 10px;">
                                        <div class="form-check form-switch" style="margin-left: 20px;">
                                            <input class="form-check-input" type="checkbox" id="to_fb_reels">
                                            <label for="to_fb_reels">Reels</label>
                                        </div>

                                    </div>
                                </div>
                                <div style="display: flex;gap: 10px;margin-top: 15px;">
                                    <label for="fb_copyright">Run copyright check before publishing</label>

                                    <div class="form-check form-switch" style="margin-left: 20px;">
                                        <input class="form-check-input" type="checkbox" id="fb_copyright" checked
                                            disabled>
                                    </div>
                                </div>

                                <div style="margin-top: 15px;">
                                    <strong>Who can see this</strong>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="fb_public" id="fb_public"
                                            checked>
                                        <label class="form-check-label" for="fb_public">
                                            Public
                                        </label>
                                    </div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <strong>(@) User Tags</strong>
                                    <input type="text" class="form-control-input" placeholder="Mentions "
                                        id="fb_mentions"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px;margin-top: 10px;"
                                        required>
                                </div>
                                <div style="margin-top: 15px;">
                                    <strong>Location Tags</strong>
                                    <input type="text" class="form-control-input" placeholder="Location tags "
                                        id="fb_location_tags"
                                        style="border: 1px solid #ced4da;border-radius:4px;width: 100%;box-sizing: border-box;background-color: white;font-size: 15px;padding-left:15px;margin-top: 10px;"
                                        required>
                                </div>

                            </div>
                        </div>
                        <div class="form-group target_reddit unselectedPlatform">
                            <hr>
                            <strong>REDDIT
                                <img src="{% static 'images/reddit_logo.png' %}" alt=""
                                    style="width: 15px;height: 15px;margin: auto;">
                            </strong>
                            <div style="margin-left: 20px;margin-top: 15px;">
                                <div style="display: flex;gap: 10px;margin-top: 15px;">
                                    <label for="nsfw_tag">NSFW Tag</label>

                                    <div class="form-check form-switch" style="margin-left: 20px;">
                                        <input class="form-check-input" type="checkbox" id="nsfw_tag">
                                    </div>

                                </div>
                                <div style="display: flex;gap: 10px;margin-top: 10px;">
                                    <label for="spoiler_tag">Spoiler Tag</label>

                                    <div class="form-check form-switch" style="margin-left: 20px;">
                                        <input class="form-check-input" type="checkbox" id="spoiler_tag">
                                    </div>

                                </div>
                                <div style="margin-top: 15px;">
                                    <div style="display: flex;gap: 20px;">
                                        <strong>Select Subs</strong>
                                        <span style="font-size: 12px;"> *Required</span>
                                    </div>
                                    <div style="margin-bottom: 20px;margin-top: 10px;">
                                        <select id="red_subs" data-name="red_subs" data-placeholder="select subs"
                                            multiple data-multi-select>
                                            {% for s in reddit.subs %}
                                            <option value="{{ s.sub }}">r/{{ s.sub }}</option>
                                            {% endfor %}

                                        </select>
                                    </div>
                                </div>
                                <div id="flair-select">
                                    <p style="cursor: pointer;" id="edit_flairs"><i class="fa fa-plus"></i> Add flairs
                                    </p>
                                    <p style="cursor: pointer;" id="check_sub_rules"><i class="fa fa-gavel"></i> Sub
                                        Rules
                                    </p>
                                </div>
                                <div style="display: none;justify-content: center;margin-top: 10px;margin-bottom: 10px;"
                                    id="wait-flair-spinner">
                                    <i class="fa fa-spinner fa-spin"></i>
                                </div>


                            </div>
                        </div>


                        <div style="display: flex;gap:20px;margin-top: 20px;">
                            <div>
                                <a id="back_to_upload" class="btn-solid-sm" href="#"><i class="fa fa-caret-left"></i>
                                    Back
                                    (Upload Content) </a>
                            </div>
                            <div>
                                <a id="submit_post" class="btn-solid-sm post-btn-proceed-disabled" href="#">POST
                                    <i class="fa fa-upload"></i></a>
                            </div>
                        </div>
                    </div>
                    <!-- Successful upload -->
                    <div id="content_upload_successful" style="display: none;">
                        <div style="display: flex;justify-content: center;">
                            <div>
                                <img src="{% static 'images/success_post.webp' %}" alt=""
                                    style="width: 300px;height: 300px;">
                                <div style="display: flex;gap: 10px;margin: auto;">
                                    <i class="fa fa-check" style="color: #1dcd52;"></i>
                                    <p>Your post has been succesfully uploaded.</p>
                                </div>
                                <div style="display: flex;justify-content: center;">
                                    <a id="upload_new_post" class="btn-solid-sm " href="#">Create New Post</a>
                                </div>

                            </div>

                        </div>

                    </div>
                    <!-- REVIEW CONTENT -->
                    <div id="review_content" style="display: none;width: 100%;">
                        <div style="display: flex;gap: 10px;height: 100%;">
                            <div style="width: 55%;height: 100%;margin-right: 30px;" class="bx-shadow">


                            </div>
                            <div style="width: 45%;height: 100%;overflow-y: scroll;">
                                <div style="display: flex;gap: 10px;width:70%;margin-bottom: 15px;">
                                    <p class="font-12 zero-padding-margin">Sharing to:</p>

                                    <img src="{% static 'images/facebook_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;">
                                    <img src="{% static 'images/instagram_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;">
                                    <img src="{% static 'images/tiktok_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;">
                                    <img src="{% static 'images/reddit_logo.png' %}" alt=""
                                        style="width: 15px;height: 15px;margin: auto;">


                                </div>
                                <div>
                                    <p class="font-12 zero-padding-margin">Title</p>
                                    <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">The
                                        title
                                    </p>
                                    <p class="font-12 zero-padding-margin">Description</p>
                                    <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">The
                                        description hbrfjv jfbhhjrv rvjrvhjrjv rjhvrjvhrv rjvhrjvhr</p>
                                </div>
                                <hr>
                                <div>
                                    <p class="font-12 zero-padding-margin">Tags</p>
                                    <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">The
                                        title
                                    </p>
                                    <p class="font-12 zero-padding-margin">When to post</p>
                                    <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                        Now</p>
                                </div>
                                <hr>
                                <div>
                                    <p class="zero-padding-margin" style="color: #1d8ecd;">Facebook configuration
                                        <img src="{% static 'images/facebook_logo.png' %}" alt=""
                                            style="width: 15px;height: 15px;margin: auto;">
                                    </p>
                                    <div style="margin-left: 20px;">
                                        <p class="font-12 zero-padding-margin">Uploading to</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Reels</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Stories</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Posts</p>
                                        <p class="font-12 zero-padding-margin">Who can see the post</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Public</p>

                                        <p class="font-12 zero-padding-margin">User Tags</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            @rteon</p>
                                        <p class="font-12 zero-padding-margin">Location Tags</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            None</p>
                                        <p class="font-12 zero-padding-margin">Product Tags</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            None</p>
                                    </div>

                                </div>

                                <hr>
                                <div>
                                    <p class="zero-padding-margin" style="color: #1d8ecd;">Instagram configuration
                                        <img src="{% static 'images/instagram_logo.png' %}" alt=""
                                            style="width: 15px;height: 15px;margin: auto;">
                                    </p>
                                    <div style="margin-left: 20px;">
                                        <p class="font-12 zero-padding-margin">Uploading to</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Reels</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Stories</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Posts</p>
                                        <p class="font-12 zero-padding-margin">Who can see the post</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Public</p>

                                        <p class="font-12 zero-padding-margin">User Tags</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            @rteon</p>
                                        <p class="font-12 zero-padding-margin">Location Tags</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            None</p>
                                        <p class="font-12 zero-padding-margin">Product Tags</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            None</p>
                                    </div>

                                </div>
                                <hr>
                                <div>
                                    <p class="zero-padding-margin" style="color: #1d8ecd;">TikTok configuration <img
                                            src="{% static 'images/tiktok_logo.png' %}" alt=""
                                            style="width: 15px;height: 15px;margin: auto;"></p>
                                    <div style="margin-left: 20px;">
                                        <p class="font-12 zero-padding-margin">Allow users to</p>
                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Comment</p>

                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Stitch</p>

                                        <p style="margin-left: 10px;font-weight: bold;" class="zero-padding-margin">
                                            Duet</p>

                                    </div>

                                </div>
                                <hr>
                                <div>
                                    <p class="zero-padding-margin" style="color: #1d8ecd;">Reddit configuration <img
                                            src="{% static 'images/reddit_logo.png' %}" alt=""
                                            style="width: 15px;height: 15px;margin: auto;"></p>
                                    <div style="margin-left: 20px;display: flex;gap: 30px;">
                                        <div>
                                            <p class="font-12 zero-padding-margin">NSFW</p>
                                            <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">
                                                No</p>

                                        </div>
                                        <div>
                                            <p class="font-12 zero-padding-margin">Spoiler</p>
                                            <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">
                                                No</p>

                                        </div>
                                    </div>
                                    <div style="margin-left: 20px;">
                                        <p class="font-12 zero-padding-margin">Subs</p>
                                        <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">
                                            r/Entrepreneur</p>

                                        <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">
                                            r/Solana</p>

                                        <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">
                                            r/Nairobi</p>

                                        <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">
                                            r/France</p>

                                        <p style="margin-left: 10px;font-weight: bold" class="zero-padding-margin">
                                            r/cryptonews</p>


                                    </div>

                                </div>
                                <div style="display: flex;gap:20px;margin-top: 20px;">
                                    <div>
                                        <a id="back_to_set_up" class="btn-solid-sm" href="#"><i
                                                class="fa fa-caret-left"></i>
                                            Back
                                            (set_up) </a>
                                    </div>
                                    <div>
                                        <!-- <a id="submit_post" class="btn-solid-sm post-btn-proceed-disabled"
                                            href="#">SUBMIT <i class="fa fa-caret-right"></i></a> -->
                                    </div>
                                </div>



                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- view posts -->
            <div class="chat-content" id="post-content" style="display:none;width: 100%;height: 100%;">
                <div class="chat-header container-right"
                    style="margin-top: 10px;margin-bottom: 10px;position: relative;">
                    <div class="logo-container">
                        <h4>
                            Posts
                        </h4>
                    </div>
                    <div class="user-details" tooltip="Me" flow="down">

                    </div>
                    <div class="popup" style="width: 250px;">
                        <div style="display: flex;gap: 10px;">
                            <div
                                style="width: 70px;height: 70px;border-radius: 70px;background-color: rgb(255, 145, 0);">
                            </div>
                            <div>
                                <p class="font-12">{{ request.user.username }} </p>
                                <p class="font-12">Change Picture</p>
                            </div>
                        </div>
                        <hr>
                        <p>Permissions</p>
                        <ul style="max-height: 100px;overflow-y: scroll;list-style-type: none;">
                            <li class="font-12" style="color: green;"><i class="fa fa-check"></i> Can update
                                business
                                profile
                            </li>
                            <li class="font-12" style="color: red;"><i class="fa fa-times"></i> Can update profile
                            </li>
                        </ul>
                        <a href="{% url 'logout' %}" style="text-decoration: none;">
                            <div class="logout-btn"
                                style="background-color: red;display: flex;margin-left: 30%;margin-right: 30%;align-items: center;justify-content: center;border-radius: 30px;color: white;">
                                <span style="margin-right: 10px;">Log out</span> <i class="fas fa-sign-out"></i>
                            </div>
                        </a>
                    </div>

                </div>
                <div style="display:block" id="post-container">
                    <div class="company-account-info container-right" style="overflow-y: scroll;;">
                        {% if posts|length == 0 %}
                        <div style="display: flex;justify-content: center;margin-top: 25%;">
                            <p>Posts you upload using Insightlyze will appear here</p>
                        </div>
                        {% else %}
                        {% for p in posts %}
                        <!-- post with media -->
                        {% if p.has_media %}
                        <div class="content-container"
                            style="width: 100%;display: flex;justify-content: center;margin-top: 10px;margin-bottom: 20px;">
                            <div
                                style="width: 90%;border: 1px solid rgb(209, 209, 209);border-radius: 10px;box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1), 0px 2px 4px rgba(0, 0, 0, 0.06);">
                                <div style="display: flex;gap:2px;" class="action-bar">
                                    <div style="width:80%;padding: 10px;" class="grandparent">
                                        <p style="font-size: 18px;margin-top: 10px;margin-bottom: 10px;color: black;">
                                            <strong>{{ p.title }} </strong>
                                        </p>
                                        <div
                                            style="width: 100%;display: flex;justify-content: center;background-color: #06041c10;">
                                            <img src="{{ p.cover_image_link }}" alt=""
                                                style="height: 300px;margin:auto;border-radius: 5px;">
                                        </div>
                                        <p style="max-height: 200px;overflow-y: scroll;margin-top: 20px;">
                                            {{ p.content }}
                                        </p>

                                        <div>
                                            <hr>
                                            {% if p.is_scheduled %}
                                            <div style="display:flex;justify-content: center;;">
                                                <p class="font-12">This post will be published on
                                                    <strong>{{ p.date_scheduled_h }}</strong>
                                                </p>
                                            </div>
                                            {% elif p.is_published %}
                                            <div class="thisparent"
                                                style="display: flex;justify-content: space-between;font-size: 12px;width: 80%;gap: 10px">
                                                <p class="impression-container" style="cursor: pointer;"
                                                    id="{{p.post_id}}" tooltip="Click to see impression distribution"><i
                                                        class="fa fa fa-bar-chart" flow="down"></i> <span
                                                        style="font-size: 12px;">{{ p.engagement_count }}</span></p>
                                                <p class="comments-container" style="cursor: pointer;"
                                                    tooltip="Click to see comments" flow="down"
                                                    data-id="{{ p.post_id }}"><i class="fa fa fa-comments-o"></i> <span
                                                        style="font-size: 12px;">{{ p.comment_count }}</span>
                                                </p>
                                                <p><i class="fa fa fa-calendar"></i>
                                                    <span style="font-size: 12px;">{{ p.date_uploaded_h }}</span>
                                                </p>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div style="width: 40%;padding-top: 20px;padding-bottom: 20px;">
                                        <div style="display: flex;justify-content: space-between;padding: 10px;">
                                            <div>
                                                {% if p.is_scheduled %}
                                                <p
                                                    style="font-size: 12px;padding: auto;background-color: rgb(216, 230, 251);color: rgb(21, 121, 164);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-clock" aria-hidden="true"></i> Scheduled
                                                </p>
                                                {% elif p.is_published %}
                                                <p
                                                    style="font-size: 12px;padding: auto;background-color: rgb(216, 251, 232);color: rgb(21, 164, 97);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-check" aria-hidden="true"></i> Published
                                                </p>
                                                {% elif p.has_failed %}
                                                <div style="display: flex;gap: 15px;">
                                                    <p
                                                        style="font-size: 12px;padding: auto;background-color: rgb(251, 216, 216);color: rgb(164, 21, 21);border-radius: 5px;align-items: center;padding-left: 5px;padding-right:5px">
                                                        <i class="fa fa-times" aria-hidden="true"></i> Failed
                                                    </p>
                                                    <p style="font-size: 12px;cursor: pointer;"
                                                        class="retry-failed-post"><i class="fa fa-refresh"></i> Retry
                                                    </p>
                                                </div>
                                                <div>
                                                    <p style="font-size: 12px;color: rgb(164, 21, 21);">Unable to post
                                                        to the selected platform(s)</p>
                                                </div>
                                                {% else %}
                                                <p
                                                    style="font-size: 12px;padding: auto;background-color: rgb(216, 226, 251);color: rgb(21, 57, 164);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-clock-o" aria-hidden="true"></i> Processing ...
                                                </p>
                                                <div>
                                                    <p class="refresh-post"
                                                        style="font-size: 12px;color: rgb(5, 58, 174);cursor: pointer;">
                                                        Click to refresh</p>
                                                </div>

                                                {% endif %}
                                            </div>
                                            <p style="padding-right: 12px;cursor: pointer;" class="delete-post-comment"
                                                data-post_id="{{ p.post_id }}" data-type="post"
                                                tooltip="Permanently delete post from all channels" flow="down"><i
                                                    id="delete-{{ p.post_id }}" class="fa fa-trash"></i></p>
                                        </div>
                                        <div style="display: flex;gap: 5px;flex-wrap: wrap;padding: 0;">
                                            {% for pl in p.platforms %}
                                            <div>
                                                <p
                                                    style="background-color: #f5f5f5;padding-left:5px;padding-right: 5px;font-size: 12px;border-radius: 5px;">
                                                    {{ pl }}
                                                </p>
                                            </div>
                                            {% endfor %}
                                        </div>
                                        <hr>
                                        {% if p.tags %}
                                        <div
                                            style="display: flex;gap: 5px;flex-wrap: wrap;padding-top: 0px;padding-bottom:10px;">
                                            {% for t in p.tags %}
                                            <p style="font-size: 12px;font-weight: bold"><i>{{ t }}</i></p>

                                            {% endfor %}
                                        </div>
                                        {% endif %}
                                    </div>

                                </div>
                                <!-- sub elements post info -->

                                <div id="post-comment-box-{{ p.post_id }}" style="padding: 10px; display: none;">
                                    <hr>
                                    <p>Comments</p>
                                    {% if comments_data|length > 0 %}
                                    {% for comment in comments_data %}
                                    <div
                                        style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(5, 189, 209);padding: 10px;margin-bottom: 10px;">
                                        <div style="display: flex;justify-content: space-between;">

                                            <div class="d-flex flex-start align-items-center">
                                                <img class="rounded-circle shadow-1-strong me-3"
                                                    src="{{ comment.author_profile }}" alt="avatar" width="60"
                                                    height="60" />
                                                <div>
                                                    <h6 class="fw-bold text-primary mb-1">
                                                        {{ comment.author }}
                                                        {% if comment.isOP %}<span class="font-12"
                                                            style="color: #03696e;">(You)</span> {% endif %}
                                                    </h6>
                                                    <p class="text-muted small mb-0">
                                                        {{ comment.date_updated }}
                                                    </p>
                                                </div>

                                            </div>
                                            <div>
                                                {% if comment.isReddit %}
                                                <img src="{% static 'images/reddit_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">
                                                {% elif comment.isFacebook %}
                                                <img src="{% static 'images/facebook_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">
                                                {% elif comment.isInstagram %}
                                                <img src="{% static 'images/instagram_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">
                                                {% elif comment.isTiktok %}
                                                <img src="{% static 'images/tiktok_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">

                                                {% endif %}
                                            </div>
                                        </div>
                                        <p class="mt-3 mb-4 pb-2">
                                            {{ comment.message_body }}
                                        </p>
                                        <div class="thisparent"
                                            style="display: flex;justify-content: space-between;font-size: 12px;width: 80%;gap: 10px">

                                            <div>
                                                {% if isInstagram %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(251, 216, 243);color: rgb(164, 21, 154);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-instagram" aria-hidden="true"></i> Instagram
                                                </p>
                                                {% elif isReddit %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(246, 251, 216);color: rgb(164, 159, 21);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-reddit" aria-hidden="true"></i> Reddit
                                                </p>
                                                {% elif isTiktok %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(216, 251, 237);color: rgb(21, 164, 97);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-tiktok" aria-hidden="true"></i> TikTok
                                                </p>
                                                {% elif isFacebook %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(216, 227, 251);color: rgb(21, 21, 164);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-facebook" aria-hidden="true"></i> Facebook
                                                </p>
                                                {% endif %}

                                            </div>
                                            <p class="comments-reply-container" style="cursor: pointer;font-size: 12px;"
                                                data-id="{{ comment.id }}" data-count="{{ comment.reply_count }}"
                                                data-post="{{ p.post_id }}">
                                                Replies({{ comment.reply_count}})</span>
                                            </p>
                                            <p class="like-comment" style="cursor: pointer;" data-id="{{ comment.id }}"
                                                data-comment_level="comment_post">
                                                <i class="fa fa fa-heart-o" id="like-icon-{{ comment.id }}"></i>
                                                <span style="font-size: 12px;" id="like-{{ comment.id }}">
                                                    {{ comment.like_count }}</span>
                                            </p>

                                            <p><i class="fa fa fa-star"></i> <span style="font-size: 12px;">Add to
                                                    review wall</span></p>
                                        </div>
                                        <div id="comment-reply-container-box-{{ comment.id }}" style="display: none;">
                                            <div class="comment-post-box">
                                                <div data-mdb-input-init class="form-outline" style="width: 90%;">
                                                    <textarea class="form-control" data-type="comment-post" rows="4"
                                                        style="background: #fff;" placeholder="Type your response"
                                                        id="textarea-{{ comment.id }}"></textarea>
                                                    <button type="button" data-mdb-button-init data-mdb-ripple-init
                                                        class="btn btn-primary btn-sm post-comment-update"
                                                        data-comment_id="{{ comment.id }}"
                                                        data-post_id="{{ p.post_id }}" data-comment_level="comment-post"
                                                        style="margin: 10px;">Post
                                                        comment</button>
                                                </div>
                                            </div>
                                            <!-- replies -->
                                            {% if comments_replies|length > 0 %}
                                            {% for cr in comments_replies %}
                                            <div
                                                style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(207, 173, 4);padding: 10px;margin-bottom: 10px;">
                                                <div class="d-flex flex-start align-items-center">
                                                    <img class="rounded-circle shadow-1-strong me-3"
                                                        src="{{ cr.author_profile }}" alt="avatar" width="60"
                                                        height="60" />
                                                    <div>
                                                        <h6 class="fw-bold text-primary mb-1">
                                                            {{ cr.author }}
                                                            {% if cr.isOP %}<span class="font-12"
                                                                style="color: #03696e;">(You)</span> {% endif %}
                                                        </h6>
                                                        <p class="text-muted small mb-0">
                                                            {{ cr.date_updated }}
                                                        </p>
                                                    </div>
                                                </div>
                                                <p class="mt-3 mb-4 pb-2">
                                                    {{ cr.message_body }}
                                                </p>

                                                <div class="thisparent"
                                                    style="display: flex;gap:4px;font-size: 12px;width: 80%;gap: 10px">

                                                    <p class="second-reply-comment"
                                                        style="cursor: pointer;font-size: 12px;">
                                                        Reply ({{ cr.reply_count }})</span>
                                                    </p>
                                                    <p class="like-comment" style="cursor: pointer;"
                                                        data-id="{{ cr.id }}" data-comment_level="comment_reply"><i
                                                            class="fa fa fa-heart-o" id="like-icon-{{ cr.id }}"></i>
                                                        <span style="font-size: 12px;" id="like-{{ cr.id }}">
                                                            {{ cr.like_count }}</span>
                                                    </p>

                                                </div>
                                                <div class="second-replies-comment"
                                                    id="second-replies-comment-{{ cr.id }}" style="display: none;">
                                                    <div class="comment-reply-box">
                                                        <div data-mdb-input-init class="form-outline"
                                                            style="width: 90%;">
                                                            <textarea class="form-control" rows="4"
                                                                style="background: #fff;"
                                                                placeholder="Type your response"
                                                                id="textarea-{{ cr.id }}"></textarea>
                                                            <button type="button" data-mdb-button-init
                                                                data-mdb-ripple-init
                                                                class="btn btn-primary btn-sm post-comment-update"
                                                                data-comment_id="{{ cr.id }}"
                                                                data-original_comment="{{ comment.id }}"
                                                                data-post_id="{{ p.post_id }}"
                                                                data-comment_level="comment-reply"
                                                                style="margin: 10px;">Post
                                                                comment</button>
                                                        </div>
                                                    </div>
                                                    {% for cpl in cr.replies %}
                                                    <div
                                                        style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(211, 5, 5);padding: 10px;margin-bottom: 10px;">
                                                        <div class="d-flex flex-start align-items-center">
                                                            <img class="rounded-circle shadow-1-strong me-3"
                                                                src="{{ cpl.author_profile }}" alt="avatar" width="60"
                                                                height="60" />
                                                            <div>
                                                                <h6 class="fw-bold text-primary mb-1">
                                                                    {{ cpl.author }}
                                                                    {% if cpl.isOP %}<span class="font-12"
                                                                        style="color: #03696e;">(You)</span> {% endif %}
                                                                </h6>
                                                                <p class="text-muted small mb-0">
                                                                    {{ cpl.date_updated }}
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <p class="mt-3 mb-4 pb-2">
                                                            {{ cpl.message_body }}
                                                        </p>
                                                        <div class="thisparent"
                                                            style="display: flex;gap:4px;font-size: 12px;width: 80%;gap: 10px">
                                                            <p class="like-comment" style="cursor: pointer;"
                                                                data-id="{{ cpl.id }}"
                                                                data-comment_level="comment_sec_reply"><i
                                                                    id="like-icon-{{ cpl.id }}"
                                                                    class="fa fa fa-heart-o"></i>
                                                                <span style="font-size: 12px;" id="like-{{ cpl.id }}">
                                                                    {{ cpl.like_count }}</span>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                            {% endif %}
                                        </div>
                                    </div>
                                    {% endfor %}
                                    {% else %}
                                    <div
                                        style="display: flex;justify-content: center;margin: auto;padding-top: 15px;padding-bottom: 15px; ">
                                        <p>No comments</p>
                                    </div>
                                    {% endif %}

                                </div>
                                <!-- impression analytics -->
                                <div id="impression-analysis-{{ p.post_id }}" style="display: none;">
                                    <div class="card draggable">
                                        <div class="card-body p-3" style="display:flex;gap:10px;">
                                            <div class="card mb-4 z-index-2 draggable">
                                                <div class="card-header pb-0">
                                                    <h6 class="mb-1 title-box">Impression Distribution </h6>
                                                </div>
                                                <div class="card-body card-body px-3 pt-lg-6 pb-lg-5"
                                                    style="display: flex;justify-content: center;">
                                                    <div class="row h-100">
                                                        <div
                                                            class="col-lg-5 my-auto text-center d-lg-block d-flex justify-content-center">
                                                            <div id="chart-pie-{{p.post_id}}" class="chart-pie">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="container border-radius-lg"
                                                    style="height: 400px;overflow-y: scroll;">
                                                    <div style="display: none;">
                                                        <div>
                                                            <div class="d-flex mb-2">
                                                                <p class="text-xs mt-1 mb-0 font-weight-bold"
                                                                    style="cursor: default;"
                                                                    tooltip="Number of times your content was displayed"
                                                                    flow="up">
                                                                    Impressions</p>
                                                            </div>
                                                            <div class="d-flex" style="gap: 10px;">
                                                                <h5 class="font-weight-bolder"></h5>
                                                                <div id="impression-chart-{{p.post_id}}"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% if p.has_reddit %}
                                                    <div>
                                                        <div class="d-flex mb-2">
                                                            <p class="text-xs mt-1 mb-0 font-weight-bold"
                                                                class="tooltip" style="cursor: default;"
                                                                tooltip="likes, views (for videos), comments, saves, shares ,"
                                                                flow="up">
                                                                <img src="{% static 'images/reddit_logo.png '%}" alt=""
                                                                    style="width:20px;height: 20px;">
                                                                Reddit Engagement
                                                            </p>

                                                        </div>
                                                        <div class="d-flex" style="gap: 10px;margin-left: 20px;">
                                                            <p>Upvote Ratio:</p>
                                                            <h5 class="font-weight-bolder" id="rte-{{p.post_id}}">36K
                                                            </h5>
                                                        </div>
                                                        <div id="reddit-engagement-chart-{{p.post_id}}"></div>

                                                    </div>
                                                    <hr>
                                                    {% endif %}
                                                    <!-- facebook stats -->
                                                    {% if p.has_facebook %}
                                                    <div class="d-flex mb-2">
                                                        <p class="text-xs mt-1 mb-0 font-weight-bold"
                                                            style="cursor: default;">
                                                            <img src="{% static 'images/facebook_logo.png '%}" alt=""
                                                                style="width:20px;height: 20px;">
                                                            Facebook Stats
                                                        </p>
                                                    </div>
                                                    <div style="display: flex;gap: 10px;margin-top: 20px;">
                                                        <div
                                                            style="display: flex;flex-direction: column;justify-content: center;">
                                                            <div>
                                                                <div class="d-flex"
                                                                    style="gap: 10px;margin-left: 20px;">
                                                                    <p>Clicks:</p>
                                                                    <h6 class="font-weight-bolder"
                                                                        id="fb-clicks-{{p.post_id}}">
                                                                    </h6>
                                                                </div>
                                                                <div class="d-flex"
                                                                    style="gap: 10px;margin-left: 20px;">
                                                                    <p>Impressions:</p>
                                                                    <h6 class="font-weight-bolder"
                                                                        id="fb-impressions-{{p.post_id}}">

                                                                    </h6>

                                                                </div>
                                                                <div class="d-flex"
                                                                    style="gap: 10px;margin-left: 20px;">
                                                                    <p>Conversion Rate:</p>
                                                                    <h6 class="font-weight-bolder"
                                                                        id="fb-conv-{{p.post_id}}">
                                                                    </h6>

                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- impression chart  -->
                                                        <div id="fb-impression-chart-{{ p.post_id }}">

                                                        </div>

                                                    </div>
                                                    <!-- video watch stats -->
                                                    <div id="fb-video-watch-{{ p.post_id }}">
                                                    </div>

                                                    <div id="video-summary-{{ p.post_id }}" style="display: none;">
                                                        <div style="display: flex;justify-content: space-around;">
                                                            <div
                                                                style="background-color: #371d01;border-radius: 10px;padding: 5px;display: flex;justify-content: center;">
                                                                <div>
                                                                    <p
                                                                        style="font-size: 10px;color: rgb(212, 211, 211);">
                                                                        Total Watch Time
                                                                    </p>
                                                                    <p id="twt-{{ p.post_id }}"
                                                                        style="font-size: 25px;font-weight: bold;align-items: center;display: flex;justify-content: center;color: rgb(212, 211, 211);;">
                                                                        -
                                                                    </p>
                                                                </div>
                                                            </div>

                                                            <div
                                                                style="background-color: #060137;border-radius: 10px;padding: 5px;display: flex;justify-content: center;">
                                                                <div>
                                                                    <p
                                                                        style="font-size: 10px;color: rgb(212, 211, 211);">
                                                                        Average Watch Time
                                                                    </p>
                                                                    <p id="awt-{{ p.post_id }}"
                                                                        style="font-size: 25px;font-weight: bold;align-items: center;display: flex;justify-content: center;color: rgb(212, 211, 211);;">
                                                                        -
                                                                    </p>
                                                                </div>
                                                            </div>

                                                            <div
                                                                style="background-color: #163701;border-radius: 10px;padding: 5px;display: flex;justify-content: center;">
                                                                <div>
                                                                    <p
                                                                        style="font-size: 10px;color: rgb(212, 211, 211);">
                                                                        Total Play Count
                                                                    </p>
                                                                    <p id="tpc-{{ p.post_id }}"
                                                                        style="font-size: 25px;font-weight: bold;align-items: center;display: flex;justify-content: center;color: rgb(212, 211, 211);;">
                                                                        -
                                                                    </p>
                                                                </div>
                                                            </div>
                                                            <div
                                                                style="background-color: #012a37;border-radius: 10px;padding: 5px;display: flex;justify-content: center;">
                                                                <div>
                                                                    <p
                                                                        style="font-size: 10px;color: rgb(212, 211, 211);">
                                                                        Consumption Rate
                                                                    </p>
                                                                    <p id="cr-{{ p.post_id }}"
                                                                        style="font-size: 25px;font-weight: bold;align-items: center;display: flex;justify-content: center;color: rgb(212, 211, 211);;">
                                                                        -
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- countries bar chart -->
                                                    <div id="fb-countries-chart-{{ p.post_id }}"
                                                        style="margin-top: 20px;">

                                                    </div>
                                                    <!-- Age gender bar chart -->
                                                    <div id="fb-age-gender-chart-{{ p.post_id }}"
                                                        style="margin-top: 20px;"></div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- spin -->
                                <div id="spin-{{ p.post_id }}"
                                    style="display: none;justify-content: center;margin-top: 20px;margin-bottom: 20px;padding: 30px;">
                                    <i class="fa fa-spinner fa-spin"></i>
                                </div>

                            </div>

                        </div>

                        {% else %}
                        <!-- non media post -->
                        <div class="content-container"
                            style="width: 100%;display: flex;justify-content: center;margin-top: 10px;margin-bottom: 20px;">
                            <div
                                style="width: 90%;border: 1px solid rgb(209, 209, 209);border-radius: 10px;box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1), 0px 2px 4px rgba(0, 0, 0, 0.06);">
                                <div style="display: flex;gap:2px;" class="action-bar">
                                    <div style="width:80%;padding: 15px;" class="grandparent">
                                        <p style="font-size: 18px;margin-top: 10px;margin-bottom: 10px;color: black;">
                                            <strong>{{ p.title }} </strong>
                                        </p>
                                        <div
                                            style="display: flex;flex-direction: column;height:80%;justify-content: space-between;">
                                            <p style="max-height: 200px;overflow-y: scroll;">{{ p.content }}
                                            </p>
                                            <div>
                                                <hr>
                                                {% if p.is_scheduled %}
                                                <div style="display:flex;justify-content: center;">
                                                    <p class="font-12">This post will be published on
                                                        <strong>{{ p.date_scheduled_h }}</strong>
                                                    </p>
                                                </div>
                                                {% elif p.is_published %}
                                                <div class="thisparent"
                                                    style="display: flex;justify-content: space-between;font-size: 12px;width: 80%;gap: 10px">
                                                    <p class="impression-container" style="cursor: pointer;"
                                                        id="{{p.post_id}}"
                                                        tooltip="Click to see impression distribution"><i
                                                            class="fa fa fa-bar-chart" flow="down"></i> <span
                                                            style="font-size: 12px;">{{ p.engagement_count }}</span></p>
                                                    <p class="comments-container" style="cursor: pointer;"
                                                        data-id="{{ p.post_id }}" tooltip="Click to see comments"
                                                        flow="down"><i class="fa fa fa-comments-o"></i> <span
                                                            style="font-size: 12px;">{{ p.comment_count }}</span>
                                                    </p>
                                                    <p><i class="fa fa fa-calendar"></i>
                                                        <span style="font-size: 12px;">{{ p.date_uploaded_h }}</span>
                                                    </p>
                                                </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width: 40%;padding-top: 20px;padding-bottom: 20px;">
                                        <div style="display: flex;justify-content: space-between;padding: 10px;">
                                            <div>
                                                {% if p.is_scheduled %}
                                                <p
                                                    style="font-size: 12px;padding: auto;background-color: rgb(216, 230, 251);color: rgb(21, 121, 164);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-clock" aria-hidden="true"></i> Scheduled
                                                </p>
                                                {% elif p.is_published %}
                                                <p
                                                    style="font-size: 12px;padding: auto;background-color: rgb(216, 251, 232);color: rgb(21, 164, 97);border-radius: 5px;padding-left: 5px;padding-right: 5px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-check" aria-hidden="true"></i> Published
                                                </p>
                                                {% elif p.has_failed %}
                                                <div style="display: flex;gap: 15px;">
                                                    <p
                                                        style="font-size: 12px;padding: auto;background-color: rgb(251, 216, 216);color: rgb(164, 21, 21);border-radius: 5px;align-items: center;padding-left: 5px;padding-right:5px;">
                                                        <i class="fa fa-times" aria-hidden="true"></i> Failed
                                                    </p>
                                                    <p style="font-size: 12px;cursor: pointer;"
                                                        class="retry-failed-post"><i class="fa fa-refresh"></i> Retry
                                                    </p>
                                                </div>
                                                <div>
                                                    <p style="font-size: 12px;color: rgb(164, 21, 21);">Unable to post
                                                        to the selected platform(s)</p>
                                                </div>
                                                {% else %}
                                                <p
                                                    style="font-size: 12px;padding: auto;background-color: rgb(216, 226, 251);color: rgb(21, 57, 164);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-clock-o" aria-hidden="true"></i> Processing ...
                                                </p>
                                                <div>
                                                    <p class="refresh-post"
                                                        style="font-size: 12px;color: rgb(5, 58, 174);cursor: pointer;">
                                                        Click to refresh</p>
                                                </div>
                                                {% endif %}
                                            </div>
                                            <p style="padding-right: 12px;cursor: pointer;" class="delete-post-comment"
                                                data-post_id="{{ p.post_id }}" data-type="post"
                                                tooltip="Permanently delete post from all channels" flow="down"><i
                                                    id="delete-{{ p.post_id }}" class="fa fa-trash"></i></p>
                                        </div>
                                        <div style="display: flex;gap: 5px;flex-wrap: wrap;padding: 0;">
                                            {% for pl in p.platforms %}
                                            <div>
                                                <p
                                                    style="background-color: #f5f5f5;padding-left:5px;padding-right: 5px;font-size: 12px;border-radius: 5px;">
                                                    {{ pl }}
                                                </p>
                                            </div>
                                            {% endfor %}
                                        </div>
                                        <hr>
                                        {% if p.tags %}
                                        <div
                                            style="display: flex;gap: 5px;flex-wrap: wrap;padding-top: 0px;padding-bottom:10px;">
                                            {% for t in p.tags %}
                                            <p style="font-size: 12px;font-weight: bold"><i>{{ t }}</i></p>

                                            {% endfor %}
                                        </div>
                                        {% endif %}
                                    </div>

                                </div>
                                <!-- sub elements post info -->

                                <div id="post-comment-box-{{ p.post_id }}" style="padding: 10px; display: none;">
                                    <hr>
                                    <p>Comments</p>
                                    {% if comments_data|length > 0 %}
                                    {% for comment in comments_data %}
                                    <div
                                        style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(5, 189, 209);padding: 10px;margin-bottom: 10px;">
                                        <div style="display: flex;justify-content: space-between;">
                                            <div class="d-flex flex-start align-items-center">
                                                <img class="rounded-circle shadow-1-strong me-3"
                                                    src="{{ comment.author_profile }}" alt="avatar" width="60"
                                                    height="60" />
                                                <div>
                                                    <h6 class="fw-bold text-primary mb-1">
                                                        {{ comment.author }}
                                                        {% if comment.isOP %}<span class="font-12"
                                                            style="color: #03696e;">(You)</span> {% endif %}
                                                    </h6>
                                                    <p class="text-muted small mb-0">
                                                        {{ comment.date_updated }}
                                                    </p>
                                                </div>

                                            </div>
                                            <div>
                                                {% if comment.isReddit %}
                                                <img src="{% static 'images/reddit_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">
                                                {% elif comment.isFacebook %}
                                                <img src="{% static 'images/facebook_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">
                                                {% elif comment.isInstagram %}
                                                <img src="{% static 'images/instagram_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">
                                                {% elif comment.isTiktok %}
                                                <img src="{% static 'images/tiktok_logo.png '%}" alt=""
                                                    style="width:20px;height: 20px;">

                                                {% endif %}
                                            </div>
                                        </div>
                                        <p class="mt-3 mb-4 pb-2">
                                            {{ comment.message_body }}
                                        </p>
                                        <div class="thisparent"
                                            style="display: flex;justify-content: space-between;font-size: 12px;width: 80%;gap: 10px">

                                            <div>
                                                {% if isInstagram %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(251, 216, 243);color: rgb(164, 21, 154);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-instagram" aria-hidden="true"></i> Instagram
                                                </p>
                                                {% elif isReddit %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(246, 251, 216);color: rgb(164, 159, 21);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-reddit" aria-hidden="true"></i> Reddit
                                                </p>
                                                {% elif isTiktok %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(216, 251, 237);color: rgb(21, 164, 97);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-tiktok" aria-hidden="true"></i> TikTok
                                                </p>
                                                {% elif isFacebook %}
                                                <p
                                                    style="font-size: 12px;padding: 0;margin: 0;background-color: rgb(216, 227, 251);color: rgb(21, 21, 164);border-radius: 5px;padding-left: 5px;padding-right: 10px;align-items: center;margin-bottom: 10px;">
                                                    <i class="fa fa-facebook" aria-hidden="true"></i> Facebook
                                                </p>
                                                {% endif %}

                                            </div>
                                            <p class="comments-reply-container" style="cursor: pointer;font-size: 12px;"
                                                data-id="{{ comment.id }}" data-count="{{ comment.reply_count }}"
                                                data-post="{{ p.post_id }}">
                                                Replies({{ comment.reply_count}})</span>
                                            </p>

                                            <p class="like-comment" style="cursor: pointer;" data-id="{{ comment.id }}"
                                                data-comment_level="comment_post">
                                                <i class="fa fa fa-heart-o" id="like-icon-{{ comment.id }}"></i>
                                                <span style="font-size: 12px;" id="like-{{ comment.id }}">
                                                    {{ comment.like_count }}</span>
                                            </p>

                                            <p><i class="fa fa fa-star"></i> <span style="font-size: 12px;">Add to
                                                    review wall</span></p>
                                        </div>
                                        <div id="comment-reply-container-box-{{ comment.id }}" style="display: none;">
                                            <div class="comment-post-box">
                                                <div data-mdb-input-init class="form-outline" style="width: 90%;">
                                                    <textarea class="form-control " rows="4" style="background: #fff;"
                                                        placeholder="Type your response"
                                                        id="textarea-{{ comment.id }}"></textarea>
                                                    <button type="button" data-mdb-button-init data-mdb-ripple-init
                                                        class="btn btn-primary btn-sm post-comment-update"
                                                        data-comment_id="{{ comment.id }}"
                                                        data-post_id="{{ p.post_id }}" data-comment_level="comment-post"
                                                        style="margin: 10px;">Post
                                                        comment</button>
                                                </div>
                                            </div>
                                            <!-- replies -->
                                            {% if comments_replies|length > 0 %}
                                            {% for cr in comments_replies %}
                                            <div
                                                style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(207, 173, 4);padding: 10px;margin-bottom: 10px;">
                                                <div class="d-flex flex-start align-items-center">
                                                    <img class="rounded-circle shadow-1-strong me-3"
                                                        src="{{ cr.author_profile }}" alt="avatar" width="60"
                                                        height="60" />
                                                    <div>
                                                        <h6 class="fw-bold text-primary mb-1">
                                                            {{ cr.author }}
                                                            {% if comment.isOP %}<span class="font-12"
                                                                style="color: #03696e;">(You)</span> {% endif %}
                                                        </h6>
                                                        <p class="text-muted small mb-0">
                                                            {{ cr.date_updated }}
                                                        </p>
                                                    </div>
                                                </div>
                                                <p class="mt-3 mb-4 pb-2">
                                                    {{ cr.message_body }}
                                                </p>

                                                <div class="thisparent"
                                                    style="display: flex;gap:4px;font-size: 12px;width: 80%;gap: 10px">
                                                    <p class="second-reply-comment"
                                                        style="cursor: pointer;font-size: 12px;">

                                                        Reply ({{cr.reply_count }})</span>
                                                    </p>

                                                    <p class="like-comment" style="cursor: pointer;"
                                                        data-id="{{ cr.id }}" data-comment_level="comment_reply"><i
                                                            id="like-icon-{{ cr.id }}" class="fa fa fa-heart-o"></i>
                                                        <span style="font-size: 12px;" id="like-{{ cr.id }}">
                                                            {{ cr.like_count }}</span>
                                                    </p>

                                                </div>
                                                <!-- second replies -->
                                                <div class="second-replies-comment"
                                                    id="second-replies-comment-{{ cr.id }}" style="display: none;">
                                                    <div class="comment-reply-box">
                                                        <div data-mdb-input-init class="form-outline"
                                                            style="width: 90%;">
                                                            <textarea class="form-control" rows="4"
                                                                id="textarea-{{ cr.id }}" style="background: #fff;"
                                                                placeholder="Type your response"></textarea>
                                                            <button type="button" data-mdb-button-init
                                                                data-mdb-ripple-init
                                                                class="btn btn-primary btn-sm post-comment-update"
                                                                data-comment_id="{{ cr.id }}"
                                                                data-original_comment="{{ comment.id }}"
                                                                data-post_id="{{ p.post_id }}"
                                                                data-comment_level="comment-reply"
                                                                style="margin: 10px;">Post
                                                                comment</button>
                                                        </div>
                                                    </div>
                                                    {% for cpl in cr.replies %}
                                                    <div
                                                        style="margin-left: 20px;border-radius: 10px;border: 1px solid rgb(211, 5, 5);padding: 10px;margin-bottom: 10px;">
                                                        <div class="d-flex flex-start align-items-center">
                                                            <img class="rounded-circle shadow-1-strong me-3"
                                                                src="{{ cpl.author_profile }}" alt="avatar" width="60"
                                                                height="60" />
                                                            <div>
                                                                <h6 class="fw-bold text-primary mb-1">
                                                                    {{ cpl.author }}
                                                                    {% if cpl.isOP %}<span class="font-12"
                                                                        style="color: #03696e;">(You)</span> {% endif %}
                                                                </h6>
                                                                <p class="text-muted small mb-0">
                                                                    {{ cpl.date_updated }}
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <p class="mt-3 mb-4 pb-2">
                                                            {{ cpl.message_body }}
                                                        </p>
                                                        <div class="thisparent"
                                                            style="display: flex;gap:4px;font-size: 12px;width: 80%;gap: 10px">
                                                            <p class="like-comment" style="cursor: pointer;"
                                                                data-id="{{ cpl.id }}"
                                                                data-comment_level="comment_sec_reply"><i
                                                                    id="like-icon-{{ cpl.id }}"
                                                                    class="fa fa fa-heart-o"></i>
                                                                <span style="font-size: 12px;" id="like-{{ cpl.id }}">
                                                                    {{ cpl.like_count }}</span>
                                                            </p>
                                                        </div>

                                                    </div>
                                                    {% endfor %}
                                                </div>

                                            </div>
                                            {% endfor %}
                                            {% endif %}
                                        </div>
                                    </div>
                                    {% endfor %}
                                    {% else %}
                                    <div
                                        style="display: flex;justify-content: center;margin: auto;padding-top: 15px;padding-bottom: 15px; ">
                                        <p>No comments</p>
                                    </div>
                                    {% endif %}

                                </div>
                                <!-- impression analytics -->
                                <div id="impression-analysis-{{ p.post_id }}" style="display: none;">
                                    <div class="card draggable">
                                        <div class="card-body p-3" style="display:flex;gap:10px;">
                                            <div class="card mb-4 z-index-2 draggable">
                                                <div class="card-header pb-0">
                                                    <h6 class="mb-1 title-box">Impression Distribution </h6>
                                                </div>
                                                <div class="card-body card-body px-3 pt-lg-6 pb-lg-5"
                                                    style="display: flex;justify-content: center;">
                                                    <div class="row h-100">
                                                        <div
                                                            class="col-lg-5 my-auto text-center d-lg-block d-flex justify-content-center">
                                                            <div id="chart-pie-{{p.post_id}}" class="chart-pie">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="container border-radius-lg"
                                                    style="height: 400px;overflow-y: scroll;">
                                                    <div style="display: none;">
                                                        <div>
                                                            <div class="d-flex mb-2">
                                                                <p class="text-xs mt-1 mb-0 font-weight-bold"
                                                                    style="cursor: default;"
                                                                    tooltip="Number of times your content was displayed"
                                                                    flow="up">
                                                                    Impressions</p>
                                                            </div>
                                                            <div class="d-flex" style="gap: 10px;">
                                                                <h5 class="font-weight-bolder"></h5>
                                                                <div id="impression-chart-{{p.post_id}}"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    {% if p.has_reddit %}
                                                    <div>
                                                        <div class="d-flex mb-2">
                                                            <p class="text-xs mt-1 mb-0 font-weight-bold"
                                                                class="tooltip" style="cursor: default;"
                                                                tooltip="likes, views (for videos), comments, saves, shares ,"
                                                                flow="up">
                                                                <img src="{% static 'images/reddit_logo.png '%}" alt=""
                                                                    style="width:20px;height: 20px;">
                                                                Reddit Engagement
                                                            </p>

                                                        </div>
                                                        <div class="d-flex" style="gap: 10px;margin-left: 20px;">
                                                            <p>Upvote Ratio:</p>
                                                            <h5 class="font-weight-bolder" id="rte-{{p.post_id}}">36K
                                                            </h5>
                                                        </div>
                                                        <div id="reddit-engagement-chart-{{p.post_id}}"></div>

                                                    </div>
                                                    <hr>
                                                    {% endif %}
                                                    <!-- facebook stats -->
                                                    {% if p.has_facebook %}
                                                    <div class="d-flex mb-2">
                                                        <p class="text-xs mt-1 mb-0 font-weight-bold"
                                                            style="cursor: default;">
                                                            <img src="{% static 'images/facebook_logo.png '%}" alt=""
                                                                style="width:20px;height: 20px;">
                                                            Facebook Stats
                                                        </p>
                                                    </div>
                                                    <div style="display: flex;gap: 10px;margin-top: 20px;">
                                                        <div
                                                            style="display: flex;flex-direction: column;justify-content: center;">
                                                            <div>
                                                                <div class="d-flex"
                                                                    style="gap: 10px;margin-left: 20px;">
                                                                    <p>Clicks:</p>
                                                                    <h6 class="font-weight-bolder"
                                                                        id="fb-clicks-{{p.post_id}}">
                                                                    </h6>
                                                                </div>
                                                                <div class="d-flex"
                                                                    style="gap: 10px;margin-left: 20px;">
                                                                    <p>Impressions:</p>
                                                                    <h6 class="font-weight-bolder"
                                                                        id="fb-impressions-{{p.post_id}}">
                                                                    </h6>

                                                                </div>
                                                                <div class="d-flex"
                                                                    style="gap: 10px;margin-left: 20px;">
                                                                    <p>Conversion Rate:</p>
                                                                    <h6 class="font-weight-bolder"
                                                                        id="fb-conv-{{p.post_id}}">
                                                                    </h6>

                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- impression chart  -->
                                                        <div id="fb-impression-chart-{{ p.post_id }}">

                                                        </div>

                                                    </div>
                                                    <!-- countries bar chart -->
                                                    <div id="fb-countries-chart-{{ p.post_id }}"
                                                        style="margin-top: 20px;">

                                                    </div>
                                                    <!-- Age gender bar chart -->
                                                    <div id="fb-age-gender-chart-{{ p.post_id }}"
                                                        style="margin-top: 20px;"></div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- spin -->
                                <div id="spin-{{ p.post_id }}"
                                    style="display: none;justify-content: center;margin-top: 20px;margin-bottom: 20px;padding: 30px;">
                                    <i class="fa fa-spinner fa-spin"></i>
                                </div>

                            </div>

                        </div>


                        {% endif %}
                        {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <script src="{% static 'js/main.js' %}"></script>
        <script src="{% static 'js/website-scan.js' %}"></script>
        <script src="{% static 'js/verify-contact.js' %}"></script>
        <script src="{% static 'js/navigation-router.js' %}"></script>
        <!-- <script src="{% static 'js/upload.js' %}"></script> -->
        <script src="{% static 'js/report-scam.js' %}"></script>
        <script src="{% static 'js/feature-request.js' %}"></script>
        <!-- <script src="{% static 'js/multiselect.js' %}"></script> -->
        <!-- multiselect script -->
        <script>
            const multiSelectInstances = [];


            function initializeMultiSelect() {
                const processedElements = new Set(multiSelectInstances.map(instance => instance.element));
                document.querySelectorAll('[data-multi-select]').forEach(select => {
                    if (!processedElements.has(select)) {
                        const instance = new MultiSelect(select);
                        multiSelectInstances.push(instance);
                    }
                });
            }

            class MultiSelect {
                constructor(element, options = {}) {
                    let defaults = {
                        placeholder: 'Select item(s)',
                        max: null,
                        search: true,
                        selectAll: true,
                        listAll: true,
                        closeListOnItemSelect: false,
                        name: '',
                        width: '',
                        height: '',
                        dropdownWidth: '',
                        dropdownHeight: '',
                        data: [],
                        onChange: function () { },
                        onSelect: function () { },
                        onUnselect: function () { }
                    };
                    this.options = Object.assign(defaults, options);
                    this.selectElement = typeof element === 'string' ? document.querySelector(element) : element;
                    for (const prop in this.selectElement.dataset) {
                        if (this.options[prop] !== undefined) {
                            this.options[prop] = this.selectElement.dataset[prop];
                        }
                    }
                    this.name = this.selectElement.getAttribute('name') ? this.selectElement.getAttribute('name') : 'multi-select-' + Math.floor(Math.random() * 1000000);
                    if (!this.options.data.length) {
                        let options = this.selectElement.querySelectorAll('option');
                        for (let i = 0; i < options.length; i++) {
                            this.options.data.push({
                                value: options[i].value,
                                text: options[i].innerHTML,
                                selected: options[i].selected,
                                html: options[i].getAttribute('data-html')
                            });
                        }
                    }
                    this.element = this._template();
                    this.selectElement.replaceWith(this.element);
                    this._updateSelected();
                    this._eventHandlers();
                }

                _template() {
                    let optionsHTML = '';
                    for (let i = 0; i < this.data.length; i++) {
                        optionsHTML += `
                <div class="multi-select-option${this.selectedValues.includes(this.data[i].value) ? ' multi-select-selected' : ''}" data-value="${this.data[i].value}">
                    <span class="multi-select-option-radio"></span>
                    <span class="multi-select-option-text">${this.data[i].html ? this.data[i].html : this.data[i].text}</span>
                </div>
            `;
                    }
                    let selectAllHTML = '';
                    if (this.options.selectAll === true || this.options.selectAll === 'true') {
                        selectAllHTML = `<div class="multi-select-all">
                <span class="multi-select-option-radio"></span>
                <span class="multi-select-option-text">Select all</span>
            </div>`;
                    }
                    let template = `
            <div class="multi-select ${this.name}"${this.selectElement.id ? ' id="' + this.selectElement.id + '"' : ''} style="${this.width ? 'width:' + this.width + ';' : ''}${this.height ? 'height:' + this.height + ';' : ''}">
                ${this.selectedValues.map(value => `<input type="hidden" name="${this.name}[]" value="${value}">`).join('')}
                <div class="multi-select-header" style="${this.width ? 'width:' + this.width + ';' : ''}${this.height ? 'height:' + this.height + ';' : ''}">
                    <span class="multi-select-header-max">${this.options.max ? this.selectedValues.length + '/' + this.options.max : ''}</span>
                    <span class="multi-select-header-placeholder">${this.placeholder}</span>
                </div>
                <div class="multi-select-options" style="${this.options.dropdownWidth ? 'width:' + this.options.dropdownWidth + ';' : ''}${this.options.dropdownHeight ? 'height:' + this.options.dropdownHeight + ';' : ''}">
                    ${this.options.search === true || this.options.search === 'true' ? '<input type="text" class="multi-select-search" placeholder="Search...">' : ''}
                    ${selectAllHTML}
                    ${optionsHTML}
                </div>
            </div>
        `;
                    let element = document.createElement('div');
                    element.innerHTML = template;
                    return element;
                }

                _eventHandlers() {
                    let headerElement = this.element.querySelector('.multi-select-header');
                    this.element.querySelectorAll('.multi-select-option').forEach(option => {
                        option.onclick = () => {
                            let selected = true;
                            if (!option.classList.contains('multi-select-selected')) {
                                if (this.options.max && this.selectedValues.length >= this.options.max) {
                                    return;
                                }
                                option.classList.add('multi-select-selected');
                                if (this.options.listAll === true || this.options.listAll === 'true') {
                                    if (this.element.querySelector('.multi-select-header-option')) {
                                        let opt = Array.from(this.element.querySelectorAll('.multi-select-header-option')).pop();
                                        opt.insertAdjacentHTML('afterend', `<span class="multi-select-header-option" data-value="${option.dataset.value}">${option.querySelector('.multi-select-option-text').innerHTML}</span>`);
                                    } else {
                                        headerElement.insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option" data-value="${option.dataset.value}">${option.querySelector('.multi-select-option-text').innerHTML}</span>`);
                                    }
                                }
                                this.element.querySelector('.multi-select').insertAdjacentHTML('afterbegin', `<input type="hidden" name="${this.name}[]" value="${option.dataset.value}">`);
                                this.data.filter(data => data.value == option.dataset.value)[0].selected = true;
                            } else {
                                option.classList.remove('multi-select-selected');
                                this.element.querySelectorAll('.multi-select-header-option').forEach(headerOption => headerOption.dataset.value == option.dataset.value ? headerOption.remove() : '');
                                this.element.querySelector(`input[value="${option.dataset.value}"]`).remove();
                                this.data.filter(data => data.value == option.dataset.value)[0].selected = false;
                                selected = false;
                            }
                            if (this.options.listAll === false || this.options.listAll === 'false') {
                                if (this.element.querySelector('.multi-select-header-option')) {
                                    this.element.querySelector('.multi-select-header-option').remove();
                                }
                                headerElement.insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option">${this.selectedValues.length} selected</span>`);
                            }
                            if (!this.element.querySelector('.multi-select-header-option')) {
                                headerElement.insertAdjacentHTML('afterbegin', `<span class="multi-select-header-placeholder">${this.placeholder}</span>`);
                            } else if (this.element.querySelector('.multi-select-header-placeholder')) {
                                this.element.querySelector('.multi-select-header-placeholder').remove();
                            }
                            if (this.options.max) {
                                this.element.querySelector('.multi-select-header-max').innerHTML = this.selectedValues.length + '/' + this.options.max;
                            }
                            if (this.options.search === true || this.options.search === 'true') {
                                this.element.querySelector('.multi-select-search').value = '';
                            }
                            this.element.querySelectorAll('.multi-select-option').forEach(option => option.style.display = 'flex');
                            if (this.options.closeListOnItemSelect === true || this.options.closeListOnItemSelect === 'true') {
                                headerElement.classList.remove('multi-select-header-active');
                            }
                            this.options.onChange(option.dataset.value, option.querySelector('.multi-select-option-text').innerHTML, option);
                            if (selected) {
                                this.options.onSelect(option.dataset.value, option.querySelector('.multi-select-option-text').innerHTML, option);
                            } else {
                                this.options.onUnselect(option.dataset.value, option.querySelector('.multi-select-option-text').innerHTML, option);
                            }
                        };
                    });
                    headerElement.onclick = () => headerElement.classList.toggle('multi-select-header-active');
                    if (this.options.search === true || this.options.search === 'true') {
                        let search = this.element.querySelector('.multi-select-search');
                        search.oninput = () => {
                            this.element.querySelectorAll('.multi-select-option').forEach(option => {
                                option.style.display = option.querySelector('.multi-select-option-text').innerHTML.toLowerCase().indexOf(search.value.toLowerCase()) > -1 ? 'flex' : 'none';
                            });
                        };
                    }
                    if (this.options.selectAll === true || this.options.selectAll === 'true') {
                        let selectAllButton = this.element.querySelector('.multi-select-all');
                        selectAllButton.onclick = () => {
                            let allSelected = selectAllButton.classList.contains('multi-select-selected');
                            this.element.querySelectorAll('.multi-select-option').forEach(option => {
                                let dataItem = this.data.find(data => data.value == option.dataset.value);
                                if (dataItem && ((allSelected && dataItem.selected) || (!allSelected && !dataItem.selected))) {
                                    option.click();
                                }
                            });
                            selectAllButton.classList.toggle('multi-select-selected');
                        };
                    }
                    if (this.selectElement.id && document.querySelector('label[for="' + this.selectElement.id + '"]')) {
                        document.querySelector('label[for="' + this.selectElement.id + '"]').onclick = () => {
                            headerElement.classList.toggle('multi-select-header-active');
                        };
                    }
                    document.addEventListener('click', event => {
                        if (!event.target.closest('.' + this.name) && !event.target.closest('label[for="' + this.selectElement.id + '"]')) {
                            headerElement.classList.remove('multi-select-header-active');
                        }
                    });
                }

                _updateSelected() {
                    if (this.options.listAll === true || this.options.listAll === 'true') {
                        this.element.querySelectorAll('.multi-select-option').forEach(option => {
                            if (option.classList.contains('multi-select-selected')) {
                                this.element.querySelector('.multi-select-header').insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option" data-value="${option.dataset.value}">${option.querySelector('.multi-select-option-text').innerHTML}</span>`);
                            }
                        });
                    } else {
                        if (this.selectedValues.length > 0) {
                            this.element.querySelector('.multi-select-header').insertAdjacentHTML('afterbegin', `<span class="multi-select-header-option">${this.selectedValues.length} selected</span>`);
                        }
                    }
                    if (this.element.querySelector('.multi-select-header-option')) {
                        this.element.querySelector('.multi-select-header-placeholder').remove();
                    }
                }

                get selectedValues() {
                    return this.data.filter(data => data.selected).map(data => data.value);
                }

                get selectedItems() {
                    return this.data.filter(data => data.selected);
                }

                set data(value) {
                    this.options.data = value;
                }

                get data() {
                    return this.options.data;
                }

                set selectElement(value) {
                    this.options.selectElement = value;
                }

                get selectElement() {
                    return this.options.selectElement;
                }

                set element(value) {
                    this.options.element = value;
                }

                get element() {
                    return this.options.element;
                }

                set placeholder(value) {
                    this.options.placeholder = value;
                }

                get placeholder() {
                    return this.options.placeholder;
                }

                set name(value) {
                    this.options.name = value;
                }

                get name() {
                    return this.options.name;
                }

                set width(value) {
                    this.options.width = value;
                }

                get width() {
                    return this.options.width;
                }

                set height(value) {
                    this.options.height = value;
                }

                get height() {
                    return this.options.height;
                }

            }


            // document.querySelectorAll('[data-multi-select]').forEach(select => new MultiSelect(select));


            // Initialize on page load
            document.addEventListener("DOMContentLoaded", initializeMultiSelect);

        </script>
        <!-- general purpose scripts -->

        <script>
            var flairsSelected = false;

            $(document).ready(function () {
                //edit business page
                $(document).on('click', '#edit-profile', function () {

                    $('#business-page').css('display', 'none');
                    $('#edit-business-page').css('display', 'block');

                });
                $(document).on('click', '#ai_enable_btn,#review_page_btn', function () {
                    var formData = new FormData();
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    var set_p = $(this).data('set_up');
                    formData.append('set_p', set_p);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "setting-profile" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);

                            } else {
                                toastr.success('updated successfully');
                                // update html
                                // var tempDiv = $('<div>').html(response);
                                // // Extract the specific element from the new HTML
                                // var newElementContent = tempDiv.find('#feature-reqs').html();

                                // $('#feature-reqs').html(newElementContent);
                                // // initializeMultiSelect();
                                // return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed');
                            console.error(textStatus, errorThrown);
                        }
                    });



                });


                $(document).on('click', '#submit-request-form', function () {
                    var reqTitle = $('#request-title').val();
                    var reqBody = $('#request-details').val();
                    if (reqBody == '' || reqTitle == '') {
                        toastr.error('Please fill of the details');
                        return;
                    };
                    var formData = new FormData();

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('title', reqTitle);
                    formData.append('details', reqBody);
                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "request-feature" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);

                            } else {
                                toastr.success('Submitted successfully');
                                // update html
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#feature-reqs').html();

                                $('#feature-reqs').html(newElementContent);
                                // initializeMultiSelect();
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed');
                            console.error(textStatus, errorThrown);
                        }
                    });



                });

                $(document).on('click', '#cancel-edit', function () {

                    $('#edit-business-page').css('display', 'none');
                    $('#business-page').css('display', 'block');
                });
                $(document).on('click', '#create-post', function () {

                    $('.chat-content').css('display', 'none');
                    $('.quick_links li').each(function () { $(this).removeClass('active') })
                    $('#create-post-content').css('display', 'block');
                });
                // toggle between showing links and creating new link
                $(document).on('click', '#new-link', function () {

                    $('#link-action-title').text('Create a new link');
                    $('#all-inv-links').css('display', 'none');
                    $('#new-link').css('display', 'none');
                    $('#all-links').css('display', 'block');

                    // $('#new-link').toggleClass('inactive-gen-link');
                    // $('#all-links').toggleClass('inactive-gen-link');

                    $('#inv-form').css('display', 'block');
                });
                $(document).on('click', '#all-links', function () {
                    $('#link-action-title').text('All inks');
                    $('#all-inv-links').css('display', 'block');
                    $('#inv-form').css('display', 'none');
                    $('#all-links').css('display', 'none');
                    $('#new-link').css('display', 'block');
                    // $('#new-link').toggleClass('inactive-gen-link');
                    // $('#all-links').toggleClass('inactive-gen-link');

                });
                // sub traffic analytics
                $(document).on('click', '#check_sub_rules', function () {
                    const selectedSubsInstance = multiSelectInstances.find(instance => instance.selectElement.dataset.name === "red_subs");

                    if (!selectedSubsInstance) {
                        // Get selected items
                        toastr.error('Kindly select atleast one subreddit')
                        return;

                    }
                    const selectedItems = selectedSubsInstance.selectedItems.map(item => item.text);
                    // getSelectedOptions();
                    if (selectedItems == '') {
                        toastr.error('Kindly select atleast one subreddit')
                        return;
                    }
                    var formData = new FormData();

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('subs', selectedItems);
                    $('#flair-select').css('display', 'none');
                    $('#wait-flair-spinner').css('display', 'block');

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "check_sub_rules" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);

                            } else {

                                $('#flair-select').css('display', 'block');
                                $('#wait-flair-spinner').css('display', 'none');
                                // update html
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#confirmModalSubInfoCenter').html();

                                $('#confirmModalSubInfoCenter').html(newElementContent);
                                // initializeMultiSelect();
                                $('#confirmModalSubInfoCenter').modal('show');
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get the sub information');
                            $('#flair-select').css('display', 'block');
                            $('#wait-flair-spinner').css('display', 'none');
                            console.error(textStatus, errorThrown);
                        }
                    });

                });
                //reddit flairs
                $(document).on('click', '#edit_flairs', function () {
                    const selectedSubsInstance = multiSelectInstances.find(instance => instance.selectElement.dataset.name === "red_subs");

                    if (!selectedSubsInstance) {
                        // Get selected items
                        toastr.error('Kindly select atleast one subreddit')
                        return;

                    }
                    const selectedItems = selectedSubsInstance.selectedItems.map(item => item.text);
                    // getSelectedOptions();
                    if (selectedItems == '') {
                        toastr.error('Kindly select atleast one subreddit')
                        return;
                    }
                    // upload this to the server to get the flairs
                    $('#flair-select').css('display', 'none');
                    $('#wait-flair-spinner').css('display', 'flex');
                    //post to server
                    var formData = new FormData();

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('subs', selectedItems);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "reddit_flairs" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);

                            } else {
                                $('#flair-select').css('display', 'block');
                                $('#wait-flair-spinner').css('display', 'none');
                                // update html
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#confirmModalFlairCenter').html();

                                $('#confirmModalFlairCenter').html(newElementContent);
                                // initializeMultiSelect();
                                $('#confirmModalFlairCenter').modal('show');

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed retrieve flairs');
                            $('#flair-select').css('display', 'block');
                            $('#wait-flair-spinner').css('display', 'none');
                            console.error(textStatus, errorThrown);
                        }
                    });


                });
                $(document).on('click', '#confirmModalFlairAction', function () {
                    // Iterate over all select elements with the class subreddit-flairs
                    let flairList = []; // List to store the dictionaries
                    var updated = true;
                    $(".subreddit-flairs").each(function () {
                        // Get the selected option's text and value
                        const selectedText = $(this).find("option:selected").text();
                        const selectedValue = $(this).val();
                        var text_f = $(this).attr('id');
                        if (selectedValue == 'none') {
                            var d_id = $(this).find("option:selected").data('id');
                            if (!d_id) {
                                toastr.error(`r/${text_f} misssing flair`);
                                updated = false;
                                return
                            }
                        }
                        flairsSelected = true;
                        // Add a dictionary to the list
                        flairList.push({ name: text_f, id: selectedValue });
                    });
                    if (!updated) {
                        return;
                    };
                    $('#confirmModalFlairCenter').modal('hide');
                    // send these flairs to the database
                    var formData = new FormData();

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('flairs', JSON.stringify(flairList));

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "update_flairs" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);

                            } else {
                                // update html
                                toastr.success('Flairs saved successfully');
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed retrieve flairs');
                            console.error(textStatus, errorThrown);
                        }
                    });


                });

                $(document).on('click', '#create-team-btn', function () {

                    var txt = $('#create-team-btn').text();
                    if (txt == 'Create Team') {
                        $('#create-team-btn').text('Close');
                        $('#available-teams').css('display', 'none');
                        $('#create-team-form').css('display', 'flex');

                        return;
                    }
                    $('#create-team-btn').text('Create Team');
                    $('#create-team-form').css('display', 'none');
                    $('#available-teams').css('display', 'flex');

                });

            });
        </script>
        <script>
            function validateFile() {
                const fileInput = document.getElementById('train-doc-file');
                const file = fileInput.files[0];
                if (file && file.type !== 'application/pdf') {
                    toastr.error('Please upload a PDF file.');
                    fileInput.value = ''; // Clear the invalid file
                }
            }
        </script>

        <!-- update business page -->
        <script>
            var max_duration_tiktok = 0

            // Function to get selected values for each instance
            // Function to get selected values for each instance
            function getSelectedOptions() {
                multiSelectInstances.forEach((instance, index) => {
                    const selectedValues = instance.selectedValues; // Array of selected values
                    const selectedItems = instance.selectedItems; // Array of selected data objects

                    console.log(`Selected options for instance ${instance.selectElement.id}:`, selectedValues);
                    // If you need more information, use selectedItems instead
                    // console.log(`Selected items (detailed) for instance ${index + 1}:`, selectedItems);
                });
            }

            // Usage: Call this function when you need to retrieve selected options
            // Usage example


            // grab-content scripts POST/GET
            function getCSRFToken() {
                return $('meta[name="csrfmiddlewaretoken"]').val();
            }

            $(document).ready(function () {
                toastr.options = {
                    'closeButton': true,
                    'debug': false,
                    'newestOnTop': false,
                    'progressBar': false,
                    'positionClass': 'toast-top-right',
                    'preventDuplicates': false,
                    'showDuration': '1000',
                    'hideDuration': '1000',
                    'timeOut': '5000',
                    'extendedTimeOut': '1000',
                    'showEasing': 'swing',
                    'hideEasing': 'linear',
                    'showMethod': 'fadeIn',
                    'hideMethod': 'fadeOut',
                };
                // ---------------------------------HELP-------------------------------------- 
                $(document).on('click', '#help', function () {
                    $('.chat-content').hide();
                    $('#help-content').show()
                });

                // ---------------------------------INTEGRATION GUIDE-------------------------------------- 
                $(document).on('click', '#integration', function () {
                    $('.chat-content').hide();
                    $('#integration-content').show()
                });
                // ---------------------------------DRAFTS-------------------------------------- 
                $(document).on('click', '#drafts', function () {
                    $('.chat-content').hide();
                    $('#drafts-content').show()
                });
                // -----------------------------------PRIVATE MESSAGES-----------------------------

                $(document).on('click', '.pm-box', function () {
                    var platform = $(this).data('platform');
                    $('#pm-icon-wait').hide();
                    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

                    // fetch data in the server 
                    var formData = new FormData();
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('platform', platform);
                    formData.append('timezone', timezone);

                    $('#pm-container').css('display', 'none');
                    $('#pm-inbox').css('display', 'none');
                    $('#pm-inbox-wait').css('display', 'flex');

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "get_pms" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);
                                $('#pm-container').css('display', 'block');
                                $('#pm-inbox').css('display', 'none');
                                $('#pm-inbox-wait').css('display', 'none');
                            } else {
                                // alert(platform);

                                // update html
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#pm-inbox').html();

                                $('#pm-inbox').html(newElementContent);
                                // initializeMultiSelect();
                                var icn_type = $('#pm-icon');
                                icn_type.removeClass();
                                switch (platform) {
                                    case 'facebook':
                                        icn_type.addClass('fa fa-facebook');
                                        break;
                                    case 'instagram':
                                        icn_type.addClass('fa fa-instagram');
                                        break;
                                    case 'reddit':
                                        icn_type.addClass('fa fa-reddit');
                                        break;
                                    case 'chatbot':
                                        icn_type.addClass('fas fa-robot');
                                        break;
                                }

                                $('#pm-container').css('display', 'none');
                                $('#pm-inbox').css('display', 'flex');
                                $('#pm-inbox-wait').css('display', 'none');

                                // start loop to query conversations
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get messages.');
                            $('#pm-container').css('display', 'block');
                            $('#pm-inbox').css('display', 'none');
                            $('#pm-inbox-wait').css('display', 'none');
                            console.error(textStatus, errorThrown);
                        }
                    });



                });
                $(document).on('click', '#pm-back-platforms', function () {
                    $('#pm-container').css('display', 'block');
                    $('#pm-inbox').css('display', 'none');

                    // alert(platform);
                });
                $(document).on('click', '.pm-chat-item', function () {
                    $('.pm-chat-item').each(function () {
                        $(this).removeClass('pm-chat-active');
                    })
                    $(this).addClass('pm-chat-active');
                    var conv_id = $(this).data('conv_id');
                    var sender_id = $(this).data('sender_id');
                    var platform = $(this).data('platform');
                    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

                    // fetch data in the server 
                    var formData = new FormData();
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('platform', platform);
                    formData.append('timezone', timezone);
                    formData.append('conv_id', conv_id);
                    formData.append('sender_id', sender_id);

                    $('#pm-chat-info').text('Loading conversation...')
                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "get_messages" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);
                                $('#pm-chat-info').text('Failed to load')

                            } else {
                                $('#pm-chat-info').text('Conversations empty')
                                // alert(platform);

                                // update html
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#pm-messages').html();

                                $('#pm-messages').html(newElementContent);
                                // initializeMultiSelect();
                                setTimeout(function () {
                                    var scrollableDiv = $('#pm-chat-elem');
                                    scrollableDiv.scrollTop(scrollableDiv[0].scrollHeight);
                                    return;
                                }, 2)

                                // start a loop of querying the db

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get messages.');
                            $('#pm-chat-info').text('Failed to load')
                            console.error(textStatus, errorThrown);
                        }
                    });



                });
                $(document).on('click', '#pm-reply-button', function () {
                    var convers_id = $(this).data('conv_id');
                    var recipient_id = $(this).data('recipient_id');
                    var platform = $(this).data('platform');
                    var input_text = $('#reply-pm-message').val();

                    if (input_text == '') { return; }
                    // send to the server
                    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('conversation_id', convers_id);
                    formData.append('message', input_text);
                    formData.append('platform', platform);
                    formData.append('recipient_id', recipient_id);
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('timezone', timezone);
                    $('#reply-pm-message').val('');

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "reply_pm" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);

                            } else {
                                // update chats
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#pm-messages').html();

                                $('#pm-messages').html(newElementContent);
                                // initializeMultiSelect();
                                setTimeout(function () {
                                    var scrollableDiv = $('#pm-chat-elem');
                                    scrollableDiv.scrollTop(scrollableDiv[0].scrollHeight);
                                    return;
                                }, 2)



                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            $(`#spin-${comment_id}`).css('display', 'none');
                            toastr.error('Failed to send');
                        }
                    });



                });


                // ---------------------------------REVIEWS-------------------------------------- 
                $(document).on('click', '#apply-filters,#reviews,.pub-unpub', function () {
                    const filterInstance = multiSelectInstances.find(instance => instance.selectElement.dataset.name === "filters");
                    if (!filterInstance) {
                        return;

                    }
                    var review_id_publish = $(this).data('pub_id');
                    const selectedItems = filterInstance.selectedItems.map(item => item.text);
                    // getSelectedOptions();
                    $('#apply-filters').css('display', 'none');
                    $('#apply-loading').css('display', 'block');
                    var formData = new FormData();
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('filters', selectedItems);
                    if (review_id_publish) {
                        formData.append('review_id_publish', review_id_publish);
                    }
                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "get_reviews" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);
                                $('#apply-filters').css('display', 'block');
                                $('#apply-loading').css('display', 'none');

                            } else {
                                $('.chat-content').hide();

                                // update html
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#company-reviews').html();

                                $('#company-reviews').html(newElementContent);
                                // initializeMultiSelect();
                                $('#reviews-content').show()
                                $('#apply-filters').css('display', 'block');
                                $('#apply-loading').css('display', 'none');

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to submit form.');
                            $('#apply-filters').css('display', 'block');
                            $('#apply-loading').css('display', 'none');

                            console.error(textStatus, errorThrown);
                        }
                    });


                });
                // ---------------------------------ISSUES & REQUESTS-------------------------------------- 
                $(document).on('click', '#requests', function () {
                    $('.chat-content').hide();
                    $('#feature-request').show()
                });

                // -----------------------------------BUSINESS PROFILE ---------------------------------------
                $(document).on('click', '#business-prof', function () {
                    $('.chat-content').hide();
                    $('#business-page').show()
                });


                $('#image-input').on('change', function (event) {
                    const file = event.target.files[0]; // Get the selected file

                    // Check if a file is selected and if it's an image
                    if (file && file.type.startsWith('image/')) {
                        const reader = new FileReader();

                        // When the file is read successfully
                        reader.onload = function (e) {
                            // Create an image element and set its source to the file data
                            $('#image-container').attr('src', e.target.result);

                        };
                        // Read the file as a Data URL (base64)
                        reader.readAsDataURL(file);
                    } else {
                        // If the file is not an image, reset the container content
                        toastr.error("Error: Could not upload file");
                    }
                });

                // create team
                $(document).on('click', '#finish-create-form', function () {
                    // Create a new FormData object
                    var formData = new FormData();

                    var team_name = $('#team-name').val();
                    var team_desc = $('#team-description').val();

                    if (team_desc == '' || team_name == '') {
                        toastr.error('Kindly fill all the details');
                        return;
                    }

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('team_name', team_name);
                    formData.append('team_about', team_desc);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "create-team" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);

                            } else {
                                toastr.success('Team created successfully');
                                // update html
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-content').html();

                                $('#teams-content').html(newElementContent);
                                // initializeMultiSelect();

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to submit form.');
                            console.error(textStatus, errorThrown);
                        }
                    });
                });

                // delete team
                $(document).on('click', '.d-team', function () {
                    var t_id = $(this).attr('id');
                    $('#confirmModalTitle').text('Delete ?');
                    var team_name = $(this).data('placeholder');
                    var bdy = 'Are you sure you want to permanently delete team ' + team_name
                    $('#confirmModalBody').text(bdy);
                    $('#confirmModalAction').data('placeholder', t_id);

                    $('#forbiddenModalAction').removeClass();
                    $('#forbiddenModalAction').text('Delete');
                    $('#forbiddenModalAction').addClass('btn btn-danger');

                    $('#confirmModalAction').removeClass();
                    $('#confirmModalAction').text('Delete');
                    $('#confirmModalAction').addClass('btn btn-danger');
                    $('#confirmModalCenter').modal('show');
                });

                // confirm delete
                $(document).on('click', '#confirmModalAction', function () {
                    var t_id = $(this).data('placeholder');
                    // Create a new FormData object
                    var formData = new FormData();

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('team_id', t_id);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "delete-team" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);
                                toastr.error('Failed to submit form.');
                                $('#confirmModalCenter').modal('hide');
                            } else {
                                toastr.success('Team deleted successfully');
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-content').html();

                                $('#teams-content').html(newElementContent);
                                // initializeMultiSelect();
                                $('#confirmModalCenter').modal('hide');
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to submit form.');
                            $('#confirmModalCenter').modal('hide');
                            console.error(textStatus, errorThrown);
                        }
                    });
                });

                // update bus profile
                $(document).on('click', '#update-profile', function () {

                    // Create a new FormData object
                    var formData = new FormData();
                    // Append image file to FormData
                    try {
                        var imageFile = $('#image-input')[0].files[0];
                        formData.append('image', imageFile);

                    } catch (e) {
                        alert(e);

                    }

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('email', $('#update-email').val());
                    formData.append('phone', $('#update-phone').val());
                    formData.append('about', $('#update-about').val());
                    formData.append('website', $('#update-website').val());
                    formData.append('whatsapp', $('#update-whatsapp').val());
                    formData.append('instagram', $('#update-instagram').val());
                    formData.append('facebook', $('#update-facebook').val());
                    formData.append('tiktok', $('#update-tiktok').val());
                    formData.append('youtube', $('#update-youtube').val());
                    formData.append('twitter', $('#update-twitter').val());
                    formData.append('linkedin', $('#update-linkedin').val());
                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "update-profile" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['updated']) {
                                toastr.success('Successfully updated profile');
                                // time for 2 seconds
                                setTimeout(() => {
                                    window.location.reload();
                                }, 1000);

                            } else {
                                toastr.error('Failed to update profile');
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            alert('Failed to submit form.');
                            console.error(textStatus, errorThrown);
                        }
                    });
                })

                // grab post content fetch comments
                $(document).on('click', '#post-btn,.refresh-post', function () {

                    // Create a new FormData object
                    var formData = new FormData();
                    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('timezone', timezone);
                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "fetch-posts" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error('Failed to get current posts');

                            } else {
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#post-content').html();

                                $('#post-content').html(newElementContent);
                                $('.chat-content').hide();
                                $('#post-content').show()
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to submit form.');
                            console.error(textStatus, errorThrown);
                        }
                    });
                });

                $(document).on('click', '#teams-btn', function () {
                    // Create a new FormData object
                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "fetch-team" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-content').html();
                                $('#teams-content').html(newElementContent);
                                $('.chat-content').hide();
                                $('#teams-content').show();

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to submit form.');
                            console.error(textStatus, errorThrown);
                        }
                    });
                });

                $(document).on('scrollToBottom', function () {
                    var scrollableDiv = $('#chat-elem');
                    scrollableDiv.scrollTop(scrollableDiv[0].scrollHeight);
                    var scrollableDiv = $('#pm-chat-elem');
                    scrollableDiv.scrollTop(scrollableDiv[0].scrollHeight);
                });
                function sendMessage() {
                    var formData = new FormData();
                    var team_id = $('#team-id').text();
                    var input_message = $('#input-message').val();

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('team_id', team_id);
                    formData.append('message', input_message);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "send-chat" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error('Failed to submit form.');

                            } else {
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#chat-box').html();
                                $('#chat-box').html(newElementContent);
                                $(document).trigger('scrollToBottom');
                                // initializeMultiSelect();

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to submit form.');
                            console.error(textStatus, errorThrown);
                        }
                    });

                }
                // send chat when enter btn is clicked
                $(document).on('keydown', '#input-message', function () {
                    // Check if the Enter key (key code 13) was pressed
                    if (event.key === "Enter") {
                        var input_message = $('#input-message').val();
                        if (input_message == '') {
                            return;
                        }
                        sendMessage(); // 
                        event.preventDefault(); // Prevent default action (optional, for forms)
                    }
                });
                // send chat when arrow is clicked
                $(document).on('click', '#send-chat', function () {
                    var input_message = $('#input-message').val();
                    if (input_message == '') {
                        return;
                    }
                    sendMessage();
                });

                $(document).on('click', '.user-details', function () {
                    $(this).parent().toggleClass('active');
                });

                // announcement 
                $(document).on('click', '#new-announce-btn', function () {
                    $('#announce-list').hide();
                    $('#new-announce-btn').hide();
                    $('#announce-create').show();
                    $('#back-announce-btn').show();
                });
                $(document).on('click', '#back-announce-btn', function () {
                    $('#announce-create').hide();
                    $('#back-announce-btn').hide();
                    $('#announce-list').show();
                    $('#new-announce-btn').show();
                });

                // ------------end announce switch---
                // files add-files-btn
                $(document).on('click', '#add-files-btn', function () {
                    $('#view-team-files').hide();
                    $('#add-files-btn').hide();
                    $('#add-files').show();
                    $('#back-files-btn').show();
                });
                $(document).on('click', '#back-files-btn', function () {
                    $('#add-files').hide();
                    $('#back-files-btn').hide();
                    $('#view-team-files').show();
                    $('#add-files-btn').show();
                });
                // like comment
                $(document).on('click', '.like-comment', function () {
                    var comment_id = $(this).data('id');
                    var comment_level = $(this).data('comment_level');
                    $(`#like-icon-${comment_id}`).css('color', 'red');
                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('comment_id', comment_id);
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('comment_level', comment_level);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "like_comment" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);
                                $(`#like-icon-${comment_id}`).css('color', 'grey');

                            } else {
                                $(`#like-icon-${comment_id}`).css('color', 'red');
                                var vl = parseInt($(`#like-${comment_id}`).text()) + 1;
                                $(`#like-${comment_id}`).text(vl);
                                // initializeMultiSelect();
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to upvote comment');
                        }
                    });



                });

                // reply to comment
                $(document).on('click', '.post-comment-update', function () {
                    var txt = $(this).siblings('.form-control').val();
                    if (txt == '') {
                        return;
                    }
                    var btn_status = $(this).text();
                    if (btn_status == 'Posting...') { return; }
                    var btn = $(this);
                    btn.text('Posting...')
                    var comment_id = $(this).data('comment_id');
                    var post_id = $(this).data('post_id');
                    var comment_level = $(this).data('comment_level');
                    var org_comment = $(this).data('original_comment');

                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('comment_id', comment_id);
                    formData.append('comment', txt);
                    formData.append('post_id', post_id);
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('comment_level', comment_level);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "post_comment" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                toastr.success('Comment posted');
                                // delete the text area value
                                $(`#textarea-${comment_id}`).val('');
                                btn.text('Post comment');
                                var tempDiv = $('<div>').html(response);
                                //Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find(`#post-comment-box-${post_id}`).html();
                                $(`#post-comment-box-${post_id}`).html(newElementContent);
                                $(`#post-comment-box-${post_id}`).css('display', 'block');
                                if (comment_level == 'comment-reply') {
                                    $(`#comment-reply-container-box-${org_comment}`).css('display', 'block');
                                } else {
                                    $(`#comment-reply-container-box-${comment_id}`).css('display', 'block');
                                }

                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            $(`#spin-${post_id}`).css('display', 'none');
                            toastr.error('Failed send comment');
                        }
                    });


                });

                // retrieve comments
                $(document).on('click', '.comments-container', function () {
                    var post_id = $(this).data('id');
                    $(`#spin-${post_id}`).css('display', 'flex');
                    $(`#impression-analysis-${post_id}`).css('display', 'none');
                    var comments_displayed = $(`#post-comment-box-${post_id}`).css('display');
                    if (comments_displayed == 'block') {
                        // close comment box 
                        $(`#spin-${post_id}`).css('display', 'none');
                        $(`#post-comment-box-${post_id}`).css('display', 'none');
                        return;

                    }

                    $(`#post-comment-box-${post_id}`).css('display', 'none');

                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('post_id', post_id);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "get_post_comments" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                // update charts
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find(`#post-comment-box-${post_id}`).html();

                                $(`#post-comment-box-${post_id}`).html(newElementContent);
                                $(`#spin-${post_id}`).css('display', 'none');
                                $(`#impression-analysis-${post_id}`).css('display', 'none');
                                $(`#post-comment-box-${post_id}`).css('display', 'block');
                                // initializeMultiSelect();
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            $(`#spin-${post_id}`).css('display', 'none');
                            toastr.error('Failed to get comments');
                        }
                    });


                    this.scrollIntoView({
                        behavior: 'smooth', // Smooth scrolling
                        block: 'start' // Align to the top of the viewport
                    }); var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('comment_id', comment_id);
                    formData.append('company_id', '{{ company_id }}');

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "get_comment_replies" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                // update charts
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML

                                var newElementContent = tempDiv.find(`#comment-reply-container-box-${comment_id}`).html();
                                $(`#comment-reply-container-box-${comment_id}`).html(newElementContent);
                                // initializeMultiSelect();
                                $(`#spin-${comment_id}`).css('display', 'none');
                                var repdisp = $(`#comment-reply-container-box-${comment_id}`).css('display');
                                if (repdisp == 'block') {
                                    $(`#comment-reply-container-box-${comment_id}`).css('display', 'none');
                                }
                                else {
                                    $(`#comment-reply-container-box-${comment_id}`).css('display', 'block');
                                }
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            $(`#spin-${comment_id}`).css('display', 'none');
                            toastr.error('Failed to get comments');
                        }
                    });



                    setTimeout(() => {
                        window.scrollBy({
                            top: -800, // Move 800px upward
                            behavior: 'smooth'
                        });
                    }, 500);
                });

                // open comment reply box - fetch replies
                $(document).on('click', '.comments-reply-container', function () {
                    var comment_id = $(this).data('id');
                    var reply_count = $(this).data('count');
                    var post_id = $(this).data('post');
                    var cmt_cnt_disp = $(`#comment-reply-container-box-${comment_id}`).css('display')
                    if (cmt_cnt_disp == 'block') {
                        $(`#comment-reply-container-box-${comment_id}`).css('display', 'none');
                        return;
                    }
                    $(`#spin-${comment_id}`).css('display', 'flex');
                    $(`#comment-reply-container-box-${comment_id}`).css('display', 'none');

                    // get comments from the server
                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('comment_id', comment_id);
                    formData.append('company_id', '{{ company_id }}');

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "get_comment_replies" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                // update charts
                                var tempDiv = $('<div>').html(response);
                                // Extract the specific element from the new HTML

                                var newElementContent = tempDiv.find(`#comment-reply-container-box-${comment_id}`).html();
                                $(`#comment-reply-container-box-${comment_id}`).html(newElementContent);
                                // initializeMultiSelect();
                                $(`#spin-${comment_id}`).css('display', 'none');
                                var repdisp = $(`#comment-reply-container-box-${comment_id}`).css('display');
                                if (repdisp == 'block') {
                                    $(`#comment-reply-container-box-${comment_id}`).css('display', 'none');
                                }
                                else {
                                    $(`#comment-reply-container-box-${comment_id}`).css('display', 'block');
                                }
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            $(`#spin-${comment_id}`).css('display', 'none');
                            toastr.error('Failed to get comments');
                        }
                    });



                });

                // open 2nd comment reply box- fetch replies
                $(document).on('click', '.second-reply-comment', function () {
                    var repdisp = $(this).parent().siblings('.second-replies-comment').css('display');
                    if (repdisp == 'block') {
                        $(this).parent().siblings('.second-replies-comment').css('display', 'none');
                    }
                    else {
                        $(this).parent().siblings('.second-replies-comment').css('display', 'block');
                    }

                });

                // get analyitics
                $(document).on('click', '.impression-container', function () {
                    var post_id = $(this).attr('id');
                    var disp = $(`#impression-analysis-${post_id}`).css('display');
                    // var disp = $(this).closest('.action-bar').siblings('.impression-analysis').css('display');
                    if (disp == 'block') {
                        $(`#impression-analysis-${post_id}`).css('display', 'none');
                        return;
                    }
                    $(`#spin-${post_id}`).css('display', 'flex');
                    $(`#impression-analysis-${post_id}`).css('display', 'none');
                    $(`#post-comment-box-${post_id}`).css('display', 'none');
                    // get data from backend

                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('post_id', post_id);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "get_post_stats" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                // update charts
                                $(`#spin-${post_id}`).css('display', 'none');
                                $(`#impression-analysis-${post_id}`).css('display', 'block');
                                $(`#post-comment-box-${post_id}`).css('display', 'none');
                                $(`#chart-pie-${post_id}`).empty();
                                var ctx = document.getElementById(`chart-pie-${post_id}`);
                                var chartPie = new ApexCharts(ctx, {
                                    chart: {
                                        width: 380,
                                        type: 'donut',
                                    },
                                    dataLabels: {
                                        enabled: false
                                    },
                                    plotOptions: {
                                        pie: {
                                            customScale: 1,
                                            expandOnClick: false,
                                            donut: {
                                                size: "80%",
                                            }
                                        },
                                    },
                                    legend: {
                                        position: "right",
                                        verticalAlign: "center",
                                        containerMargin: {
                                            left: 35,
                                            right: 60
                                        }
                                    },
                                    series: response['platform_engagement'],
                                    labels: response['pltfrms'],
                                    colors: ['#00ab55', '#00ab5599', '#00ab5550', '#00ab5535',],
                                    donut: {
                                        size: "100%"
                                    },
                                    responsive: [
                                        {
                                            breakpoint: 1550,
                                            options: {
                                                chart: {
                                                    width: 340,
                                                },
                                                legend: {
                                                    position: "bottom",
                                                    verticalAlign: "bottom",
                                                    containerMargin: {
                                                        left: 'auto',
                                                        right: 'auto'
                                                    }
                                                },
                                            }
                                        },
                                        {
                                            breakpoint: 1450,
                                            options: {
                                                chart: {
                                                    width: 300,
                                                },
                                            }
                                        }
                                    ]
                                });

                                chartPie.render();
                                // reddit engagement
                                if (response['has_reddit']) {
                                    $(`#rte-${post_id}`).text(response['reddit_total_engagement']);
                                    var options = {
                                        series: [{
                                            name: 'Upvotes',
                                            data: response['reddit_upvotes']
                                        }, {
                                            name: 'Crossposts ',
                                            data: response['reddit_crossposts']
                                        }, {
                                            name: 'Comments',
                                            data: response['reddit_comments']
                                        }],
                                        dataLabels: {
                                            enabled: false // Disable data labels
                                        },
                                        chart: {
                                            type: 'bar',
                                            width: 500,
                                            stacked: true,
                                            toolbar: {
                                                show: true
                                            },
                                            zoom: {
                                                enabled: true
                                            }
                                        },
                                        responsive: [{
                                            breakpoint: 480,
                                            options: {
                                                legend: {
                                                    position: 'bottom',
                                                    offsetX: -10,
                                                    offsetY: 0
                                                }
                                            }
                                        }],
                                        plotOptions: {
                                            bar: {
                                                horizontal: true,
                                                dataLabels: {
                                                    total: {
                                                        enabled: true,
                                                        style: {
                                                            fontSize: '10px',
                                                            fontWeight: 900
                                                        }
                                                    }
                                                }
                                            },
                                        },
                                        xaxis: {
                                            type: 'text',
                                            categories: response['reddit_subs'],
                                        },
                                        legend: {
                                            position: 'right',
                                            offsetY: 40
                                        },
                                        fill: {
                                            opacity: 1
                                        }
                                    };
                                    $(`#reddit-engagement-chart-${post_id}`).empty();
                                    var engagementChart = new ApexCharts(document.querySelector(`#reddit-engagement-chart-${post_id}`), options);
                                    engagementChart.render();
                                }

                                // impression dist for facebook instagram reddit and tiktok
                                if (response['has_facebook']) {
                                    $(`#fb-impressions-${post_id}`).text(response['fb_impressions']);
                                    $(`#fb-clicks-${post_id}`).text(response['fb_clicks']);
                                    $(`#fb-conv-${post_id}`).text(response['fb_conversion_rate']);

                                    // FACEBOOK GRAPHS
                                    dts = response['impression_dist']
                                    var series = [];
                                    var labels = ['Fans', 'Unique', 'Organic', 'Paid(Ad.)', 'Viral', 'Non Viral']
                                    if (dts['has_data']) {
                                        series = [dts['impression_fans'], dts['impression_uniques'], dts['impression_organic'], dts['impression_paid'], dts['impression_viral'], dts['impression_nonviral']];
                                    }
                                    if (response['is_media_video']) {
                                        series = [dts['impression_fans'], dts['impression_uniques'], dts['impression_organic'], dts['impression_paid'], dts['impression_viral']];
                                        labels = ['Fans', 'Unique', 'Organic', 'Paid(Ad.)', 'Viral']
                                    }
                                    var options = {
                                        series: series,
                                        chart: {
                                            width: 330,
                                            type: 'pie',
                                        },
                                        labels: labels,
                                        title: {
                                            text: 'Impression Source', // Title text
                                            align: 'right', // Alignment: 'left', 'center', or 'right'
                                            margin: 0, // Margin around the title
                                            offsetX: 0, // Horizontal offset
                                            offsetY: 0, // Vertical offset
                                            floating: false, // Floating title or not
                                        },
                                        noData: {
                                            text: 'No data available. Check back later', // Message to display
                                            align: 'center',           // Align text
                                            verticalAlign: 'middle',   // Vertically center the text
                                            offsetX: 0,
                                            offsetY: 0,
                                        },

                                        grid: {
                                            show: true,
                                            borderColor: '#e0e0e0',
                                            strokeDashArray: 4
                                        },
                                        noData: {
                                            text: 'No data available',
                                            align: 'center',
                                            verticalAlign: 'middle',
                                            style: {
                                                color: '#888',
                                                fontSize: '14px'
                                            }
                                        },
                                        responsive: [{
                                            breakpoint: 480,
                                            options: {
                                                chart: {
                                                    width: 200
                                                },
                                                legend: {
                                                    position: 'bottom'
                                                }
                                            }
                                        }]
                                    };

                                    var chart = new ApexCharts(document.querySelector(`#fb-impression-chart-${post_id}`), options);
                                    chart.render();

                                    if (response['is_media_video']) {
                                        $(`#video-summary-${post_id}`).css('display', 'block');
                                        $(`#fb-clicks-${post_id}`).siblings('p').text('Views');
                                        $(`#fb-clicks-${post_id}`).text(response['fb_video_data']['total_views']);
                                        if (!response['impression_dist']['has_data']) {

                                            // no retention data
                                            var options = {
                                                series: [],
                                                chart: {
                                                    type: 'area',
                                                    height: 350,
                                                    zoom: {
                                                        enabled: false
                                                    }
                                                },
                                                dataLabels: {
                                                    enabled: false
                                                },
                                                noData: {
                                                    text: 'No data available. Check back later', // Message to display
                                                    align: 'center',           // Align text
                                                    verticalAlign: 'middle',   // Vertically center the text
                                                    offsetX: 0,
                                                    offsetY: 0,
                                                },
                                                stroke: {
                                                    curve: 'straight'
                                                },

                                                title: {
                                                    text: 'Viewer Retention',
                                                    align: 'left'
                                                },
                                                subtitle: {
                                                    text: 'No. of views per minute',
                                                    align: 'left'
                                                },
                                                labels: ["1'", "2'", "3'", "4'", "5'", "6'", "7'", "8'", "9'"],
                                                yaxis: {
                                                    opposite: true
                                                },
                                                legend: {
                                                    horizontalAlign: 'left'
                                                }
                                            };
                                            var chart = new ApexCharts(document.querySelector(`#fb-video-watch-${post_id}`), options);
                                            chart.render();

                                            //  No country data
                                            var options = {
                                                series: [],
                                                chart: {
                                                    type: 'bar',
                                                    height: 350
                                                },
                                                title: {
                                                    text: 'Views by Country',
                                                    align: 'left'
                                                },
                                                noData: {
                                                    text: 'No data available. Check back later', // Message to display
                                                    align: 'center',           // Align text
                                                    verticalAlign: 'middle',   // Vertically center the text
                                                    offsetX: 0,
                                                    offsetY: 0,
                                                },
                                                plotOptions: {
                                                    bar: {
                                                        borderRadius: 4,
                                                        borderRadiusApplication: 'end',
                                                        horizontal: true,
                                                    }
                                                },
                                                dataLabels: {
                                                    enabled: false
                                                },

                                            };
                                            var chart = new ApexCharts(document.querySelector(`#fb-countries-chart-${post_id}`), options);
                                            chart.render();

                                            // No Age gender data
                                            var options = {
                                                series: [],
                                                chart: {
                                                    type: 'bar',
                                                    height: 430
                                                },
                                                title: {
                                                    text: 'Views by Age & Gender',
                                                    align: 'left'
                                                },
                                                noData: {
                                                    text: 'No data available. Check back later', // Message to display
                                                    align: 'center',           // Align text
                                                    verticalAlign: 'middle',   // Vertically center the text
                                                    offsetX: 0,
                                                    offsetY: 0,
                                                },
                                                plotOptions: {
                                                    bar: {
                                                        horizontal: false,
                                                        dataLabels: {
                                                            position: 'top',
                                                        },
                                                    }
                                                },
                                                dataLabels: {
                                                    enabled: true,
                                                    offsetX: -6,
                                                    style: {
                                                        fontSize: '12px',
                                                        colors: ['#fff']
                                                    }
                                                },
                                                stroke: {
                                                    show: true,
                                                    width: 1,
                                                    colors: ['#fff']
                                                },
                                                tooltip: {
                                                    shared: true,
                                                    intersect: false
                                                },

                                            };
                                            var chart = new ApexCharts(document.querySelector(`#fb-age-gender-chart-${post_id}`), options);
                                            chart.render();

                                        }
                                        else {
                                            $(`#twt-${post_id}`).text(response['fb_video_data']['total_watch_time']);
                                            $(`#awt-${post_id}`).text(response['fb_video_data']['average_watch_time']);
                                            $(`#cr-${post_id}`).text(response['fb_video_data']['total_video_consumption_rate']);
                                            $(`#tpc-${post_id}`).text(response['fb_video_data']['video_play_count']);
                                            // video watch time

                                            var watch_series = [];
                                            var watch_labels = [];
                                            if (response['fb_video_data']['video_retention_data'].length > 0) {
                                                watch_labels = response['fb_video_data']['video_retention_labels'];
                                                watch_series = response['fb_video_data']['video_retention_data'];
                                            }

                                            var options = {
                                                series: [{
                                                    name: "Percentage of initial Views ",
                                                    data: watch_series
                                                }],
                                                chart: {
                                                    type: 'area',
                                                    height: 350,
                                                    zoom: {
                                                        enabled: false
                                                    }
                                                },
                                                noData: {
                                                    text: 'No data available. Check back later', // Message to display
                                                    align: 'center',           // Align text
                                                    verticalAlign: 'middle',   // Vertically center the text
                                                    offsetX: 0,
                                                    offsetY: 0,
                                                },
                                                dataLabels: {
                                                    enabled: false
                                                },
                                                stroke: {
                                                    curve: 'straight'
                                                },

                                                title: {
                                                    text: 'Viewer Retention',
                                                    align: 'left'
                                                },
                                                subtitle: {
                                                    text: '%. of views per minute',
                                                    align: 'left'
                                                },
                                                labels: watch_labels,
                                                yaxis: {
                                                    opposite: true
                                                },
                                                legend: {
                                                    horizontalAlign: 'left'
                                                }
                                            };

                                            var chart = new ApexCharts(document.querySelector(`#fb-video-watch-${post_id}`), options);
                                            chart.render();

                                            var country_series = [];
                                            var x_axis_data = {};
                                            if (response['fb_video_data']['viewers_countries'].length > 0) {
                                                country_series = [{
                                                    name: "Views",
                                                    data: response['fb_video_data']['country_values']
                                                }];
                                                x_axis_data = {
                                                    categories: response['fb_video_data']['country_keys'],
                                                };

                                            }
                                            // fb country
                                            var options = {
                                                series: country_series,
                                                chart: {
                                                    type: 'bar',
                                                    height: 350
                                                },
                                                title: {
                                                    text: 'Views by Country',
                                                    align: 'left'
                                                },
                                                noData: {
                                                    text: 'No data available. Check back later', // Message to display
                                                    align: 'center',           // Align text
                                                    verticalAlign: 'middle',   // Vertically center the text
                                                    offsetX: 0,
                                                    offsetY: 0,
                                                },
                                                plotOptions: {
                                                    bar: {
                                                        borderRadius: 4,
                                                        borderRadiusApplication: 'end',
                                                        horizontal: true,
                                                    }
                                                },
                                                dataLabels: {
                                                    enabled: false
                                                },
                                                xaxis: x_axis_data
                                            };

                                            var chart = new ApexCharts(document.querySelector(`#fb-countries-chart-${post_id}`), options);
                                            chart.render();


                                            // fb age gender
                                            var age_gender_labels = [];
                                            var age_gender_series = [];
                                            if (response['fb_video_data']['age_values'].length > 0) {
                                                age_gender_labels = response['fb_video_data']['age_keys'];
                                                age_gender_series = response['fb_video_data']['age_values'];
                                            }
                                            var options = {
                                                series: age_gender_series,
                                                chart: {
                                                    type: 'bar',
                                                    height: 430
                                                },
                                                title: {
                                                    text: 'Views by Age & Gender',
                                                    align: 'left'
                                                },
                                                noData: {
                                                    text: 'No data available. Check back later', // Message to display
                                                    align: 'center',           // Align text
                                                    verticalAlign: 'middle',   // Vertically center the text
                                                    offsetX: 0,
                                                    offsetY: 0,
                                                },
                                                plotOptions: {
                                                    bar: {
                                                        horizontal: false,
                                                        dataLabels: {
                                                            position: 'top',
                                                        },
                                                    }
                                                },
                                                dataLabels: {
                                                    enabled: true,
                                                    offsetX: -6,
                                                    style: {
                                                        fontSize: '12px',
                                                        colors: ['#fff']
                                                    }
                                                },
                                                stroke: {
                                                    show: true,
                                                    width: 1,
                                                    colors: ['#fff']
                                                },
                                                tooltip: {
                                                    shared: true,
                                                    intersect: false
                                                },
                                                xaxis: {
                                                    categories: age_gender_labels,
                                                },
                                            };

                                            var chart = new ApexCharts(document.querySelector(`#fb-age-gender-chart-${post_id}`), options);
                                            chart.render();

                                        }

                                    }
                                }


                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            $(`#spin-${post_id}`).css('display', 'none');
                            toastr.error('Failed to get the stats');
                        }
                    });

                    // scroll
                    this.scrollIntoView({
                        behavior: 'smooth', // Smooth scrolling
                        block: 'start' // Align to the top of the viewport
                    });
                    setTimeout(() => {
                        window.scrollBy({
                            top: -800, // Move 800px upward
                            behavior: 'smooth'
                        });
                    }, 500);
                    return;


                    if ($('#chartContainer').is(':visible')) {
                        setTimeout(function () {
                            engagementChart.resize(); // Resize the chart after the container becomes visible
                        }, 300); // Adding a slight delay to ensure container is fully rendered
                    }

                    // impressions
                    var options = {
                        chart: {
                            type: 'bar',
                            width: 400,
                            height: 150, // Set a small height for a progress bar effect
                            stacked: true,
                            toolbar: {
                                show: false
                            }
                        },
                        plotOptions: {
                            bar: {
                                horizontal: true, // Horizontal progress bar
                            },
                        },
                        series:
                            [{
                                name: 'Facebook',
                                data: [10] // 40% of the total bar
                            }, {
                                name: 'Instagram',
                                data: [25] // 25% of the total bar
                            },
                            {
                                name: 'Tiktok',
                                data: [50] // 25% of the total bar
                            },
                            {
                                name: 'Reddit',
                                data: [15] // 25% of the total bar
                            },],
                        dataLabels: {
                            enabled: false // Disable data labels
                        },

                        xaxis: {
                            max: 100, // The total percentage
                            categories: ['Impression count (%)'],
                        },
                        fill: {
                            opacity: 1
                        },
                        legend: {
                            show: true,
                            position: 'bottom'
                        }
                    }
                    $(`#impression-chart-${post_id}`).empty();
                    var chartrt = new ApexCharts(document.querySelector(`#impression-chart-${post_id}`), options);
                    chartrt.render();

                });


                // -----------------------------------------------TEAMS------------------------------------
                // switch to chat
                $(document).on('click', '.teams-container', function () {
                    $('.t-c').each(function () { $(this).css('display', 'none') });
                    $($(this).data('target')).css('display', 'block');
                    $('.teams-container').each(function () { $(this).removeClass('active-div') });
                    $(this).addClass('active-div');
                    if ($(this).data('target') == '#teams-chats') {
                        var scrollableDiv = $('#chat-elem');
                        scrollableDiv.scrollTop(scrollableDiv[0].scrollHeight);

                    }

                });
                // back to all teams
                $(document).on('click', '#back-to-teams', function () {
                    $('#create-team-btn').css('display', 'block');
                    $('#back-to-teams').css('display', 'none');
                    $('#available-teams').css('display', 'block');
                    $('#team-workspace').css('display', 'none');

                });

                // get team
                $(document).on('click', '.view-team-btn', function () {
                    // Create a new FormData object
                    var formData = new FormData();
                    var team_id = $(this).data('placeholder');
                    if (team_id == '') {
                        return;
                    }
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('team_id', team_id);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "view-team" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-content').html();

                                $('#teams-content').html(newElementContent);
                                // initializeMultiSelect();
                                $('#available-teams').css('display', 'none');
                                $('#create-team-btn').css('display', 'none');
                                $('#back-to-teams').css('display', 'block');
                                $('#team-workspace').css('display', 'flex');
                                setTimeout(function () {
                                    var scrollableDiv = $('#chat-elem');
                                    scrollableDiv.scrollTop(scrollableDiv[0].scrollHeight);
                                    return;
                                }, 2)
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get the team.');
                            console.error(textStatus, errorThrown);
                        }
                    });


                });

                // members
                $(document).on('click', '#team-members-btn', function () {
                    $('.t-c').each(function () { $(this).css('display', 'none') });
                    $('#team-members').css('display', 'block');

                });

                // generate link sidebar
                $(document).on('click', '#generate-link-btn', function () {
                    $('.t-c').each(function () { $(this).css('display', 'none') });
                    $('#generate-link').css('display', 'block');
                    initializeMultiSelect();

                });
                // generate-link-btn2
                $(document).on('click', '#generate-link-btn2', function () {
                    var num_mem = $('#link-member-number').val();
                    const linkPermissionsInstance = multiSelectInstances.find(instance => instance.selectElement.dataset.name === "link-permissions");

                    if (!linkPermissionsInstance) {
                        // Get selected items
                        toastr.error('Kindly select atleast one permission')
                        return;

                    }
                    const selectedItems = linkPermissionsInstance.selectedItems.map(item => item.text);
                    // getSelectedOptions();
                    if (num_mem == '' || selectedItems == '') {
                        toastr.error('Kindly fill all the fields')
                        return;
                    }

                    // show loading spinner 
                    $('#wait-link-spinner').css('display', 'flex');
                    var formData = new FormData();
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('team_id', $('#team-id').text());
                    formData.append('members_number', num_mem);
                    formData.append('members_permissions', selectedItems)

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "generate-invite-link" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error('failed to load');

                            } else {
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-content').html();

                                $('#teams-content').html(newElementContent);
                                $('#available-teams').css('display', 'none');
                                $('#create-team-btn').css('display', 'none');
                                $('#back-to-teams').css('display', 'block');
                                $('#team-workspace').css('display', 'flex');
                                $('#wait-link-spinner').css('display', 'none');
                                $('#gen-link').text(response['result']);
                                $('#generated-link').css('display', 'flex');

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get the team.');
                            console.error(textStatus, errorThrown);
                            $('#wait-link-spinner').css('display', 'none');

                        }
                    });



                });
                // add files
                $(document).on('click', '#file-upload-btn', function () {
                    var file_title = $('#team-file-title').val();
                    if (file_title == '') {
                        toastr.error('Title missing');
                        return;
                    }
                    var file_notes = $('#file-attachment-notes').val();
                    if (file_notes == '') {
                        toastr.error('Attachment notes missing');
                        return;
                    }
                    const fileInput = $('#team-upload-file');
                    const file = fileInput[0].files[0];
                    if (!file) {
                        toastr.error('Please upload a file');
                        return;
                    }
                    var team_id = $(this).data('team_id');
                    // upload items to team
                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('team_id', team_id);
                    formData.append('file_title', file_title);
                    formData.append('file_notes', file_notes);
                    formData.append('file', file);
                    $.ajax({
                        url: '{% url "upload-team-file" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error'])

                            } else {
                                toastr.success('File uploaded successfully.');
                                // $('#train-doc-file').val('');
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-files').html();
                                var newActivityContent = tempDiv.find('#teams-activity').html();

                                $('#teams-files').html(newElementContent);
                                $('#teams-activity').html(newActivityContent);
                                // initializeMultiSelect();

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get the team.');
                            console.error(textStatus, errorThrown);
                        }
                    });



                });
                // delete file btn
                $(document).on('click', '.delete-team-file-btn', function () {
                    var deleting_file = $(this).data('file_id');
                    $('#confirmModalDeleteTeamFileAction').data('file_id', deleting_file);
                    $('#confirmModalTeamFileDeleteCenter').modal('show');
                });
                // confirm delete file 
                $(document).on('click', '#confirmModalDeleteTeamFileAction', function () {
                    var deleting_file = $('#confirmModalDeleteTeamFileAction').data('file_id');
                    $('#confirmModalTeamFileDeleteCenter').modal('hide');

                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('file_id', deleting_file);
                    $.ajax({
                        url: '{% url "delete-team-file" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error'])

                            } else {
                                toastr.success('File deleted successfully.');
                                // $('#train-doc-file').val('');
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-files').html();
                                var newActivityContent = tempDiv.find('#teams-activity').html();

                                $('#teams-files').html(newElementContent);
                                $('#teams-activity').html(newActivityContent);
                                // initializeMultiSelect();

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to delete the file');
                            console.error(textStatus, errorThrown);
                        }
                    });


                });
                // view the team
                $(document).on('click', '.view-team-btn', function () {
                    // Create a new FormData object
                    var formData = new FormData();
                    var team_id = $(this).data('placeholder');
                    if (team_id == '') {
                        return;
                    }
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('team_id', team_id);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "view-team" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {

                            } else {
                                // update html
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#teams-content').html();

                                $('#teams-content').html(newElementContent);
                                // initializeMultiSelect();
                                $('#available-teams').css('display', 'none');
                                $('#create-team-btn').css('display', 'none');
                                $('#back-to-teams').css('display', 'block');
                                $('#team-workspace').css('display', 'flex');

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get the team.');
                            console.error(textStatus, errorThrown);
                        }
                    });


                });

                // upload document 

                $(document).on('click', '#confirmModalUploadDocAction', function () {
                    $('#confirmModalUploadDocCenter').modal('hide');
                    const fileInput = $('#train-doc-file');
                    const file = fileInput[0].files[0];
                    var formData = new FormData();
                    var replace_info = $('#replace_info').prop('checked');
                    formData.append(`train_doc`, file);  // `file0`, `file1`, etc., as keys
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('replace_info', replace_info);
                    $.ajax({
                        url: '{% url "upload_train_doc" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error'])

                            } else {
                                toastr.success('File uploaded. Training in progress');
                                $('#train-doc-file').val('');
                                // update html
                                // var tempDiv = $('<div>').html(response);

                                // // Extract the specific element from the new HTML
                                // var newElementContent = tempDiv.find('#teams-content').html();

                                // $('#teams-content').html(newElementContent);
                                // // initializeMultiSelect();
                                // $('#available-teams').css('display', 'none');
                                // $('#create-team-btn').css('display', 'none');
                                // $('#back-to-teams').css('display', 'block');
                                // $('#team-workspace').css('display', 'flex');

                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to get the team.');
                            console.error(textStatus, errorThrown);
                        }
                    });

                });
                $(document).on('click', '#upload-train', function () {
                    var tr_file = $('#train-doc-file').val();
                    if (!tr_file) {
                        toastr.error('Please select a file.');
                        return;
                    };
                    const fileInput = $('#train-doc-file');
                    const file = fileInput[0].files[0];
                    if (!file) {
                        toastr.error('Please select a file.');
                        return;
                    }

                    // Client-side validation for MIME type
                    if (file.type !== 'application/pdf') {
                        toastr.error('Only PDF files are allowed.');
                        fileInput.value = ''; // Clear invalid file
                        return;
                    }
                    $('#confirmModalUploadDocCenter').modal('show');



                });

                // ----------------------------------SUBMIT REQUEST----------------------------
                $(document).on('click', '#request-btn', function () {
                    $('#request-form').css('display', 'flex');
                    $('#request-btn').css('display', 'none');
                    $('#cancel-request-btn').css('display', 'block');
                    $('#requests-section').css('display', 'none');
                });
                $(document).on('click', '#cancel-request-btn', function () {
                    $('#request-form').css('display', 'none');
                    $('#requests-section').css('display', 'flex');
                    $('#request-btn').css('display', 'block');
                    $('#cancel-request-btn').css('display', 'none');
                });



                // -----------------------------CREATE POST-------------------------------------

                $(document).on('click', '.form-check-input.platforms_select', function () {
                    var isChecked = false;
                    $('.form-check-input.platforms_select').each(function () {
                        var ch = $(this).prop('checked');
                        if (ch) {
                            isChecked = true;
                            if ($('#to_upload_content').hasClass('post-btn-proceed-disabled')) {
                                $('#to_upload_content').toggleClass('post-btn-proceed-disabled');
                                return;
                            };
                            return;
                        }
                    });
                    var fbSelected = $('#facebook_platform').prop('checked');
                    var igSelected = $('#instagram_platform').prop('checked');
                    var rdSelected = $('#reddit_platform').prop('checked');
                    if (rdSelected) {
                        $('#title-set-up').css('display', 'block');
                    } else {
                        $('#title-set-up').css('display', 'none');
                    }

                    if (!isChecked) {
                        $('#to_upload_content').toggleClass('post-btn-proceed-disabled');
                    };



                });
                $(document).on('click', '#to_upload_content', function () {
                    if (!$('#to_upload_content').hasClass('post-btn-proceed-disabled')) {
                        var success = true;

                        var facebookSelected = $('#facebook_platform').prop('checked');
                        var instagramSelected = $('#instagram_platform').prop('checked');
                        var tiktokSelected = $('#tiktok_platform').prop('checked');
                        var redditSelected = $('#reddit_platform').prop('checked');
                        // Facebook
                        if (facebookSelected) {
                            // selected
                            $('.target_facebook').each(function () { $(this).removeClass('unselectedPlatform') });
                        } else {
                            //  unselected
                            $('.target_facebook').each(function () { $(this).addClass('unselectedPlatform') });

                        }
                        // Instagram
                        if (instagramSelected) {
                            // selected
                            $('#non_media_post').css('display', 'none');
                            $('.target_instagram').each(function () { $(this).removeClass('unselectedPlatform') });
                        } else {
                            //  unselected
                            $('.target_instagram').each(function () { $(this).addClass('unselectedPlatform') });

                        }
                        // Reddit
                        if (redditSelected) {
                            // selected
                            $('.target_reddit').each(function () { $(this).removeClass('unselectedPlatform') });
                        } else {
                            //  unselected
                            $('.target_reddit').each(function () { $(this).addClass('unselectedPlatform') });

                        }
                        if (tiktokSelected) {
                            //titkok selected check the creator info
                            $('.target_tiktok').each(function () { $(this).removeClass('unselectedPlatform') });
                            $('#non_media_post').css('display', 'none')
                            $('#wait-upload-spinner').css('display', 'flex');
                            // grab creator info data from the server
                            var formData = new FormData();
                            // Append other input fields to FormData
                            var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                            formData.append('company_id', '{{ company_id }}');
                            // Send the form data via AJAX
                            $.ajax({
                                url: '{% url "get_tiktok_creator" %}', // Replace with your Django endpoint URL
                                type: 'POST',
                                headers: {
                                    'X-CSRFToken': csrfToken
                                },
                                data: formData,
                                processData: false, // Prevent jQuery from processing the data
                                contentType: false, // Prevent jQuery from setting the content type
                                success: function (response) {
                                    if (response['error']) {
                                        success = false;
                                        toastr.error(response['error']);
                                        $('#wait-upload-spinner').css('display', 'none');

                                    } else {
                                        $('#max-tiktok-duration').text(response['max_video_post_duration_sec']);
                                        if (response['stitch_disabled']) { $('#to_stitch').prop('checked', false) } else $('#to_stitch').prop('checked', true);
                                        if (response['duet_disabled']) { $('#to_duet').prop('checked', false) } else $('#to_duet').prop('checked', true);
                                        if (response['comment_disabled']) { $('#to_comment').prop('checked', false) } else $('#to_comment').prop('checked', true);

                                        $('#platform_select').css('display', 'none');
                                        $('#step1').removeClass('current');
                                        $('#step1').addClass('completed');
                                        $('#step2').removeClass('upcoming');
                                        $('#step2').addClass('current');
                                        $('#upload_content_view').css('display', 'block');
                                        $('#wait-upload-spinner').css('display', 'none');

                                    }
                                },
                                error: function (jqXHR, textStatus, errorThrown) {
                                    success = false;
                                    toastr.error('Failed to submit form.');
                                    console.error(textStatus, errorThrown);
                                    $('#wait-upload-spinner').css('display', 'none');

                                }
                            });

                        } else {
                            // tiktok unselected
                            $('.target_tiktok').each(function () { $(this).addClass('unselectedPlatform') });
                            $('#platform_select').css('display', 'none');
                            $('#step1').removeClass('current');
                            $('#step1').addClass('completed');
                            $('#step2').removeClass('upcoming');
                            $('#step2').addClass('current');
                            $('#upload_content_view').css('display', 'block');
                        }
                        var igSelected = $('#instagram_platform').prop('checked');
                        var tkSelected = $('#tiktok_platform').prop('checked');
                        if (!igSelected && !tkSelected) {
                            $('#non_media_post').css('display', 'flex');
                        }
                        return;
                    };
                });
                $(document).on('click', '#back_to_platforms', function () {
                    $('#platform_select').css('display', 'block');
                    $('#upload_content_view').css('display', 'none');
                    $('#preview').empty();
                    $('input[type="text"], input[type="email"],input[type="file"],   textarea').val('');
                    valideImages = [];
                    imageContainer = [];

                });
                $(document).on('click', '#to_set_up_content', function () {
                    // check if user has uploaded a file
                    var iml = $('#preview').children().length;
                    if (iml == 0) {
                        return;
                    };

                    // upload the file and check content of file, filetype file length,etc 
                    $('#upload_content_view').css('display', 'none');
                    $('#step2').removeClass('current');
                    $('#step2').addClass('completed');
                    $('#step3').removeClass('upcoming');
                    $('#step3').addClass('current');
                    $('#set_up_content').css('display', 'block');


                });

                $(document).on('click', '#non_media_post', function () {
                    // upload the file and check content of file, filetype file length,etc 
                    $('#upload_content_view').css('display', 'none');
                    $('#step2').removeClass('current');
                    $('#step2').addClass('completed');
                    $('#step3').removeClass('upcoming');
                    $('#step3').addClass('current');
                    $('#set_up_content').css('display', 'block');


                });

                $(document).on('click', '#back_to_upload', function () {
                    $('#set_up_content').css('display', 'none');
                    $('#upload_content_view').css('display', 'block');


                    // disable next btn
                });
                $(document).on('click', '#to_review', function () {
                    var descript = $('#content_description').val();
                    var title = $('#content_title').val();
                    // ensure the content has a title and description
                    if (!descript || !title) { return; }
                    $('#step3').removeClass('current');
                    $('#step3').addClass('completed');
                    $('#step4').removeClass('upcoming');
                    $('#step4').addClass('current');
                    $('#set_up_content').css('display', 'none');
                    $('#review_content').css('display', 'block');
                });

                // delete post
                $(document).on('click', '.delete-post-comment', function () {

                    var post_id = $(this).data('post_id');
                    var comment_id = $(this).data('comment_id');
                    var delete_type = $(this).data('type');
                    if (!post_id || !delete_type) { return; }
                    if (delete_type == 'comment' && !comment_id) { return }
                    // display modal
                    $('#confirmModalDeletePostAction').data('post_id', post_id);
                    $('#confirmModalDeletePostAction').data('comment_id', comment_id);
                    $('#confirmModalDeletePostAction').data('type', delete_type);

                    $('#confirmModalPostDeleteCenter').modal('show');

                });

                // confirm delete post
                $(document).on('click', '#confirmModalDeletePostAction', function () {
                    var post_id = $('#confirmModalDeletePostAction').data('post_id');
                    var comment_id = $('#confirmModalDeletePostAction').data('comment_id');
                    var delete_type = $('#confirmModalDeletePostAction').data('type');
                    // display modal
                    var delete_post = $(`#delete-${post_id}`);
                    delete_post.removeClass();
                    delete_post.addClass('fa fa-spinner fa-spin');

                    $('#confirmModalPostDeleteCenter').modal('hide');
                    var formData = new FormData();
                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('post_id', post_id);
                    formData.append('comment_id', comment_id);
                    formData.append('action_type', delete_type);
                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "delete_comment" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                success = false;
                                toastr.error(response['error']);
                                delete_post.removeClass();
                                delete_post.addClass('fa fa-trash');

                            } else {
                                toastr.success('Post deleted successfully');
                                var tempDiv = $('<div>').html(response);

                                // Extract the specific element from the new HTML
                                var newElementContent = tempDiv.find('#post-content').html();

                                $('#post-content').html(newElementContent);
                                // update the post

                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            success = false;
                            delete_post.removeClass();
                            delete_post.addClass('fa fa-trash');

                            toastr.error('Failed. Try again later.');
                            console.error(textStatus, errorThrown);
                            $('#wait-upload-spinner').css('display', 'none');

                        }
                    });



                });

                $(document).on('click', '#upload_new_post', function () {
                    // reset all fields
                    $('input[type="checkbox"]').prop('checked', false);
                    $('input[type="text"], input[type="email"],input[type="file"],   textarea').val('');
                    $('select').prop('selectedIndex', 0);
                    $('#content_upload_successful').css('display', 'none');
                    $('#platform_select').css('display', 'block');
                    $('#step2,#step3').removeClass('completed');
                    $('#step3').removeClass('upcoming');
                    $('#step2').addClass('upcoming');
                    $('#step1').addClass('current');
                    $('#preview').empty();
                    valideImages = [];
                    imageContainer = [];


                });

                $(document).on('keyup', '#content_title', function () {
                    var descript = $('#content_description').val();
                    var title = $('#content_title').val();
                    var iml = $('#preview').children().length;
                    var hasMedia = true;
                    if (iml == 0) {
                        hasMedia = false;
                    }
                    var redditChecked = $('#reddit_platform').prop('checked');
                    // ensure the content has a title and description
                    if (hasMedia) {
                        if (!descript) {
                            if (!$('#submit_post').hasClass('post-btn-proceed-disabled')) {
                                $('#submit_post').addClass('post-btn-proceed-disabled');
                                return;
                            };
                            return;

                        }
                    } else {
                        if (!descript || !title) {
                            if (!$('#submit_post').hasClass('post-btn-proceed-disabled')) {
                                $('#submit_post').addClass('post-btn-proceed-disabled');
                                return;
                            };
                            return;
                        }
                    }
                    $('#submit_post').removeClass('post-btn-proceed-disabled');
                });
                $(document).on('keyup', '#content_description', function () {
                    var descript = $('#content_description').val();
                    var title = $('#content_title').val();
                    var redditChecked = $('#reddit_platform').prop('checked');
                    var fbSelected = $('#facebook_platform').prop('checked');
                    var igSelected = $('#instagram_platform').prop('checked');
                    var rdSelected = $('#reddit_platform').prop('checked');

                    var iml = $('#preview').children().length;
                    var hasMedia = true;
                    if (iml == 0) {
                        hasMedia = false;
                    }
                    var redditChecked = $('#reddit_platform').prop('checked');
                    // ensure the content has a title and description
                    if (hasMedia) {
                        if (!descript) {
                            if (!$('#submit_post').hasClass('post-btn-proceed-disabled')) {
                                $('#submit_post').addClass('post-btn-proceed-disabled');
                                return;
                            };
                            return;

                        }
                    } else {
                        if (redditChecked) {
                            if (!descript || !title) {
                                if (!$('#submit_post').hasClass('post-btn-proceed-disabled')) {
                                    $('#submit_post').addClass('post-btn-proceed-disabled');
                                    return;
                                };
                                return;
                            }
                        }

                    }
                    $('#submit_post').removeClass('post-btn-proceed-disabled');


                });

                $(document).on('click', '#review_link', function () {
                    var rev_link = $(this).text();
                    var tempInput = $("<input>");
                    $("body").append(tempInput);
                    tempInput.val(rev_link).select();
                    try {
                        document.execCommand("copy");
                        toastr.success("Copied to clipboard.");
                    } catch (err) {
                        toastr.error("Failed to copy link.");
                    }

                });
                // upload modal
                $(document).on('click', '#submit_post', function () {
                    var descript = $('#content_description').val();
                    var title = $('#content_title').val();
                    var subsSelected = null;
                    var redditChecked = $('#reddit_platform').prop('checked');
                    // ensure the content has a title and description
                    var fbSelected = $('#facebook_platform').prop('checked');
                    var igSelected = $('#instagram_platform').prop('checked');
                    var rdSelected = $('#reddit_platform').prop('checked');
                    if (!descript) { return; }
                    if (redditChecked) {
                        const selectedSubsInstance = multiSelectInstances.find(instance => instance.selectElement.dataset.name === "red_subs");

                        if (!selectedSubsInstance) {
                            toastr.error('Kindly select at least one subreddit and add a flair');
                            return;

                        }
                        const selectedItems = selectedSubsInstance.selectedItems.map(item => item.text);
                        // getSelectedOptions();
                        if (selectedItems == '') {
                            toastr.error('Kindly select at least one subreddit and add a flair');

                            return;
                        }
                        if (!flairsSelected) {
                            toastr.error('One or more subreddits missing a flair');
                            return;
                        }
                        subsSelected = selectedItems;

                    }
                    $('#confirmModalPostTitle').text('Upload Post');
                    var bdy = 'Confirm post upload';
                    $('#confirmModalPostBody').text(bdy);

                    $('#forbiddenModalPostAction').removeClass();
                    $('#forbiddenModalPostAction').text('Post');
                    $('#forbiddenModalPostAction').addClass('btn btn-primary');

                    $('#confirmModalPostAction').removeClass();
                    $('#confirmModalPostAction').text('Post');
                    $('#confirmModalPostAction').addClass('btn btn-primary');
                    $('#confirmModalPostCenter').modal('show');
                });

                // confirm upload post
                $(document).on('click', '#confirmModalPostAction', function () {
                    // Create a new FormData object

                    var subsSelected = null;
                    var redditChecked = $('#reddit_platform').prop('checked');
                    // ensure the content has a title and description
                    if (redditChecked) {
                        const selectedSubsInstance = multiSelectInstances.find(instance => instance.selectElement.dataset.name === "red_subs");

                        if (!selectedSubsInstance) {
                            return;

                        }
                        const selectedItems = selectedSubsInstance.selectedItems.map(item => item.text);
                        // getSelectedOptions();
                        if (selectedItems == '') {
                            return;
                        }
                        if (!flairsSelected) {
                            return;
                        }
                        subsSelected = selectedItems;

                    }

                    var title = $('#content_title').val();
                    var description = $('#content_description').val();
                    var hashTags = $('#content_tags').val();
                    var isScheduled = $('#schedule_switch').prop('checked');
                    var tiktokSelected = $('#tiktok_platform').prop('checked');
                    var instagramSelected = $('#instagram_platform').prop('checked');
                    var facebookSelected = $('#facebook_platform').prop('checked');
                    var redditSelected = $('#reddit_platform').prop('checked');

                    // tiktok
                    var tk_allow_comment = $('#to_comment').prop('checked');
                    var tk_allow_duet = $('#to_duet').prop('checked');
                    var tk_allow_stitch = $('#to_stitch').prop('checked');
                    var ai_generated = $('#ai_gen').prop('checked');
                    var tk_to_everyone = $('#to_everyone').prop('checked');
                    var tk_to_friends = $('#to_friends').prop('checked');
                    var tk_to_only_me = $('#to_only_me').prop('checked');
                    var tk_tiktok_mentions = $('#tiktok_mentions').val();

                    // Instagram
                    var to_ig_stories = $('#to_ig_stories').prop('checked');
                    var to_ig_posts = $('#to_ig_posts').prop('checked');
                    var to_ig_reels = $('#to_ig_reels').prop('checked');
                    var ig_copyright = $('#ig_copyright').prop('checked');
                    var ig_location_tags = $('#ig_location_tags').val();
                    var ig_product_tags = $('#ig_product_tags').val();

                    // Facebook
                    var to_fb_stories = $('#to_fb_stories').prop('checked');
                    var to_fb_posts = $('#to_fb_posts').prop('checked');
                    var to_fb_reels = $('#to_fb_reels').prop('checked');
                    var fb_copyright = $('#fb_copyright').prop('checked');
                    var fb_location_tags = $('#fb_location_tags').val();

                    // Reddit
                    var red_is_nsfw = $('#nsfw_tag').prop('checked');
                    var red_is_spoiler = $('#spoiler_tag').prop('checked');

                    var dateSched = $('#datePicker').val();

                    var formData = new FormData();
                    var iml = $('#preview').children().length;
                    var hasMedia = true;
                    if (iml == 0) {
                        hasMedia = false;
                    } else {
                        imageContainer.forEach((file, index) => {
                            formData.append(`file${index}`, file);  // `file0`, `file1`, etc., as keys
                        });
                    }
                    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

                    // Append other input fields to FormData
                    var csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
                    formData.append('company_id', '{{ company_id }}');
                    formData.append('title', title);
                    formData.append('description', description);
                    formData.append('timezone', timezone);
                    formData.append('hashTags', hashTags);
                    formData.append('hasMedia', hasMedia);
                    formData.append('isScheduled', isScheduled);
                    formData.append('tiktokSelected', tiktokSelected);
                    formData.append('instagramSelected', instagramSelected);
                    formData.append('facebookSelected', facebookSelected);
                    formData.append('redditSelected', redditSelected);
                    formData.append('tk_allow_comment', tk_allow_comment);
                    formData.append('tk_allow_duet', tk_allow_duet);
                    formData.append('tk_allow_stitch', tk_allow_stitch);
                    formData.append('ai_generated', ai_generated);
                    formData.append('tk_to_everyone', tk_to_everyone);
                    formData.append('tk_to_friends', tk_to_friends);
                    formData.append('tk_to_only_me', tk_to_only_me);
                    formData.append('tk_tiktok_mentions', tk_tiktok_mentions);
                    formData.append('to_ig_stories', to_ig_stories);
                    formData.append('to_ig_posts', to_ig_posts);
                    formData.append('to_ig_reels', to_ig_reels);
                    formData.append('ig_copyright', ig_copyright);
                    formData.append('ig_location_tags', ig_location_tags);
                    formData.append('ig_product_tags', ig_product_tags);
                    formData.append('to_fb_stories', to_fb_stories);
                    formData.append('to_fb_posts', to_fb_posts);
                    formData.append('to_fb_reels', to_fb_reels);
                    formData.append('fb_copyright', fb_copyright);
                    formData.append('fb_location_tags', fb_location_tags);
                    formData.append('red_is_nsfw', red_is_nsfw);
                    formData.append('red_is_spoiler', red_is_spoiler);
                    formData.append('red_sub_selected', subsSelected);
                    formData.append('date_scheduled', dateSched);

                    // Send the form data via AJAX
                    $.ajax({
                        url: '{% url "upload_post" %}', // Replace with your Django endpoint URL
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrfToken
                        },
                        data: formData,
                        processData: false, // Prevent jQuery from processing the data
                        contentType: false, // Prevent jQuery from setting the content type
                        success: function (response) {
                            if (response['error']) {
                                toastr.error(response['error']);
                                toastr.error('Failed to submit form.');
                                $('#confirmModalPostCenter').modal('hide');
                            } else {
                                toastr.success('Uploaded successfully');
                                $('#confirmModalPostCenter').modal('hide');
                                // update html
                                $('#step3').removeClass('current');
                                $('#step3').addClass('completed');
                                $('#set_up_content').css('display', 'none');
                                $('#content_upload_successful').css('display', 'block');
                                return;
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            toastr.error('Failed to submit form.');
                            $('#confirmModalPostCenter').modal('hide');
                            console.error(textStatus, errorThrown);
                        }
                    });
                });

                function postContent(post_now) {
                    if (post_now) {
                        // post content now
                    } else {
                        // scedule post
                    }

                }

                // schedule post
                $(document).on('click', '#schedule-post', function () {
                    $('#schedule-post').css('color', 'black');
                    $('#now-post').css('color', 'grey');
                    $('#schedule_switch').prop('checked', true);
                    $('#datePicker').css('display', 'block');
                    $('#sch-desc').css('display', 'block');
                });
                //post now
                $(document).on('click', '#now-post', function () {
                    $('#schedule-post').css('color', 'grey');
                    $('#now-post').css('color', 'black');
                    $('#schedule_switch').prop('checked', false);
                    $('#datePicker').css('display', 'none');
                    $('#sch-desc').css('display', 'none');
                });
                // prop check
                $(document).on('click', '#schedule_switch', function () {
                    if ($('#schedule_switch').prop('checked')) {
                        $('#schedule-post').css('color', 'black');
                        $('#now-post').css('color', 'grey');
                        $('#datePicker').css('display', 'block');
                        $('#sch-desc').css('display', 'block');
                    } else {
                        $('#schedule-post').css('color', 'grey');
                        $('#now-post').css('color', 'black');
                        $('#datePicker').css('display', 'none');
                        $('#sch-desc').css('display', 'none');
                    }
                });
                // fb_stories
                $(document).on('select', '#fb_stories', function () {
                    alert('clicked fb')
                });
            });



        </script>

        <!-- time picker -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const today = new Date();
                const futureLimit = new Date();
                futureLimit.setDate(today.getDate() + 30); // Example: 6 months from today

                // Initialize Flatpickr
                flatpickr("#datePicker", {
                    minDate: today,                // Only future dates allowed
                    maxDate: futureLimit,          // Set a limit for the future date (6 months here)
                    enableTime: true,              // Enable time selection
                    dateFormat: "l, j F Y h:i K",      // Display format for date and time
                });
            });
        </script>
        <script>

            var ischatopen = false;
            var ele = document.getElementById("chatbar");

            function openChatBox() {
                if (ischatopen == false) {
                    ele.classList.add("toggle");
                    ischatopen = true;
                    document.getElementById("chatOpen").classList.remove("fa-comments");
                    document.getElementById("chatOpen").classList.add("fa-times");

                }
                else {
                    ele.classList.remove("toggle");
                    ischatopen = false;
                    document.getElementById("chatOpen").classList.add("fa-comments");
                    document.getElementById("chatOpen").classList.remove("fa-times");
                }
            }



            function send() {
                console.log("Here");
                var chatBody = document.getElementById("chatBody");
                var Clientmsg = document.getElementById("MsgInput").value;
                document.getElementById('MsgInput').value = '';
                var divClient = document.createElement("div");
                divClient.classList.add("chat_box_body_self");

                divClient.innerHTML = Clientmsg;

                chatBody.append(divClient);


                var divBot = document.createElement("div");
                divBot.classList.add("chat_box_body_other");

                divBot.innerHTML = Clientmsg;
                setTimeout(function () {
                    $('divBot').show();
                }, 5000);
                chatBody.append(divBot);
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        </script>
        <script>

            $(document).ready(function () {
                // get the clicked item
                // $('.comments-container').click(function () {
                //     alert('container comment clicked');
                //     // $("#exampleModalCenter").modal('show');

                // });
                // open the modal



            });

        </script>

        <script type="text/javascript">
            window.DjangoURLs = {
                home: "",
                login: "{% url 'login' %}",
                logout: "{% url 'logout' %}"
            };
        </script>
        <script>

            var valideImages = [];
            var imageContainer = [];

            function isFileInArray(file, fileArray) {
                return fileArray.some(f => f.name === file.name && f.size === file.size && f.type === file.type);
            }
            function getVideoMetadata(videoElement) {
                return new Promise((resolve, reject) => {
                    // Set up event to handle loaded metadata
                    videoElement.onloadedmetadata = () => {
                        const videoWidth = videoElement.videoWidth;
                        const videoHeight = videoElement.videoHeight;
                        const videoDuration = videoElement.duration;

                        // Resolve with video metadata
                        resolve({ videoWidth, videoHeight, videoDuration });
                    };

                    // Handle potential errors loading the metadata
                    videoElement.onerror = () => {
                        reject(new Error("Failed to load video metadata."));
                    };
                });
            }

            // validate uploaded
            async function validateAndAddFile(newFile) {
                const fileType = newFile.type;
                const fileName = newFile.name.toLowerCase();
                const fileSizeMB = newFile.size / (1024 * 1024); // Convert bytes to MB
                // Define valid formats
                const validImageTypes = ["image/jpeg", "image/png", "image/gif"];
                const validVideoType = "video/mp4";

                // Check current contents for count of videos and images
                const videoCount = imageContainer.filter(file => file.type === validVideoType).length;
                const imageCount = imageContainer.filter(file => validImageTypes.includes(file.type)).length;

                // Check if the file is a video and enforce video limit
                if (fileType === validVideoType) {
                    if (videoCount >= 1) {
                        toastr.error("Only one video can be added per post.");
                        return false;
                    } else {
                        // Add the video to imageContainer
                        // Create a video element to validate resolution and duration
                        const videoElement = document.createElement("video");
                        videoElement.src = URL.createObjectURL(newFile);
                        // Wait for video metadata to load to access resolution and duration
                        try {
                            const { videoWidth, videoHeight, videoDuration } = await getVideoMetadata(videoElement);
                            var tiktokSelected = $('#tiktok_platform').prop('checked');
                            var facebookSelected = $('#facebook_platform').prop('checked');
                            var instagramSelected = $('#instagram_platform').prop('checked');
                            var redditSelected = $('#reddit_platform').prop('checked');
                            if (tiktokSelected) {
                                var maxD = $('#max-tiktok-duration').text();
                                //check maximum video
                                if (videoDuration > maxD) {
                                    toastr.error(`Video duration exceeds Tiktoks maximum allowed duration of 60 seconds (1 minute).`);
                                    return false;
                                }

                            }
                            if (facebookSelected) {
                                //check maximum video
                                if (videoDuration > 60) {
                                    toastr.error(`Video duration exceeds Facebook maximum allowed duration of 90 seconds.`);
                                    return false;
                                }

                            }
                            if (instagramSelected) {
                                //check maximum video
                                if (videoDuration > 60) {
                                    toastr.error(`Video duration exceeds Instagram maximum allowed duration of 90 seconds.`);
                                    return false;
                                }

                            }
                            if (redditSelected) {
                                //check maximum video
                                if (videoDuration > 900) {
                                    toastr.error(`Video duration exceeds Reddit maximum allowed duration of 15 Minutes.`);
                                    return false;
                                }

                            }
                            return true;
                        } catch {
                            toastr.error(`Error loading video metadata.`);
                            return false;
                        }

                    }
                }

                // Check if the file is an image and enforce image limit
                if (validImageTypes.includes(fileType)) {
                    if (imageCount >= 5) {
                        toastr.error("Only a maximum of 5 images can be added per post.");
                        return false;
                    } else {
                        // check if tiktok is selected
                        var tiktokSelected = $('#tiktok_platform').prop('checked');
                        if (tiktokSelected) {
                            toastr.error("TikTok only support video files.");
                            return false;
                        }
                        // Add the image to imageContainer
                        return true;
                    }
                }

                // If the file format is not valid
                toastr.error("Invalid file type. Only .jpg, .png .gif images and .mp4, .mov, .webm video are allowed.");
                return false;
            }


            function addFileToArray(file, fileArray) {
                if (!isFileInArray(file, fileArray)) {
                    fileArray.push(file);
                    console.log('File added:', file.name);
                } else {
                    console.log('File already in array:', file.name);
                }
            }
            async function FileVerification(event) {
                var validatedFiles = [];

                var errorStatement = "";

                var files = event.target.files;

                var minImageWidth = 400;
                var minImageHeight = 400;

                for (var i = 0; i < files.length; i++) {

                    //image Informations
                    var fileName = files[i].name;
                    var fileType = files[i].type;
                    var fileSize = files[i].size;
                    var ImageHeight;
                    var ImageWidth;

                    var reader = new FileReader();
                    var image = new Image();
                    image.src = reader.readAsDataURL(files[i]);
                    ImageWidth = image.width;
                    ImageHeight = image.height;

                    // Check if the file is an image or video
                    if (!fileType.startsWith("image/") && !fileType.startsWith("video/")) {
                        $('input[type="text"], input[type="email"],input[type="file"],   textarea').val('');
                        errorStatement += "File format not supported";
                    }

                    //verification de la qualit
                    else if ((ImageHeight < minImageHeight) && (ImageWidth > minImageWidth)) {
                        $('input[type="text"], input[type="email"],input[type="file"],   textarea').val('');
                        errorStatement += "Resolution too low";

                        //verifier le poids de toutes les images
                    } else {
                        if (await validateAndAddFile(files[i])) {
                            addFileToArray(files[i], imageContainer);
                            validatedFiles.push(files[i]);
                        }
                    }
                }

                if (errorStatement != "") {
                    $('input[type="text"], input[type="email"],input[type="file"],   textarea').val('');
                    toastr.error(errorStatement);

                }

                valideImages = imageContainer;
                //    valideImages = validatedFiles;
                FileDisplayA(validatedFiles);
            }

            function FileDisplayA(files) {
                var preview = document.querySelector('#preview');
                function readAndPreview(file) {
                    var reader = new FileReader();
                    reader.readAsDataURL(file);

                    reader.onloadend = function () {
                        $('#image-delete-instruction').css('display', 'block');
                        var mediaElement;
                        var RedditSelected = $('#reddit_platform').prop('checked');
                        if (RedditSelected) {
                            $('#title-set-up').css('display', 'none');
                        };


                        // Create image or video element based on file type
                        if (file.type.startsWith("image/")) {
                            mediaElement = new Image();
                            mediaElement.height = 300;
                            mediaElement.style.borderRadius = "10px";
                            mediaElement.style.margin = "10px";
                            mediaElement.title = file.name;
                            mediaElement.src = this.result;

                        } else if (file.type.startsWith("video/")) {
                            mediaElement = document.createElement('video');
                            mediaElement.controls = true; // Show video controls
                            mediaElement.style.borderRadius = "10px";
                            mediaElement.style.margin = "10px";
                            mediaElement.title = file.name;
                            mediaElement.src = this.result;
                            mediaElement.height = 300; // Set height for video

                            // remove the title field
                        }

                        // Event listener to remove the media element on click
                        var nMediaElement = $(mediaElement).on('click', function () {

                            $(this).fadeOut(500, function () {
                                // Remove media element from DOM
                                $(this).remove();
                                var iml = $('#preview').children().length;
                                if (iml == 0) {
                                    var igSelected = $('#instagram_platform').prop('checked');
                                    var tkSelected = $('#tiktok_platform').prop('checked');
                                    if (igSelected || tkSelected) {
                                        $('#non_media_post').css('display', 'none');
                                    } else {
                                        $('#non_media_post').css('display', 'none');
                                    }
                                    $('#to_set_up_content').addClass('post-btn-proceed-disabled');
                                };
                                // Remove file from the array
                                files = files.filter(f => f.name !== file.name);
                                imageContainer = imageContainer.filter(f => f.name !== file.name);
                                valideImages = valideImages.filter(f => f.name !== file.name);
                                var mediaCount = $('#preview').children().length;
                                // Optional: Hide the delete instruction if there are no media items
                                if (mediaCount == 0) {
                                    $('#multiPostFiles').val('');
                                    $('#image-delete-instruction').css('display', 'none');
                                }
                            });
                        });
                        preview.appendChild(mediaElement);
                        var iml = $('#preview').children().length;
                        if (iml > 0) {
                            $('#non_media_post').css('display', 'none');
                            $('#to_set_up_content').removeClass('post-btn-proceed-disabled');
                        };

                        // Add file to the array if its not already there
                        if (!files.some(f => f.name === file.name)) {
                            files.push(file);
                        }
                    };
                }

                if (files) {
                    [].forEach.call(files, readAndPreview);
                }
            }

            function create_zip(Images) {
                var zip = new JSZip();
                var zipChunk = new JSZip();
                var Count = 0;

                // Loop through all images and add them to zip chunks
                for (var i = 0; i < Images.length; i++) {
                    var file = Images[i];

                    // Check if the file is a Blob (File)
                    if (file instanceof Blob) {
                        if ((i % 99) != 0) {
                            zipChunk.file(file.name, file);
                        } else {
                            zip.file("Chunk" + Count, zipChunk);
                            zipChunk = new JSZip();  // Reset zipChunk
                            Count++;
                        }
                    } else {
                        console.error('Invalid file type:', file);
                    }
                }

                // Add any remaining files in zipChunk to the main zip file
                if (zipChunk.files.length > 0) {
                    zip.file("Chunk" + Count, zipChunk);
                }

                // Generate the zip file as a Blob (asynchronously)
                return zip.generateAsync({ type: "blob" });
            }
        </script>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-analytics.js";
            import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, sendEmailVerification, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "",
                authDomain: "",
                projectId: "",
                storageBucket: "is-this-a-scam.appspot.com",
                messagingSenderId: "890670762870",
                appId: "1:890670762870:web:1fee0a93e33568345c4857",
                measurementId: "G-5H1CF75HEL"
            };

            // Initialize Firebase
            // const app = initializeApp(firebaseConfig);
            // const analytics = getAnalytics(app);
            // window.auth = getAuth(app);

            function signInWithCustomTokenAct(customToken) {
                signInWithCustomToken(auth, customToken)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        if (user.emailVerified) {
                            toastr.success('Email already verified. Thank you!');
                            $('#verif-prompt').css('display', 'none');
                            setTimeout(() => {
                                window.location.reload();
                            }, 2000);
                            // Proceed with authenticated user actions
                        } else {
                            sendEmailVerification(user).then(() => {
                                toastr.success("Verification email sent! Check your inbox or spam folder");
                            }).catch((error) => {
                                toastr.error("Error sending email verification: Try again after sometime");
                                setTimeout(() => {
                                    window.location.reload();
                                }, 2000);

                            });
                        }
                    })
                    .catch((error) => {
                        console.error('Error signing in with custom token:', error);
                    });
            }

        </script>

</body>

</html>